(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var It={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=Symbol.for("react.element"),qT=Symbol.for("react.portal"),WT=Symbol.for("react.fragment"),HT=Symbol.for("react.strict_mode"),GT=Symbol.for("react.profiler"),QT=Symbol.for("react.provider"),KT=Symbol.for("react.context"),XT=Symbol.for("react.forward_ref"),YT=Symbol.for("react.suspense"),ZT=Symbol.for("react.memo"),JT=Symbol.for("react.lazy"),xm=Symbol.iterator;function eS(t){return t===null||typeof t!="object"?null:(t=xm&&t[xm]||t["@@iterator"],typeof t=="function"?t:null)}var tv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nv=Object.assign,rv={};function Ri(t,e,n){this.props=t,this.context=e,this.refs=rv,this.updater=n||tv}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sv(){}sv.prototype=Ri.prototype;function gf(t,e,n){this.props=t,this.context=e,this.refs=rv,this.updater=n||tv}var yf=gf.prototype=new sv;yf.constructor=gf;nv(yf,Ri.prototype);yf.isPureReactComponent=!0;var Dm=Array.isArray,iv=Object.prototype.hasOwnProperty,vf={current:null},ov={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)iv.call(e,r)&&!ov.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ca,type:t,key:i,ref:o,props:s,_owner:vf.current}}function tS(t,e){return{$$typeof:Ca,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _f(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ca}function nS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Om=/\/+/g;function Xc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nS(""+t.key):e.toString(36)}function Il(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ca:case qT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xc(o,0):r,Dm(s)?(n="",t!=null&&(n=t.replace(Om,"$&/")+"/"),Il(s,e,n,"",function(u){return u})):s!=null&&(_f(s)&&(s=tS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Om,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dm(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Xc(i,a);o+=Il(i,e,n,l,s)}else if(l=eS(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Xc(i,a++),o+=Il(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ja(t,e,n){if(t==null)return t;var r=[],s=0;return Il(t,r,"","",function(i){return e.call(n,i,s++)}),r}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Nl={transition:null},sS={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:vf};oe.Children={map:Ja,forEach:function(t,e,n){Ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ja(t,function(){e++}),e},toArray:function(t){return Ja(t,function(e){return e})||[]},only:function(t){if(!_f(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ri;oe.Fragment=WT;oe.Profiler=GT;oe.PureComponent=gf;oe.StrictMode=HT;oe.Suspense=YT;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sS;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iv.call(e,l)&&!ov.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ca,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:KT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QT,_context:t},t.Consumer=t};oe.createElement=av;oe.createFactory=function(t){var e=av.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:XT,render:t}};oe.isValidElement=_f;oe.lazy=function(t){return{$$typeof:JT,_payload:{_status:-1,_result:t},_init:rS}};oe.memo=function(t,e){return{$$typeof:ZT,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Nl.transition;Nl.transition={};try{t()}finally{Nl.transition=e}};oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};oe.useCallback=function(t,e){return Mt.current.useCallback(t,e)};oe.useContext=function(t){return Mt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Mt.current.useEffect(t,e)};oe.useId=function(){return Mt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Mt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};oe.useRef=function(t){return Mt.current.useRef(t)};oe.useState=function(t){return Mt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Mt.current.useTransition()};oe.version="18.2.0";(function(t){t.exports=oe})(It);const iS=zT(It.exports);var Fh={},lv={exports:{}},Xt={},uv={exports:{}},cv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,M){var b=x.length;x.push(M);e:for(;0<b;){var U=b-1>>>1,Q=x[U];if(0<s(Q,M))x[U]=M,x[b]=Q,b=U;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var M=x[0],b=x.pop();if(b!==M){x[0]=b;e:for(var U=0,Q=x.length,tt=Q>>>1;U<tt;){var Fe=2*(U+1)-1,ee=x[Fe],ue=Fe+1,je=x[ue];if(0>s(ee,b))ue<Q&&0>s(je,ee)?(x[U]=je,x[ue]=b,U=ue):(x[U]=ee,x[Fe]=b,U=Fe);else if(ue<Q&&0>s(je,b))x[U]=je,x[ue]=b,U=ue;else break e}}return M}function s(x,M){var b=x.sortIndex-M.sortIndex;return b!==0?b:x.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(x){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=x)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function T(x){if(y=!1,v(x),!p)if(n(l)!==null)p=!0,$(_);else{var M=n(u);M!==null&&j(T,M.startTime-x)}}function _(x,M){p=!1,y&&(y=!1,g(E),E=-1),f=!0;var b=d;try{for(v(M),h=n(l);h!==null&&(!(h.expirationTime>M)||x&&!A());){var U=h.callback;if(typeof U=="function"){h.callback=null,d=h.priorityLevel;var Q=U(h.expirationTime<=M);M=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===n(l)&&r(l),v(M)}else r(l);h=n(l)}if(h!==null)var tt=!0;else{var Fe=n(u);Fe!==null&&j(T,Fe.startTime-M),tt=!1}return tt}finally{h=null,d=b,f=!1}}var S=!1,C=null,E=-1,N=5,k=-1;function A(){return!(t.unstable_now()-k<N)}function I(){if(C!==null){var x=t.unstable_now();k=x;var M=!0;try{M=C(!0,x)}finally{M?F():(S=!1,C=null)}}else S=!1}var F;if(typeof m=="function")F=function(){m(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,G=P.port2;P.port1.onmessage=I,F=function(){G.postMessage(null)}}else F=function(){w(I,0)};function $(x){C=x,S||(S=!0,F())}function j(x,M){E=w(function(){x(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,$(_))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(x){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var b=d;d=M;try{return x()}finally{d=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,M){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var b=d;d=x;try{return M()}finally{d=b}},t.unstable_scheduleCallback=function(x,M,b){var U=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?U+b:U):b=U,x){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=b+Q,x={id:c++,callback:M,priorityLevel:x,startTime:b,expirationTime:Q,sortIndex:-1},b>U?(x.sortIndex=b,e(u,x),n(l)===null&&x===n(u)&&(y?(g(E),E=-1):y=!0,j(T,b-U))):(x.sortIndex=Q,e(l,x),p||f||(p=!0,$(_))),x},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(x){var M=d;return function(){var b=d;d=M;try{return x.apply(this,arguments)}finally{d=b}}}})(cv);(function(t){t.exports=cv})(uv);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv=It.exports,Gt=uv.exports;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dv=new Set,Do={};function Ns(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(Do[t]=e,t=0;t<e.length;t++)dv.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vh=Object.prototype.hasOwnProperty,oS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mm={},Rm={};function aS(t){return Vh.call(Rm,t)?!0:Vh.call(Mm,t)?!1:oS.test(t)?Rm[t]=!0:(Mm[t]=!0,!1)}function lS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uS(t,e,n,r){if(e===null||typeof e>"u"||lS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function Tf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wf,Tf);dt[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wf,Tf);dt[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wf,Tf);dt[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uS(e,n,s,r)&&(n=null),r||s===null?aS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),$h=Symbol.for("react.profiler"),fv=Symbol.for("react.provider"),pv=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),Uh=Symbol.for("react.suspense"),Bh=Symbol.for("react.suspense_list"),kf=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),mv=Symbol.for("react.offscreen"),bm=Symbol.iterator;function Xi(t){return t===null||typeof t!="object"?null:(t=bm&&t[bm]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Yc;function io(t){if(Yc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yc=e&&e[1]||""}return`
`+Yc+t}var Zc=!1;function Jc(t,e){if(!t||Zc)return"";Zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?io(t):""}function cS(t){switch(t.tag){case 5:return io(t.type);case 16:return io("Lazy");case 13:return io("Suspense");case 19:return io("SuspenseList");case 0:case 2:case 15:return t=Jc(t.type,!1),t;case 11:return t=Jc(t.type.render,!1),t;case 1:return t=Jc(t.type,!0),t;default:return""}}function jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case Us:return"Portal";case $h:return"Profiler";case Cf:return"StrictMode";case Uh:return"Suspense";case Bh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pv:return(t.displayName||"Context")+".Consumer";case fv:return(t._context.displayName||"Context")+".Provider";case Ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kf:return e=t.displayName||null,e!==null?e:jh(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return jh(t(e))}catch{}}return null}function hS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dS(t){var e=gv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tl(t){t._valueTracker||(t._valueTracker=dS(t))}function yv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Pm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vv(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function qh(t,e){vv(t,e);var n=Rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wh(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wh(t,e,n){(e!=="number"||ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oo=Array.isArray;function ti(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(oo(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function _v(t,e){var n=Rr(e.value),r=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nl,Tv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fS=["Webkit","ms","Moz","O"];Object.keys(po).forEach(function(t){fS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),po[e]=po[t]})});function Sv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||po.hasOwnProperty(t)&&po[t]?(""+e).trim():e+"px"}function Cv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Sv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pS=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qh(t,e){if(e){if(pS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xh=null;function If(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yh=null,ni=null,ri=null;function $m(t){if(t=Ia(t)){if(typeof Yh!="function")throw Error(D(280));var e=t.stateNode;e&&(e=tc(e),Yh(t.stateNode,t.type,e))}}function Ev(t){ni?ri?ri.push(t):ri=[t]:ni=t}function kv(){if(ni){var t=ni,e=ri;if(ri=ni=null,$m(t),e)for(t=0;t<e.length;t++)$m(e[t])}}function Iv(t,e){return t(e)}function Nv(){}var eh=!1;function Av(t,e,n){if(eh)return t(e,n);eh=!0;try{return Iv(t,e,n)}finally{eh=!1,(ni!==null||ri!==null)&&(Nv(),kv())}}function Mo(t,e){var n=t.stateNode;if(n===null)return null;var r=tc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Zh=!1;if(Zn)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){Zh=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{Zh=!1}function mS(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var mo=!1,Wl=null,Hl=!1,Jh=null,gS={onError:function(t){mo=!0,Wl=t}};function yS(t,e,n,r,s,i,o,a,l){mo=!1,Wl=null,mS.apply(gS,arguments)}function vS(t,e,n,r,s,i,o,a,l){if(yS.apply(this,arguments),mo){if(mo){var u=Wl;mo=!1,Wl=null}else throw Error(D(198));Hl||(Hl=!0,Jh=u)}}function As(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Um(t){if(As(t)!==t)throw Error(D(188))}function _S(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Um(s),t;if(i===r)return Um(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Dv(t){return t=_S(t),t!==null?Ov(t):null}function Ov(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ov(t);if(e!==null)return e;t=t.sibling}return null}var Mv=Gt.unstable_scheduleCallback,Bm=Gt.unstable_cancelCallback,wS=Gt.unstable_shouldYield,TS=Gt.unstable_requestPaint,Ue=Gt.unstable_now,SS=Gt.unstable_getCurrentPriorityLevel,Nf=Gt.unstable_ImmediatePriority,Rv=Gt.unstable_UserBlockingPriority,Gl=Gt.unstable_NormalPriority,CS=Gt.unstable_LowPriority,bv=Gt.unstable_IdlePriority,Yu=null,On=null;function ES(t){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Yu,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:NS,kS=Math.log,IS=Math.LN2;function NS(t){return t>>>=0,t===0?32:31-(kS(t)/IS|0)|0}var rl=64,sl=4194304;function ao(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ao(a):(i&=o,i!==0&&(r=ao(i)))}else o=n&~s,o!==0?r=ao(o):i!==0&&(r=ao(i));if(r===0)return 0;if(e!==0&&e!==r&&(e&s)===0&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function AS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),a=1<<o,l=s[o];l===-1?((a&n)===0||(a&r)!==0)&&(s[o]=AS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pv(){var t=rl;return rl<<=1,(rl&4194240)===0&&(rl=64),t}function th(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function DS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function Lv(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Fv,xf,Vv,$v,Uv,td=!1,il=[],Sr=null,Cr=null,Er=null,Ro=new Map,bo=new Map,vr=[],OS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jm(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(e.pointerId)}}function Zi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ia(e),e!==null&&xf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MS(t,e,n,r,s){switch(e){case"focusin":return Sr=Zi(Sr,t,e,n,r,s),!0;case"dragenter":return Cr=Zi(Cr,t,e,n,r,s),!0;case"mouseover":return Er=Zi(Er,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ro.set(i,Zi(Ro.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bo.set(i,Zi(bo.get(i)||null,t,e,n,r,s)),!0}return!1}function Bv(t){var e=Jr(t.target);if(e!==null){var n=As(e);if(n!==null){if(e=n.tag,e===13){if(e=xv(n),e!==null){t.blockedOn=e,Uv(t.priority,function(){Vv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xh=r,n.target.dispatchEvent(r),Xh=null}else return e=Ia(n),e!==null&&xf(e),t.blockedOn=n,!1;e.shift()}return!0}function zm(t,e,n){Al(t)&&n.delete(e)}function RS(){td=!1,Sr!==null&&Al(Sr)&&(Sr=null),Cr!==null&&Al(Cr)&&(Cr=null),Er!==null&&Al(Er)&&(Er=null),Ro.forEach(zm),bo.forEach(zm)}function Ji(t,e){t.blockedOn===e&&(t.blockedOn=null,td||(td=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,RS)))}function Po(t){function e(s){return Ji(s,t)}if(0<il.length){Ji(il[0],t);for(var n=1;n<il.length;n++){var r=il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sr!==null&&Ji(Sr,t),Cr!==null&&Ji(Cr,t),Er!==null&&Ji(Er,t),Ro.forEach(e),bo.forEach(e),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)Bv(n),n.blockedOn===null&&vr.shift()}var si=ar.ReactCurrentBatchConfig,Kl=!0;function bS(t,e,n,r){var s=fe,i=si.transition;si.transition=null;try{fe=1,Df(t,e,n,r)}finally{fe=s,si.transition=i}}function PS(t,e,n,r){var s=fe,i=si.transition;si.transition=null;try{fe=4,Df(t,e,n,r)}finally{fe=s,si.transition=i}}function Df(t,e,n,r){if(Kl){var s=nd(t,e,n,r);if(s===null)hh(t,e,r,Xl,n),jm(t,r);else if(MS(s,t,e,n,r))r.stopPropagation();else if(jm(t,r),e&4&&-1<OS.indexOf(t)){for(;s!==null;){var i=Ia(s);if(i!==null&&Fv(i),i=nd(t,e,n,r),i===null&&hh(t,e,r,Xl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hh(t,e,r,null,n)}}var Xl=null;function nd(t,e,n,r){if(Xl=null,t=If(r),t=Jr(t),t!==null)if(e=As(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xl=t,null}function jv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SS()){case Nf:return 1;case Rv:return 4;case Gl:case CS:return 16;case bv:return 536870912;default:return 16}default:return 16}}var wr=null,Of=null,xl=null;function zv(){if(xl)return xl;var t,e=Of,n=e.length,r,s="value"in wr?wr.value:wr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return xl=s.slice(t,1<r?1-r:void 0)}function Dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function qm(){return!1}function Yt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ol:qm,this.isPropagationStopped=qm,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=Yt(bi),ka=De({},bi,{view:0,detail:0}),LS=Yt(ka),nh,rh,eo,Zu=De({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eo&&(eo&&t.type==="mousemove"?(nh=t.screenX-eo.screenX,rh=t.screenY-eo.screenY):rh=nh=0,eo=t),nh)},movementY:function(t){return"movementY"in t?t.movementY:rh}}),Wm=Yt(Zu),FS=De({},Zu,{dataTransfer:0}),VS=Yt(FS),$S=De({},ka,{relatedTarget:0}),sh=Yt($S),US=De({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),BS=Yt(US),jS=De({},bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zS=Yt(jS),qS=De({},bi,{data:0}),Hm=Yt(qS),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GS[t])?!!e[t]:!1}function Rf(){return QS}var KS=De({},ka,{key:function(t){if(t.key){var e=WS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(t){return t.type==="keypress"?Dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XS=Yt(KS),YS=De({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gm=Yt(YS),ZS=De({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),JS=Yt(ZS),eC=De({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tC=Yt(eC),nC=De({},Zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rC=Yt(nC),sC=[9,13,27,32],bf=Zn&&"CompositionEvent"in window,go=null;Zn&&"documentMode"in document&&(go=document.documentMode);var iC=Zn&&"TextEvent"in window&&!go,qv=Zn&&(!bf||go&&8<go&&11>=go),Qm=String.fromCharCode(32),Km=!1;function Wv(t,e){switch(t){case"keyup":return sC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function oC(t,e){switch(t){case"compositionend":return Hv(e);case"keypress":return e.which!==32?null:(Km=!0,Qm);case"textInput":return t=e.data,t===Qm&&Km?null:t;default:return null}}function aC(t,e){if(js)return t==="compositionend"||!bf&&Wv(t,e)?(t=zv(),xl=Of=wr=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qv&&e.locale!=="ko"?null:e.data;default:return null}}var lC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lC[t.type]:e==="textarea"}function Gv(t,e,n,r){Ev(r),e=Yl(e,"onChange"),0<e.length&&(n=new Mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yo=null,Lo=null;function uC(t){s0(t,0)}function Ju(t){var e=Ws(t);if(yv(e))return t}function cC(t,e){if(t==="change")return e}var Qv=!1;if(Zn){var ih;if(Zn){var oh="oninput"in document;if(!oh){var Ym=document.createElement("div");Ym.setAttribute("oninput","return;"),oh=typeof Ym.oninput=="function"}ih=oh}else ih=!1;Qv=ih&&(!document.documentMode||9<document.documentMode)}function Zm(){yo&&(yo.detachEvent("onpropertychange",Kv),Lo=yo=null)}function Kv(t){if(t.propertyName==="value"&&Ju(Lo)){var e=[];Gv(e,Lo,t,If(t)),Av(uC,e)}}function hC(t,e,n){t==="focusin"?(Zm(),yo=e,Lo=n,yo.attachEvent("onpropertychange",Kv)):t==="focusout"&&Zm()}function dC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(Lo)}function fC(t,e){if(t==="click")return Ju(e)}function pC(t,e){if(t==="input"||t==="change")return Ju(e)}function mC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:mC;function Fo(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vh.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function Jm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eg(t,e){var n=Jm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jm(n)}}function Xv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yv(){for(var t=window,e=ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ql(t.document)}return e}function Pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gC(t){var e=Yv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xv(n.ownerDocument.documentElement,n)){if(r!==null&&Pf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=eg(n,i);var o=eg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yC=Zn&&"documentMode"in document&&11>=document.documentMode,zs=null,rd=null,vo=null,sd=!1;function tg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sd||zs==null||zs!==ql(r)||(r=zs,"selectionStart"in r&&Pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vo&&Fo(vo,r)||(vo=r,r=Yl(rd,"onSelect"),0<r.length&&(e=new Mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zs)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},ah={},Zv={};Zn&&(Zv=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function ec(t){if(ah[t])return ah[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zv)return ah[t]=e[n];return t}var Jv=ec("animationend"),e0=ec("animationiteration"),t0=ec("animationstart"),n0=ec("transitionend"),r0=new Map,ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){r0.set(t,e),Ns(e,[t])}for(var lh=0;lh<ng.length;lh++){var uh=ng[lh],vC=uh.toLowerCase(),_C=uh[0].toUpperCase()+uh.slice(1);Ur(vC,"on"+_C)}Ur(Jv,"onAnimationEnd");Ur(e0,"onAnimationIteration");Ur(t0,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(n0,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wC=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function rg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vS(r,e,void 0,t),t.currentTarget=null}function s0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;rg(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;rg(s,a,u),i=l}}}if(Hl)throw t=Jh,Hl=!1,Jh=null,t}function we(t,e){var n=e[ud];n===void 0&&(n=e[ud]=new Set);var r=t+"__bubble";n.has(r)||(i0(e,t,2,!1),n.add(r))}function ch(t,e,n){var r=0;e&&(r|=4),i0(n,t,r,e)}var ll="_reactListening"+Math.random().toString(36).slice(2);function Vo(t){if(!t[ll]){t[ll]=!0,dv.forEach(function(n){n!=="selectionchange"&&(wC.has(n)||ch(n,!1,t),ch(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ll]||(e[ll]=!0,ch("selectionchange",!1,e))}}function i0(t,e,n,r){switch(jv(e)){case 1:var s=bS;break;case 4:s=PS;break;default:s=Df}n=s.bind(null,e,n,t),s=void 0,!Zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hh(t,e,n,r,s){var i=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Jr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Av(function(){var u=i,c=If(n),h=[];e:{var d=r0.get(t);if(d!==void 0){var f=Mf,p=t;switch(t){case"keypress":if(Dl(n)===0)break e;case"keydown":case"keyup":f=XS;break;case"focusin":p="focus",f=sh;break;case"focusout":p="blur",f=sh;break;case"beforeblur":case"afterblur":f=sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Wm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=VS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=JS;break;case Jv:case e0:case t0:f=BS;break;case n0:f=tC;break;case"scroll":f=LS;break;case"wheel":f=rC;break;case"copy":case"cut":case"paste":f=zS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Gm}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?d!==null?d+"Capture":null:d;y=[];for(var m=u,v;m!==null;){v=m;var T=v.stateNode;if(v.tag===5&&T!==null&&(v=T,g!==null&&(T=Mo(m,g),T!=null&&y.push($o(m,T,v)))),w)break;m=m.return}0<y.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:y}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Xh&&(p=n.relatedTarget||n.fromElement)&&(Jr(p)||p[Jn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Jr(p):null,p!==null&&(w=As(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=Wm,T="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=Gm,T="onPointerLeave",g="onPointerEnter",m="pointer"),w=f==null?d:Ws(f),v=p==null?d:Ws(p),d=new y(T,m+"leave",f,n,c),d.target=w,d.relatedTarget=v,T=null,Jr(c)===u&&(y=new y(g,m+"enter",p,n,c),y.target=v,y.relatedTarget=w,T=y),w=T,f&&p)t:{for(y=f,g=p,m=0,v=y;v;v=Fs(v))m++;for(v=0,T=g;T;T=Fs(T))v++;for(;0<m-v;)y=Fs(y),m--;for(;0<v-m;)g=Fs(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Fs(y),g=Fs(g)}y=null}else y=null;f!==null&&sg(h,d,f,y,!1),p!==null&&w!==null&&sg(h,w,p,y,!0)}}e:{if(d=u?Ws(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=cC;else if(Xm(d))if(Qv)_=pC;else{_=dC;var S=hC}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=fC);if(_&&(_=_(t,u))){Gv(h,_,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Wh(d,"number",d.value)}switch(S=u?Ws(u):window,t){case"focusin":(Xm(S)||S.contentEditable==="true")&&(zs=S,rd=u,vo=null);break;case"focusout":vo=rd=zs=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,tg(h,n,c);break;case"selectionchange":if(yC)break;case"keydown":case"keyup":tg(h,n,c)}var C;if(bf)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else js?Wv(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(qv&&n.locale!=="ko"&&(js||E!=="onCompositionStart"?E==="onCompositionEnd"&&js&&(C=zv()):(wr=c,Of="value"in wr?wr.value:wr.textContent,js=!0)),S=Yl(u,E),0<S.length&&(E=new Hm(E,t,null,n,c),h.push({event:E,listeners:S}),C?E.data=C:(C=Hv(n),C!==null&&(E.data=C)))),(C=iC?oC(t,n):aC(t,n))&&(u=Yl(u,"onBeforeInput"),0<u.length&&(c=new Hm("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=C))}s0(h,e)})}function $o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Mo(t,n),i!=null&&r.unshift($o(t,i,s)),i=Mo(t,e),i!=null&&r.push($o(t,i,s))),t=t.return}return r}function Fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Mo(n,i),l!=null&&o.unshift($o(n,l,a))):s||(l=Mo(n,i),l!=null&&o.push($o(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TC=/\r\n?/g,SC=/\u0000|\uFFFD/g;function ig(t){return(typeof t=="string"?t:""+t).replace(TC,`
`).replace(SC,"")}function ul(t,e,n){if(e=ig(e),ig(t)!==e&&n)throw Error(D(425))}function Zl(){}var id=null,od=null;function ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ld=typeof setTimeout=="function"?setTimeout:void 0,CC=typeof clearTimeout=="function"?clearTimeout:void 0,og=typeof Promise=="function"?Promise:void 0,EC=typeof queueMicrotask=="function"?queueMicrotask:typeof og<"u"?function(t){return og.resolve(null).then(t).catch(kC)}:ld;function kC(t){setTimeout(function(){throw t})}function dh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Po(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Po(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ag(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),An="__reactFiber$"+Pi,Uo="__reactProps$"+Pi,Jn="__reactContainer$"+Pi,ud="__reactEvents$"+Pi,IC="__reactListeners$"+Pi,NC="__reactHandles$"+Pi;function Jr(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ag(t);t!==null;){if(n=t[An])return n;t=ag(t)}return e}t=n,n=t.parentNode}return null}function Ia(t){return t=t[An]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function tc(t){return t[Uo]||null}var cd=[],Hs=-1;function Br(t){return{current:t}}function Te(t){0>Hs||(t.current=cd[Hs],cd[Hs]=null,Hs--)}function ye(t,e){Hs++,cd[Hs]=t.current,t.current=e}var br={},St=Br(br),$t=Br(!1),ds=br;function pi(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function Jl(){Te($t),Te(St)}function lg(t,e,n){if(St.current!==br)throw Error(D(168));ye(St,e),ye($t,n)}function o0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,hS(t)||"Unknown",s));return De({},n,r)}function eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,ds=St.current,ye(St,t),ye($t,$t.current),!0}function ug(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=o0(t,e,ds),r.__reactInternalMemoizedMergedChildContext=t,Te($t),Te(St),ye(St,t)):Te($t),ye($t,n)}var zn=null,nc=!1,fh=!1;function a0(t){zn===null?zn=[t]:zn.push(t)}function AC(t){nc=!0,a0(t)}function jr(){if(!fh&&zn!==null){fh=!0;var t=0,e=fe;try{var n=zn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,nc=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Mv(Nf,jr),s}finally{fe=e,fh=!1}}return null}var Gs=[],Qs=0,tu=null,nu=0,Jt=[],en=0,fs=null,Wn=1,Hn="";function Kr(t,e){Gs[Qs++]=nu,Gs[Qs++]=tu,tu=t,nu=e}function l0(t,e,n){Jt[en++]=Wn,Jt[en++]=Hn,Jt[en++]=fs,fs=t;var r=Wn;t=Hn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wn=1<<32-yn(e)+s|n<<s|r,Hn=i+t}else Wn=1<<i|n<<s|r,Hn=t}function Lf(t){t.return!==null&&(Kr(t,1),l0(t,1,0))}function Ff(t){for(;t===tu;)tu=Gs[--Qs],Gs[Qs]=null,nu=Gs[--Qs],Gs[Qs]=null;for(;t===fs;)fs=Jt[--en],Jt[en]=null,Hn=Jt[--en],Jt[en]=null,Wn=Jt[--en],Jt[en]=null}var Ht=null,Wt=null,ke=!1,fn=null;function u0(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,Wt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Wn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,Wt=null,!0):!1;default:return!1}}function hd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dd(t){if(ke){var e=Wt;if(e){var n=e;if(!cg(t,e)){if(hd(t))throw Error(D(418));e=kr(n.nextSibling);var r=Ht;e&&cg(t,e)?u0(r,n):(t.flags=t.flags&-4097|2,ke=!1,Ht=t)}}else{if(hd(t))throw Error(D(418));t.flags=t.flags&-4097|2,ke=!1,Ht=t}}}function hg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function cl(t){if(t!==Ht)return!1;if(!ke)return hg(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ad(t.type,t.memoizedProps)),e&&(e=Wt)){if(hd(t))throw c0(),Error(D(418));for(;e;)u0(t,e),e=kr(e.nextSibling)}if(hg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Ht?kr(t.stateNode.nextSibling):null;return!0}function c0(){for(var t=Wt;t;)t=kr(t.nextSibling)}function mi(){Wt=Ht=null,ke=!1}function Vf(t){fn===null?fn=[t]:fn.push(t)}var xC=ar.ReactCurrentBatchConfig;function hn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ru=Br(null),su=null,Ks=null,$f=null;function Uf(){$f=Ks=su=null}function Bf(t){var e=ru.current;Te(ru),t._currentValue=e}function fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ii(t,e){su=t,$f=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Ft=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if($f!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(su===null)throw Error(D(308));Ks=t,su.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var es=null;function jf(t){es===null?es=[t]:es.push(t)}function h0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,jf(e)):(n.next=s.next,s.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(le&2)!==0){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,er(t,n)}return s=r.interleaved,s===null?(e.next=e,jf(r)):(e.next=s.next,s.next=e),r.interleaved=e,er(t,n)}function Ol(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function dg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function iu(t,e,n,r){var s=t.updateQueue;gr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(d=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=De({},h,d);break e;case 2:gr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=h}}function fg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var f0=new hv.Component().refs;function pd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rc={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=Ar(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(vn(e,t,s,r),Ol(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=Ar(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(vn(e,t,s,r),Ol(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=Ar(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(vn(e,t,r,n),Ol(e,t,r))}};function pg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Fo(n,r)||!Fo(s,i):!0}function p0(t,e,n){var r=!1,s=br,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=Ut(e)?ds:St.current,r=e.contextTypes,i=(r=r!=null)?pi(t,s):br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function mg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rc.enqueueReplaceState(e,e.state,null)}function md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=f0,zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=Ut(e)?ds:St.current,s.context=pi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rc.enqueueReplaceState(s,s.state,null),iu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===f0&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function hl(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gg(t){var e=t._init;return e(t._payload)}function m0(t){function e(g,m){if(t){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=xr(g,m),g.index=0,g.sibling=null,g}function i(g,m,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,v,T){return m===null||m.tag!==6?(m=wh(v,g.mode,T),m.return=g,m):(m=s(m,v),m.return=g,m)}function l(g,m,v,T){var _=v.type;return _===Bs?c(g,m,v.props.children,T,v.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===mr&&gg(_)===m.type)?(T=s(m,v.props),T.ref=to(g,m,v),T.return=g,T):(T=Fl(v.type,v.key,v.props,null,g.mode,T),T.ref=to(g,m,v),T.return=g,T)}function u(g,m,v,T){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Th(v,g.mode,T),m.return=g,m):(m=s(m,v.children||[]),m.return=g,m)}function c(g,m,v,T,_){return m===null||m.tag!==7?(m=os(v,g.mode,T,_),m.return=g,m):(m=s(m,v),m.return=g,m)}function h(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=wh(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case el:return v=Fl(m.type,m.key,m.props,null,g.mode,v),v.ref=to(g,null,m),v.return=g,v;case Us:return m=Th(m,g.mode,v),m.return=g,m;case mr:var T=m._init;return h(g,T(m._payload),v)}if(oo(m)||Xi(m))return m=os(m,g.mode,v,null),m.return=g,m;hl(g,m)}return null}function d(g,m,v,T){var _=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(g,m,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case el:return v.key===_?l(g,m,v,T):null;case Us:return v.key===_?u(g,m,v,T):null;case mr:return _=v._init,d(g,m,_(v._payload),T)}if(oo(v)||Xi(v))return _!==null?null:c(g,m,v,T,null);hl(g,v)}return null}function f(g,m,v,T,_){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(v)||null,a(m,g,""+T,_);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case el:return g=g.get(T.key===null?v:T.key)||null,l(m,g,T,_);case Us:return g=g.get(T.key===null?v:T.key)||null,u(m,g,T,_);case mr:var S=T._init;return f(g,m,v,S(T._payload),_)}if(oo(T)||Xi(T))return g=g.get(v)||null,c(m,g,T,_,null);hl(m,T)}return null}function p(g,m,v,T){for(var _=null,S=null,C=m,E=m=0,N=null;C!==null&&E<v.length;E++){C.index>E?(N=C,C=null):N=C.sibling;var k=d(g,C,v[E],T);if(k===null){C===null&&(C=N);break}t&&C&&k.alternate===null&&e(g,C),m=i(k,m,E),S===null?_=k:S.sibling=k,S=k,C=N}if(E===v.length)return n(g,C),ke&&Kr(g,E),_;if(C===null){for(;E<v.length;E++)C=h(g,v[E],T),C!==null&&(m=i(C,m,E),S===null?_=C:S.sibling=C,S=C);return ke&&Kr(g,E),_}for(C=r(g,C);E<v.length;E++)N=f(C,g,E,v[E],T),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?E:N.key),m=i(N,m,E),S===null?_=N:S.sibling=N,S=N);return t&&C.forEach(function(A){return e(g,A)}),ke&&Kr(g,E),_}function y(g,m,v,T){var _=Xi(v);if(typeof _!="function")throw Error(D(150));if(v=_.call(v),v==null)throw Error(D(151));for(var S=_=null,C=m,E=m=0,N=null,k=v.next();C!==null&&!k.done;E++,k=v.next()){C.index>E?(N=C,C=null):N=C.sibling;var A=d(g,C,k.value,T);if(A===null){C===null&&(C=N);break}t&&C&&A.alternate===null&&e(g,C),m=i(A,m,E),S===null?_=A:S.sibling=A,S=A,C=N}if(k.done)return n(g,C),ke&&Kr(g,E),_;if(C===null){for(;!k.done;E++,k=v.next())k=h(g,k.value,T),k!==null&&(m=i(k,m,E),S===null?_=k:S.sibling=k,S=k);return ke&&Kr(g,E),_}for(C=r(g,C);!k.done;E++,k=v.next())k=f(C,g,E,k.value,T),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?E:k.key),m=i(k,m,E),S===null?_=k:S.sibling=k,S=k);return t&&C.forEach(function(I){return e(g,I)}),ke&&Kr(g,E),_}function w(g,m,v,T){if(typeof v=="object"&&v!==null&&v.type===Bs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case el:e:{for(var _=v.key,S=m;S!==null;){if(S.key===_){if(_=v.type,_===Bs){if(S.tag===7){n(g,S.sibling),m=s(S,v.props.children),m.return=g,g=m;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===mr&&gg(_)===S.type){n(g,S.sibling),m=s(S,v.props),m.ref=to(g,S,v),m.return=g,g=m;break e}n(g,S);break}else e(g,S);S=S.sibling}v.type===Bs?(m=os(v.props.children,g.mode,T,v.key),m.return=g,g=m):(T=Fl(v.type,v.key,v.props,null,g.mode,T),T.ref=to(g,m,v),T.return=g,g=T)}return o(g);case Us:e:{for(S=v.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=s(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Th(v,g.mode,T),m.return=g,g=m}return o(g);case mr:return S=v._init,w(g,m,S(v._payload),T)}if(oo(v))return p(g,m,v,T);if(Xi(v))return y(g,m,v,T);hl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,v),m.return=g,g=m):(n(g,m),m=wh(v,g.mode,T),m.return=g,g=m),o(g)):n(g,m)}return w}var gi=m0(!0),g0=m0(!1),Na={},Mn=Br(Na),Bo=Br(Na),jo=Br(Na);function ts(t){if(t===Na)throw Error(D(174));return t}function qf(t,e){switch(ye(jo,e),ye(Bo,t),ye(Mn,Na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gh(e,t)}Te(Mn),ye(Mn,e)}function yi(){Te(Mn),Te(Bo),Te(jo)}function y0(t){ts(jo.current);var e=ts(Mn.current),n=Gh(e,t.type);e!==n&&(ye(Bo,t),ye(Mn,n))}function Wf(t){Bo.current===t&&(Te(Mn),Te(Bo))}var Ae=Br(0);function ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ph=[];function Hf(){for(var t=0;t<ph.length;t++)ph[t]._workInProgressVersionPrimary=null;ph.length=0}var Ml=ar.ReactCurrentDispatcher,mh=ar.ReactCurrentBatchConfig,ps=0,xe=null,Qe=null,rt=null,au=!1,_o=!1,zo=0,DC=0;function mt(){throw Error(D(321))}function Gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Qf(t,e,n,r,s,i){if(ps=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?bC:PC,t=n(r,s),_o){i=0;do{if(_o=!1,zo=0,25<=i)throw Error(D(301));i+=1,rt=Qe=null,e.updateQueue=null,Ml.current=LC,t=n(r,s)}while(_o)}if(Ml.current=lu,e=Qe!==null&&Qe.next!==null,ps=0,rt=Qe=xe=null,au=!1,e)throw Error(D(300));return t}function Kf(){var t=zo!==0;return zo=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?xe.memoizedState=rt=t:rt=rt.next=t,rt}function un(){if(Qe===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?xe.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(D(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?xe.memoizedState=rt=t:rt=rt.next=t}return rt}function qo(t,e){return typeof e=="function"?e(t):e}function gh(t){var e=un(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((ps&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,xe.lanes|=c,ms|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,wn(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xe.lanes|=i,ms|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yh(t){var e=un(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function v0(){}function _0(t,e){var n=xe,r=un(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ft=!0),r=r.queue,Xf(S0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Wo(9,T0.bind(null,n,r,s,e),void 0,null),st===null)throw Error(D(349));(ps&30)!==0||w0(n,e,s)}return s}function w0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function T0(t,e,n,r){e.value=n,e.getSnapshot=r,C0(e)&&E0(t)}function S0(t,e,n){return n(function(){C0(e)&&E0(t)})}function C0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function E0(t){var e=er(t,1);e!==null&&vn(e,t,1,-1)}function yg(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},e.queue=t,t=t.dispatch=RC.bind(null,xe,t),[e.memoizedState,t]}function Wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function k0(){return un().memoizedState}function Rl(t,e,n,r){var s=Nn();xe.flags|=t,s.memoizedState=Wo(1|e,n,void 0,r===void 0?null:r)}function sc(t,e,n,r){var s=un();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Gf(r,o.deps)){s.memoizedState=Wo(e,n,i,r);return}}xe.flags|=t,s.memoizedState=Wo(1|e,n,i,r)}function vg(t,e){return Rl(8390656,8,t,e)}function Xf(t,e){return sc(2048,8,t,e)}function I0(t,e){return sc(4,2,t,e)}function N0(t,e){return sc(4,4,t,e)}function A0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x0(t,e,n){return n=n!=null?n.concat([t]):null,sc(4,4,A0.bind(null,e,t),n)}function Yf(){}function D0(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function O0(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function M0(t,e,n){return(ps&21)===0?(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n):(wn(n,e)||(n=Pv(),xe.lanes|=n,ms|=n,t.baseState=!0),e)}function OC(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=mh.transition;mh.transition={};try{t(!1),e()}finally{fe=n,mh.transition=r}}function R0(){return un().memoizedState}function MC(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b0(t))P0(e,n);else if(n=h0(t,e,n,r),n!==null){var s=Dt();vn(n,t,r,s),L0(n,e,r)}}function RC(t,e,n){var r=Ar(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b0(t))P0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wn(a,o)){var l=e.interleaved;l===null?(s.next=s,jf(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=h0(t,e,s,r),n!==null&&(s=Dt(),vn(n,t,r,s),L0(n,e,r))}}function b0(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function P0(t,e){_o=au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L0(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var lu={readContext:ln,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},bC={readContext:ln,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rl(4194308,4,A0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MC.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:yg,useDebugValue:Yf,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=yg(!1),e=t[0];return t=OC.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,s=Nn();if(ke){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),st===null)throw Error(D(349));(ps&30)!==0||w0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vg(S0.bind(null,r,i,t),[t]),r.flags|=2048,Wo(9,T0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=st.identifierPrefix;if(ke){var n=Hn,r=Wn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PC={readContext:ln,useCallback:D0,useContext:ln,useEffect:Xf,useImperativeHandle:x0,useInsertionEffect:I0,useLayoutEffect:N0,useMemo:O0,useReducer:gh,useRef:k0,useState:function(){return gh(qo)},useDebugValue:Yf,useDeferredValue:function(t){var e=un();return M0(e,Qe.memoizedState,t)},useTransition:function(){var t=gh(qo)[0],e=un().memoizedState;return[t,e]},useMutableSource:v0,useSyncExternalStore:_0,useId:R0,unstable_isNewReconciler:!1},LC={readContext:ln,useCallback:D0,useContext:ln,useEffect:Xf,useImperativeHandle:x0,useInsertionEffect:I0,useLayoutEffect:N0,useMemo:O0,useReducer:yh,useRef:k0,useState:function(){return yh(qo)},useDebugValue:Yf,useDeferredValue:function(t){var e=un();return Qe===null?e.memoizedState=t:M0(e,Qe.memoizedState,t)},useTransition:function(){var t=yh(qo)[0],e=un().memoizedState;return[t,e]},useMutableSource:v0,useSyncExternalStore:_0,useId:R0,unstable_isNewReconciler:!1};function vi(t,e){try{var n="",r=e;do n+=cS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vh(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FC=typeof WeakMap=="function"?WeakMap:Map;function F0(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cu||(cu=!0,Id=r),gd(t,e)},n}function V0(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gd(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _g(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=YC.bind(null,t,e,n),e.then(t,t))}function wg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tg(t,e,n,r,s){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var VC=ar.ReactCurrentOwner,Ft=!1;function kt(t,e,n,r){e.child=t===null?g0(e,null,n,r):gi(e,t.child,n,r)}function Sg(t,e,n,r,s){n=n.render;var i=e.ref;return ii(e,s),r=Qf(t,e,n,r,i,s),n=Kf(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(ke&&n&&Lf(e),e.flags|=1,kt(t,e,r,s),e.child)}function Cg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ip(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$0(t,e,i,r,s)):(t=Fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,(t.lanes&s)===0){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fo,n(o,r)&&t.ref===e.ref)return tr(t,e,s)}return e.flags|=1,t=xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function $0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Fo(i,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=i,(t.lanes&s)!==0)(t.flags&131072)!==0&&(Ft=!0);else return e.lanes=t.lanes,tr(t,e,s)}return yd(t,e,n,r,s)}function U0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Ys,qt),qt|=n;else{if((n&1073741824)===0)return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Ys,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Ys,qt),qt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Ys,qt),qt|=r;return kt(t,e,s,n),e.child}function B0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yd(t,e,n,r,s){var i=Ut(n)?ds:St.current;return i=pi(e,i),ii(e,s),n=Qf(t,e,n,r,i,s),r=Kf(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(ke&&r&&Lf(e),e.flags|=1,kt(t,e,n,s),e.child)}function Eg(t,e,n,r,s){if(Ut(n)){var i=!0;eu(e)}else i=!1;if(ii(e,s),e.stateNode===null)bl(t,e),p0(e,n,r),md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ln(u):(u=Ut(n)?ds:St.current,u=pi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&mg(e,o,r,u),gr=!1;var d=e.memoizedState;o.state=d,iu(e,r,o,s),l=e.memoizedState,a!==r||d!==l||$t.current||gr?(typeof c=="function"&&(pd(e,n,c,r),l=e.memoizedState),(a=gr||pg(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,d0(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:hn(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=Ut(n)?ds:St.current,l=pi(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&mg(e,o,r,l),gr=!1,d=e.memoizedState,o.state=d,iu(e,r,o,s);var p=e.memoizedState;a!==h||d!==p||$t.current||gr?(typeof f=="function"&&(pd(e,n,f,r),p=e.memoizedState),(u=gr||pg(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return vd(t,e,n,r,i,s)}function vd(t,e,n,r,s,i){B0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ug(e,n,!1),tr(t,e,i);r=e.stateNode,VC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gi(e,t.child,null,i),e.child=gi(e,null,a,i)):kt(t,e,a,i),e.memoizedState=r.state,s&&ug(e,n,!0),e.child}function j0(t){var e=t.stateNode;e.pendingContext?lg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lg(t,e.context,!1),qf(t,e.containerInfo)}function kg(t,e,n,r,s){return mi(),Vf(s),e.flags|=256,kt(t,e,n,r),e.child}var _d={dehydrated:null,treeContext:null,retryLane:0};function wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function z0(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ae,s&1),t===null)return dd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ac(o,r,0,null),t=os(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wd(n),e.memoizedState=_d,t):Zf(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $C(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xr(a,i):(i=os(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_d,r}return i=t.child,t=i.sibling,r=xr(i,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zf(t,e){return e=ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dl(t,e,n,r){return r!==null&&Vf(r),gi(e,t.child,null,n),t=Zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $C(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vh(Error(D(422))),dl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ac({mode:"visible",children:r.children},s,0,null),i=os(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,(e.mode&1)!==0&&gi(e,t.child,null,o),e.child.memoizedState=wd(o),e.memoizedState=_d,i);if((e.mode&1)===0)return dl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=vh(i,r,void 0),dl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ft||a){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|o))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,er(t,s),vn(r,t,s,-1))}return sp(),r=vh(Error(D(421))),dl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ZC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=kr(s.nextSibling),Ht=e,ke=!0,fn=null,t!==null&&(Jt[en++]=Wn,Jt[en++]=Hn,Jt[en++]=fs,Wn=t.id,Hn=t.overflow,fs=e),e=Zf(e,r.children),e.flags|=4096,e)}function Ig(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fd(t.return,e,n)}function _h(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function q0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(kt(t,e,r.children,n),r=Ae.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ig(t,n,e);else if(t.tag===19)Ig(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ae,r),(e.mode&1)===0)e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ou(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_h(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ou(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_h(e,!0,n,null,i);break;case"together":_h(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bl(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UC(t,e,n){switch(e.tag){case 3:j0(e),mi();break;case 5:y0(e);break;case 1:Ut(e.type)&&eu(e);break;case 4:qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(ru,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ae,Ae.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?z0(t,e,n):(ye(Ae,Ae.current&1),t=tr(t,e,n),t!==null?t.sibling:null);ye(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return q0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,U0(t,e,n)}return tr(t,e,n)}var W0,Td,H0,G0;W0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Td=function(){};H0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ts(Mn.current);var i=null;switch(n){case"input":s=zh(t,s),r=zh(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Hh(t,s),r=Hh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zl)}Qh(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Do.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Do.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&we("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};G0=function(t,e,n,r){n!==r&&(e.flags|=4)};function no(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BC(t,e,n){var r=e.pendingProps;switch(Ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ut(e.type)&&Jl(),gt(e),null;case 3:return r=e.stateNode,yi(),Te($t),Te(St),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,fn!==null&&(xd(fn),fn=null))),Td(t,e),gt(e),null;case 5:Wf(e);var s=ts(jo.current);if(n=e.type,t!==null&&e.stateNode!=null)H0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return gt(e),null}if(t=ts(Mn.current),cl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[Uo]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<lo.length;s++)we(lo[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Pm(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":Fm(r,i),we("invalid",r)}Qh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ul(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ul(r.textContent,a,t),s=["children",""+a]):Do.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":tl(r),Lm(r,i,!0);break;case"textarea":tl(r),Vm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Zl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[Uo]=r,W0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kh(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<lo.length;s++)we(lo[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Pm(t,r),s=zh(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),we("invalid",t);break;case"textarea":Fm(t,r),s=Hh(t,r),we("invalid",t);break;default:s=r}Qh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Cv(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tv(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Oo(t,l):typeof l=="number"&&Oo(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Do.hasOwnProperty(i)?l!=null&&i==="onScroll"&&we("scroll",t):l!=null&&Sf(t,i,l,o))}switch(n){case"input":tl(t),Lm(t,r,!1);break;case"textarea":tl(t),Vm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ti(t,!!r.multiple,i,!1):r.defaultValue!=null&&ti(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)G0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=ts(jo.current),ts(Mn.current),cl(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return gt(e),null;case 13:if(Te(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Wt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)c0(),mi(),e.flags|=98560,i=!1;else if(i=cl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[An]=e}else mi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;gt(e),i=!1}else fn!==null&&(xd(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Ae.current&1)!==0?Ke===0&&(Ke=3):sp())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return yi(),Td(t,e),t===null&&Vo(e.stateNode.containerInfo),gt(e),null;case 10:return Bf(e.type._context),gt(e),null;case 17:return Ut(e.type)&&Jl(),gt(e),null;case 19:if(Te(Ae),i=e.memoizedState,i===null)return gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)no(i,!1);else{if(Ke!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=ou(t),o!==null){for(e.flags|=128,no(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>_i&&(e.flags|=128,r=!0,no(i,!1),e.lanes=4194304)}else{if(!r)if(t=ou(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),no(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return gt(e),null}else 2*Ue()-i.renderingStartTime>_i&&n!==1073741824&&(e.flags|=128,r=!0,no(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Ae.current,ye(Ae,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return rp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(qt&1073741824)!==0&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function jC(t,e){switch(Ff(e),e.tag){case 1:return Ut(e.type)&&Jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),Te($t),Te(St),Hf(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Wf(e),null;case 13:if(Te(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ae),null;case 4:return yi(),null;case 10:return Bf(e.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var fl=!1,vt=!1,zC=typeof WeakSet=="function"?WeakSet:Set,B=null;function Xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Sd(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Ng=!1;function qC(t,e){if(id=Kl,t=Yv(),Pf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(od={focusedElem:t,selectionRange:n},Kl=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:hn(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(T){Me(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return p=Ng,Ng=!1,p}function wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sd(e,n,i)}s=s.next}while(s!==r)}}function ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q0(t){var e=t.alternate;e!==null&&(t.alternate=null,Q0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[Uo],delete e[ud],delete e[IC],delete e[NC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function K0(t){return t.tag===5||t.tag===3||t.tag===4}function Ag(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||K0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ed(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(r!==4&&(t=t.child,t!==null))for(Ed(t,e,n),t=t.sibling;t!==null;)Ed(t,e,n),t=t.sibling}function kd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kd(t,e,n),t=t.sibling;t!==null;)kd(t,e,n),t=t.sibling}var at=null,dn=!1;function dr(t,e,n){for(n=n.child;n!==null;)X0(t,e,n),n=n.sibling}function X0(t,e,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Yu,n)}catch{}switch(n.tag){case 5:vt||Xs(n,e);case 6:var r=at,s=dn;at=null,dr(t,e,n),at=r,dn=s,at!==null&&(dn?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(dn?(t=at,n=n.stateNode,t.nodeType===8?dh(t.parentNode,n):t.nodeType===1&&dh(t,n),Po(t)):dh(at,n.stateNode));break;case 4:r=at,s=dn,at=n.stateNode.containerInfo,dn=!0,dr(t,e,n),at=r,dn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&Sd(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!vt&&(Xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,dr(t,e,n),vt=r):dr(t,e,n);break;default:dr(t,e,n)}}function xg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zC),e.forEach(function(r){var s=JC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:at=a.stateNode,dn=!1;break e;case 3:at=a.stateNode.containerInfo,dn=!0;break e;case 4:at=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(at===null)throw Error(D(160));X0(i,o,s),at=null,dn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Me(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Y0(e,t),e=e.sibling}function Y0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),kn(t),r&4){try{wo(3,t,t.return),ic(3,t)}catch(y){Me(t,t.return,y)}try{wo(5,t,t.return)}catch(y){Me(t,t.return,y)}}break;case 1:cn(e,t),kn(t),r&512&&n!==null&&Xs(n,n.return);break;case 5:if(cn(e,t),kn(t),r&512&&n!==null&&Xs(n,n.return),t.flags&32){var s=t.stateNode;try{Oo(s,"")}catch(y){Me(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&vv(s,i),Kh(a,o);var u=Kh(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Cv(s,h):c==="dangerouslySetInnerHTML"?Tv(s,h):c==="children"?Oo(s,h):Sf(s,c,h,u)}switch(a){case"input":qh(s,i);break;case"textarea":_v(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ti(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?ti(s,!!i.multiple,i.defaultValue,!0):ti(s,!!i.multiple,i.multiple?[]:"",!1))}s[Uo]=i}catch(y){Me(t,t.return,y)}}break;case 6:if(cn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Me(t,t.return,y)}}break;case 3:if(cn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Po(e.containerInfo)}catch(y){Me(t,t.return,y)}break;case 4:cn(e,t),kn(t);break;case 13:cn(e,t),kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tp=Ue())),r&4&&xg(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(u=vt)||c,cn(e,t),vt=u):cn(e,t),kn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&(t.mode&1)!==0)for(B=t,c=t.child;c!==null;){for(h=B=c;B!==null;){switch(d=B,f=d.child,d.tag){case 0:case 11:case 14:case 15:wo(4,d,d.return);break;case 1:Xs(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Me(r,n,y)}}break;case 5:Xs(d,d.return);break;case 22:if(d.memoizedState!==null){Og(h);continue}}f!==null?(f.return=d,B=f):Og(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Sv("display",o))}catch(y){Me(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Me(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:cn(e,t),kn(t),r&4&&xg(t);break;case 21:break;default:cn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(K0(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Oo(s,""),r.flags&=-33);var i=Ag(t);kd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ag(t);Ed(t,a,o);break;default:throw Error(D(161))}}catch(l){Me(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WC(t,e,n){B=t,Z0(t)}function Z0(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||vt;a=fl;var u=vt;if(fl=o,(vt=l)&&!u)for(B=s;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?Mg(s):l!==null?(l.return=o,B=l):Mg(s);for(;i!==null;)B=i,Z0(i),i=i.sibling;B=s,fl=a,vt=u}Dg(t)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,B=i):Dg(t)}}function Dg(t){for(;B!==null;){var e=B;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:vt||ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Po(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}vt||e.flags&512&&Cd(e)}catch(d){Me(e,e.return,d)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function Og(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function Mg(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ic(4,e)}catch(l){Me(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Me(e,s,l)}}var i=e.return;try{Cd(e)}catch(l){Me(e,i,l)}break;case 5:var o=e.return;try{Cd(e)}catch(l){Me(e,o,l)}}}catch(l){Me(e,e.return,l)}if(e===t){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var HC=Math.ceil,uu=ar.ReactCurrentDispatcher,Jf=ar.ReactCurrentOwner,sn=ar.ReactCurrentBatchConfig,le=0,st=null,We=null,ct=0,qt=0,Ys=Br(0),Ke=0,Ho=null,ms=0,oc=0,ep=0,To=null,Pt=null,tp=0,_i=1/0,Bn=null,cu=!1,Id=null,Nr=null,pl=!1,Tr=null,hu=0,So=0,Nd=null,Pl=-1,Ll=0;function Dt(){return(le&6)!==0?Ue():Pl!==-1?Pl:Pl=Ue()}function Ar(t){return(t.mode&1)===0?1:(le&2)!==0&&ct!==0?ct&-ct:xC.transition!==null?(Ll===0&&(Ll=Pv()),Ll):(t=fe,t!==0||(t=window.event,t=t===void 0?16:jv(t.type)),t)}function vn(t,e,n,r){if(50<So)throw So=0,Nd=null,Error(D(185));Ea(t,n,r),((le&2)===0||t!==st)&&(t===st&&((le&2)===0&&(oc|=n),Ke===4&&_r(t,ct)),Bt(t,r),n===1&&le===0&&(e.mode&1)===0&&(_i=Ue()+500,nc&&jr()))}function Bt(t,e){var n=t.callbackNode;xS(t,e);var r=Ql(t,t===st?ct:0);if(r===0)n!==null&&Bm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bm(n),e===1)t.tag===0?AC(Rg.bind(null,t)):a0(Rg.bind(null,t)),EC(function(){(le&6)===0&&jr()}),n=null;else{switch(Lv(r)){case 1:n=Nf;break;case 4:n=Rv;break;case 16:n=Gl;break;case 536870912:n=bv;break;default:n=Gl}n=o_(n,J0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function J0(t,e){if(Pl=-1,Ll=0,(le&6)!==0)throw Error(D(327));var n=t.callbackNode;if(oi()&&t.callbackNode!==n)return null;var r=Ql(t,t===st?ct:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=du(t,r);else{e=r;var s=le;le|=2;var i=t_();(st!==t||ct!==e)&&(Bn=null,_i=Ue()+500,is(t,e));do try{KC();break}catch(a){e_(t,a)}while(1);Uf(),uu.current=i,le=s,We!==null?e=0:(st=null,ct=0,e=Ke)}if(e!==0){if(e===2&&(s=ed(t),s!==0&&(r=s,e=Ad(t,s))),e===1)throw n=Ho,is(t,0),_r(t,r),Bt(t,Ue()),n;if(e===6)_r(t,r);else{if(s=t.current.alternate,(r&30)===0&&!GC(s)&&(e=du(t,r),e===2&&(i=ed(t),i!==0&&(r=i,e=Ad(t,i))),e===1))throw n=Ho,is(t,0),_r(t,r),Bt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Xr(t,Pt,Bn);break;case 3:if(_r(t,r),(r&130023424)===r&&(e=tp+500-Ue(),10<e)){if(Ql(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ld(Xr.bind(null,t,Pt,Bn),e);break}Xr(t,Pt,Bn);break;case 4:if(_r(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HC(r/1960))-r,10<r){t.timeoutHandle=ld(Xr.bind(null,t,Pt,Bn),r);break}Xr(t,Pt,Bn);break;case 5:Xr(t,Pt,Bn);break;default:throw Error(D(329))}}}return Bt(t,Ue()),t.callbackNode===n?J0.bind(null,t):null}function Ad(t,e){var n=To;return t.current.memoizedState.isDehydrated&&(is(t,e).flags|=256),t=du(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&xd(e)),t}function xd(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function GC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~ep,e&=~oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Rg(t){if((le&6)!==0)throw Error(D(327));oi();var e=Ql(t,0);if((e&1)===0)return Bt(t,Ue()),null;var n=du(t,e);if(t.tag!==0&&n===2){var r=ed(t);r!==0&&(e=r,n=Ad(t,r))}if(n===1)throw n=Ho,is(t,0),_r(t,e),Bt(t,Ue()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,Pt,Bn),Bt(t,Ue()),null}function np(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(_i=Ue()+500,nc&&jr())}}function gs(t){Tr!==null&&Tr.tag===0&&(le&6)===0&&oi();var e=le;le|=1;var n=sn.transition,r=fe;try{if(sn.transition=null,fe=1,t)return t()}finally{fe=r,sn.transition=n,le=e,(le&6)===0&&jr()}}function rp(){qt=Ys.current,Te(Ys)}function is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CC(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jl();break;case 3:yi(),Te($t),Te(St),Hf();break;case 5:Wf(r);break;case 4:yi();break;case 13:Te(Ae);break;case 19:Te(Ae);break;case 10:Bf(r.type._context);break;case 22:case 23:rp()}n=n.return}if(st=t,We=t=xr(t.current,null),ct=qt=e,Ke=0,Ho=null,ep=oc=ms=0,Pt=To=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}es=null}return t}function e_(t,e){do{var n=We;try{if(Uf(),Ml.current=lu,au){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}au=!1}if(ps=0,rt=Qe=xe=null,_o=!1,zo=0,Jf.current=null,n===null||n.return===null){Ke=1,Ho=e,We=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=wg(o);if(f!==null){f.flags&=-257,Tg(f,o,a,i,e),f.mode&1&&_g(i,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if((e&1)===0){_g(i,u,e),sp();break e}l=Error(D(426))}}else if(ke&&a.mode&1){var w=wg(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),Tg(w,o,a,i,e),Vf(vi(l,a));break e}}i=l=vi(l,a),Ke!==4&&(Ke=2),To===null?To=[i]:To.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=F0(i,l,e);dg(i,g);break e;case 1:a=l;var m=i.type,v=i.stateNode;if((i.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Nr===null||!Nr.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=V0(i,a,e);dg(i,T);break e}}i=i.return}while(i!==null)}r_(n)}catch(_){e=_,We===n&&n!==null&&(We=n=n.return);continue}break}while(1)}function t_(){var t=uu.current;return uu.current=lu,t===null?lu:t}function sp(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),st===null||(ms&268435455)===0&&(oc&268435455)===0||_r(st,ct)}function du(t,e){var n=le;le|=2;var r=t_();(st!==t||ct!==e)&&(Bn=null,is(t,e));do try{QC();break}catch(s){e_(t,s)}while(1);if(Uf(),le=n,uu.current=r,We!==null)throw Error(D(261));return st=null,ct=0,Ke}function QC(){for(;We!==null;)n_(We)}function KC(){for(;We!==null&&!wS();)n_(We)}function n_(t){var e=i_(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?r_(t):We=e,Jf.current=null}function r_(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=BC(n,e,qt),n!==null){We=n;return}}else{if(n=jC(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,We=null;return}}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ke===0&&(Ke=5)}function Xr(t,e,n){var r=fe,s=sn.transition;try{sn.transition=null,fe=1,XC(t,e,n,r)}finally{sn.transition=s,fe=r}return null}function XC(t,e,n,r){do oi();while(Tr!==null);if((le&6)!==0)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(DS(t,i),t===st&&(We=st=null,ct=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||pl||(pl=!0,o_(Gl,function(){return oi(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=sn.transition,sn.transition=null;var o=fe;fe=1;var a=le;le|=4,Jf.current=null,qC(t,n),Y0(n,t),gC(od),Kl=!!id,od=id=null,t.current=n,WC(n),TS(),le=a,fe=o,sn.transition=i}else t.current=n;if(pl&&(pl=!1,Tr=t,hu=s),i=t.pendingLanes,i===0&&(Nr=null),ES(n.stateNode),Bt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cu)throw cu=!1,t=Id,Id=null,t;return(hu&1)!==0&&t.tag!==0&&oi(),i=t.pendingLanes,(i&1)!==0?t===Nd?So++:(So=0,Nd=t):So=0,jr(),null}function oi(){if(Tr!==null){var t=Lv(hu),e=sn.transition,n=fe;try{if(sn.transition=null,fe=16>t?16:t,Tr===null)var r=!1;else{if(t=Tr,Tr=null,hu=0,(le&6)!==0)throw Error(D(331));var s=le;for(le|=4,B=t.current;B!==null;){var i=B,o=i.child;if((B.flags&16)!==0){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:wo(8,c,i)}var h=c.child;if(h!==null)h.return=c,B=h;else for(;B!==null;){c=B;var d=c.sibling,f=c.return;if(Q0(c),c===u){B=null;break}if(d!==null){d.return=f,B=d;break}B=f}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}B=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:wo(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,B=g;break e}B=i.return}}var m=t.current;for(B=m;B!==null;){o=B;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,B=v;else e:for(o=m;B!==null;){if(a=B,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:ic(9,a)}}catch(_){Me(a,a.return,_)}if(a===o){B=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,B=T;break e}B=a.return}}if(le=s,jr(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Yu,t)}catch{}r=!0}return r}finally{fe=n,sn.transition=e}}return!1}function bg(t,e,n){e=vi(n,e),e=F0(t,e,1),t=Ir(t,e,1),e=Dt(),t!==null&&(Ea(t,1,e),Bt(t,e))}function Me(t,e,n){if(t.tag===3)bg(t,t,n);else for(;e!==null;){if(e.tag===3){bg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=vi(n,t),t=V0(e,t,1),e=Ir(e,t,1),t=Dt(),e!==null&&(Ea(e,1,t),Bt(e,t));break}}e=e.return}}function YC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ct&n)===n&&(Ke===4||Ke===3&&(ct&130023424)===ct&&500>Ue()-tp?is(t,0):ep|=n),Bt(t,e)}function s_(t,e){e===0&&((t.mode&1)===0?e=1:(e=sl,sl<<=1,(sl&130023424)===0&&(sl=4194304)));var n=Dt();t=er(t,e),t!==null&&(Ea(t,e,n),Bt(t,n))}function ZC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s_(t,n)}function JC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),s_(t,n)}var i_;i_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Ft=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Ft=!1,UC(t,e,n);Ft=(t.flags&131072)!==0}else Ft=!1,ke&&(e.flags&1048576)!==0&&l0(e,nu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bl(t,e),t=e.pendingProps;var s=pi(e,St.current);ii(e,n),s=Qf(null,e,r,t,s,n);var i=Kf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,eu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zf(e),s.updater=rc,e.stateNode=s,s._reactInternals=e,md(e,r,t,n),e=vd(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Lf(e),kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=tE(r),t=hn(r,t),s){case 0:e=yd(null,e,r,t,n);break e;case 1:e=Eg(null,e,r,t,n);break e;case 11:e=Sg(null,e,r,t,n);break e;case 14:e=Cg(null,e,r,hn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),yd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Eg(t,e,r,s,n);case 3:e:{if(j0(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,d0(t,e),iu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vi(Error(D(423)),e),e=kg(t,e,r,n,s);break e}else if(r!==s){s=vi(Error(D(424)),e),e=kg(t,e,r,n,s);break e}else for(Wt=kr(e.stateNode.containerInfo.firstChild),Ht=e,ke=!0,fn=null,n=g0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===s){e=tr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return y0(e),t===null&&dd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ad(r,s)?o=null:i!==null&&ad(r,i)&&(e.flags|=32),B0(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&dd(e),null;case 13:return z0(t,e,n);case 4:return qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Sg(t,e,r,s,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(ru,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!$t.current){e=tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Qn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),fd(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ii(e,n),s=ln(s),r=r(s),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),Cg(t,e,r,s,n);case 15:return $0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),bl(t,e),e.tag=1,Ut(r)?(t=!0,eu(e)):t=!1,ii(e,n),p0(e,r,s),md(e,r,s,n),vd(null,e,r,!0,t,n);case 19:return q0(t,e,n);case 22:return U0(t,e,n)}throw Error(D(156,e.tag))};function o_(t,e){return Mv(t,e)}function eE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new eE(t,e,n,r)}function ip(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tE(t){if(typeof t=="function")return ip(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ef)return 11;if(t===kf)return 14}return 2}function xr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ip(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bs:return os(n.children,s,i,e);case Cf:o=8,s|=8;break;case $h:return t=nn(12,n,e,s|2),t.elementType=$h,t.lanes=i,t;case Uh:return t=nn(13,n,e,s),t.elementType=Uh,t.lanes=i,t;case Bh:return t=nn(19,n,e,s),t.elementType=Bh,t.lanes=i,t;case mv:return ac(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fv:o=10;break e;case pv:o=9;break e;case Ef:o=11;break e;case kf:o=14;break e;case mr:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function os(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function ac(t,e,n,r){return t=nn(22,t,r,e),t.elementType=mv,t.lanes=n,t.stateNode={isHidden:!1},t}function wh(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function Th(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=th(0),this.expirationTimes=th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=th(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function op(t,e,n,r,s,i,o,a,l){return t=new nE(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(i),t}function rE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function a_(t){if(!t)return br;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Ut(n))return o0(t,n,e)}return e}function l_(t,e,n,r,s,i,o,a,l){return t=op(n,r,!0,t,s,i,o,a,l),t.context=a_(null),n=t.current,r=Dt(),s=Ar(n),i=Qn(r,s),i.callback=e!=null?e:null,Ir(n,i,s),t.current.lanes=s,Ea(t,s,r),Bt(t,r),t}function lc(t,e,n,r){var s=e.current,i=Dt(),o=Ar(s);return n=a_(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(vn(t,s,o,i),Ol(t,s,o)),o}function fu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ap(t,e){Pg(t,e),(t=t.alternate)&&Pg(t,e)}function sE(){return null}var u_=typeof reportError=="function"?reportError:function(t){console.error(t)};function lp(t){this._internalRoot=t}uc.prototype.render=lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));lc(t,e,null,null)};uc.prototype.unmount=lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){lc(null,t,null,null)}),e[Jn]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var e=$v();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vr.length&&e!==0&&e<vr[n].priority;n++);vr.splice(n,0,t),n===0&&Bv(t)}};function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function iE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=fu(o);i.call(u)}}var o=l_(e,r,t,0,null,!1,!1,"",Lg);return t._reactRootContainer=o,t[Jn]=o.current,Vo(t.nodeType===8?t.parentNode:t),gs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=fu(l);a.call(u)}}var l=op(t,0,!1,null,null,!1,!1,"",Lg);return t._reactRootContainer=l,t[Jn]=l.current,Vo(t.nodeType===8?t.parentNode:t),gs(function(){lc(e,l,n,r)}),l}function hc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fu(o);a.call(l)}}lc(e,o,t,s)}else o=iE(n,e,t,s,r);return fu(o)}Fv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ao(e.pendingLanes);n!==0&&(Af(e,n|1),Bt(e,Ue()),(le&6)===0&&(_i=Ue()+500,jr()))}break;case 13:gs(function(){var r=er(t,1);if(r!==null){var s=Dt();vn(r,t,1,s)}}),ap(t,1)}};xf=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=Dt();vn(e,t,134217728,n)}ap(t,134217728)}};Vv=function(t){if(t.tag===13){var e=Ar(t),n=er(t,e);if(n!==null){var r=Dt();vn(n,t,e,r)}ap(t,e)}};$v=function(){return fe};Uv=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Yh=function(t,e,n){switch(e){case"input":if(qh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tc(r);if(!s)throw Error(D(90));yv(r),qh(r,s)}}}break;case"textarea":_v(t,n);break;case"select":e=n.value,e!=null&&ti(t,!!n.multiple,e,!1)}};Iv=np;Nv=gs;var oE={usingClientEntryPoint:!1,Events:[Ia,Ws,tc,Ev,kv,np]},ro={findFiberByHostInstance:Jr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aE={bundleType:ro.bundleType,version:ro.version,rendererPackageName:ro.rendererPackageName,rendererConfig:ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dv(t),t===null?null:t.stateNode},findFiberByHostInstance:ro.findFiberByHostInstance||sE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{Yu=ml.inject(aE),On=ml}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oE;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(e))throw Error(D(200));return rE(t,e,null,n)};Xt.createRoot=function(t,e){if(!up(t))throw Error(D(299));var n=!1,r="",s=u_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=op(t,1,!1,null,null,n,!1,r,s),t[Jn]=e.current,Vo(t.nodeType===8?t.parentNode:t),new lp(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Dv(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return gs(t)};Xt.hydrate=function(t,e,n){if(!cc(e))throw Error(D(200));return hc(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!up(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=u_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=l_(e,null,t,1,n!=null?n:null,s,!1,i,o),t[Jn]=e.current,Vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uc(e)};Xt.render=function(t,e,n){if(!cc(e))throw Error(D(200));return hc(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!cc(t))throw Error(D(40));return t._reactRootContainer?(gs(function(){hc(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};Xt.unstable_batchedUpdates=np;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cc(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return hc(t,e,n,!1,r)};Xt.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Xt})(lv);var Fg=lv.exports;Fh.createRoot=Fg.createRoot,Fh.hydrateRoot=Fg.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw Error();const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},uE=function(t){const e=c_(t);return h_.encodeByteArray(e,!0)},pu=function(t){return uE(t).replace(/\./g,"")},cE=function(t){try{return h_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hE(){return typeof indexedDB=="object"}function dE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function fE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=()=>fE().__FIREBASE_DEFAULTS__,mE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cE(t[1]);return e&&JSON.parse(e)},d_=()=>{try{return pE()||mE()||gE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yE=t=>{var e,n;return(n=(e=d_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vE=t=>{const e=yE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_E=()=>{var t;return(t=d_())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[pu(JSON.stringify(n)),pu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="FirebaseError";class Li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SE,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f_.prototype.create)}}class f_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?CE(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Li(s,a,r)}}function CE(t,e){return t.replace(EE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const EE=/\{\$([^}]+)}/g;function Dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Vg(i)&&Vg(o)){if(!Dd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Vg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){return t&&t._delegate?t._delegate:t}class Qo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NE(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IE(t){return t===Yr?void 0:t}function NE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const xE={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},DE=he.INFO,OE={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ME=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class p_{constructor(e){this.name=e,this._logLevel=DE,this._logHandler=ME,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const RE=(t,e)=>e.some(n=>t instanceof n);let $g,Ug;function bE(){return $g||($g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PE(){return Ug||(Ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m_=new WeakMap,Od=new WeakMap,g_=new WeakMap,Sh=new WeakMap,cp=new WeakMap;function LE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m_.set(n,t)}).catch(()=>{}),cp.set(e,t),e}function FE(t){if(Od.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Od.set(t,e)}let Md={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Od.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VE(t){Md=t(Md)}function $E(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ch(this),e,...n);return g_.set(r,e.sort?e.sort():[e]),Dr(r)}:PE().includes(t)?function(...e){return t.apply(Ch(this),e),Dr(m_.get(this))}:function(...e){return Dr(t.apply(Ch(this),e))}}function UE(t){return typeof t=="function"?$E(t):(t instanceof IDBTransaction&&FE(t),RE(t,bE())?new Proxy(t,Md):t)}function Dr(t){if(t instanceof IDBRequest)return LE(t);if(Sh.has(t))return Sh.get(t);const e=UE(t);return e!==t&&(Sh.set(t,e),cp.set(e,t)),e}const Ch=t=>cp.get(t);function BE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Dr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Dr(o.result),l.oldVersion,l.newVersion,Dr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const jE=["get","getKey","getAll","getAllKeys","count"],zE=["put","add","delete","clear"],Eh=new Map;function Bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eh.get(e))return Eh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=zE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||jE.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Eh.set(e,i),i}VE(t=>({...t,get:(e,n,r)=>Bg(e,n)||t.get(e,n,r),has:(e,n)=>!!Bg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rd="@firebase/app",jg="0.8.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new p_("@firebase/app"),HE="@firebase/app-compat",GE="@firebase/analytics-compat",QE="@firebase/analytics",KE="@firebase/app-check-compat",XE="@firebase/app-check",YE="@firebase/auth",ZE="@firebase/auth-compat",JE="@firebase/database",ek="@firebase/database-compat",tk="@firebase/functions",nk="@firebase/functions-compat",rk="@firebase/installations",sk="@firebase/installations-compat",ik="@firebase/messaging",ok="@firebase/messaging-compat",ak="@firebase/performance",lk="@firebase/performance-compat",uk="@firebase/remote-config",ck="@firebase/remote-config-compat",hk="@firebase/storage",dk="@firebase/storage-compat",fk="@firebase/firestore",pk="@firebase/firestore-compat",mk="firebase",gk="9.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="[DEFAULT]",yk={[Rd]:"fire-core",[HE]:"fire-core-compat",[QE]:"fire-analytics",[GE]:"fire-analytics-compat",[XE]:"fire-app-check",[KE]:"fire-app-check-compat",[YE]:"fire-auth",[ZE]:"fire-auth-compat",[JE]:"fire-rtdb",[ek]:"fire-rtdb-compat",[tk]:"fire-fn",[nk]:"fire-fn-compat",[rk]:"fire-iid",[sk]:"fire-iid-compat",[ik]:"fire-fcm",[ok]:"fire-fcm-compat",[ak]:"fire-perf",[lk]:"fire-perf-compat",[uk]:"fire-rc",[ck]:"fire-rc-compat",[hk]:"fire-gcs",[dk]:"fire-gcs-compat",[fk]:"fire-fst",[pk]:"fire-fst-compat","fire-js":"fire-js",[mk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Map,Pd=new Map;function vk(t,e){try{t.container.addComponent(e)}catch(n){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gu(t){const e=t.name;if(Pd.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,t);for(const n of mu.values())vk(n,t);return!0}function _k(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Or=new f_("app","Firebase",wk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=gk;function y_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Or.create("bad-app-name",{appName:String(s)});if(n||(n=_E()),!n)throw Or.create("no-options");const i=mu.get(s);if(i){if(Dd(n,i.options)&&Dd(r,i.config))return i;throw Or.create("duplicate-app",{appName:s})}const o=new AE(s);for(const l of Pd.values())o.addComponent(l);const a=new Tk(n,r,o);return mu.set(s,a),a}function Ck(t=bd){const e=mu.get(t);if(!e&&t===bd)return y_();if(!e)throw Or.create("no-app",{appName:t});return e}function ai(t,e,n){var r;let s=(r=yk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(a.join(" "));return}gu(new Qo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="firebase-heartbeat-database",kk=1,Ko="firebase-heartbeat-store";let kh=null;function v_(){return kh||(kh=BE(Ek,kk,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ko)}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),kh}async function Ik(t){var e;try{return(await v_()).transaction(Ko).objectStore(Ko).get(__(t))}catch(n){if(n instanceof Li)ys.warn(n.message);else{const r=Or.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});ys.warn(r.message)}}}async function zg(t,e){var n;try{const s=(await v_()).transaction(Ko,"readwrite");return await s.objectStore(Ko).put(e,__(t)),s.done}catch(r){if(r instanceof Li)ys.warn(r.message);else{const s=Or.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});ys.warn(s.message)}}}function __(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=1024,Ak=30*24*60*60*1e3;class xk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ok(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qg();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Ak}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qg(),{heartbeatsToSend:n,unsentEntries:r}=Dk(this._heartbeatsCache.heartbeats),s=pu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qg(){return new Date().toISOString().substring(0,10)}function Dk(t,e=Nk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ok{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hE()?dE().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Ik(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wg(t){return pu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){gu(new Qo("platform-logger",e=>new qE(e),"PRIVATE")),gu(new Qo("heartbeat",e=>new xk(e),"PRIVATE")),ai(Rd,jg,t),ai(Rd,jg,"esm2017"),ai("fire-js","")}Mk("");var Rk="firebase",bk="9.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai(Rk,bk,"app");var Pk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,hp=hp||{},Y=Pk||self;function yu(){}function dc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Aa(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Lk(t){return Object.prototype.hasOwnProperty.call(t,Ih)&&t[Ih]||(t[Ih]=++Fk)}var Ih="closure_uid_"+(1e9*Math.random()>>>0),Fk=0;function Vk(t,e,n){return t.call.apply(t.bind,arguments)}function $k(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?wt=Vk:wt=$k,wt.apply(null,arguments)}function gl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ft(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function zr(){this.s=this.s,this.o=this.o}var Uk=0;zr.prototype.s=!1;zr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Uk!=0)&&Lk(this)};zr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const w_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function dp(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Hg(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(dc(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Tt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var Bk=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Y.addEventListener("test",yu,e),Y.removeEventListener("test",yu,e)}catch{}return t}();function vu(t){return/^[\s\xa0]*$/.test(t)}var Gg=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Nh(t,e){return t<e?-1:t>e?1:0}function fc(){var t=Y.navigator;return t&&(t=t.userAgent)?t:""}function xn(t){return fc().indexOf(t)!=-1}function fp(t){return fp[" "](t),t}fp[" "]=yu;function jk(t){var e=Wk;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var zk=xn("Opera"),wi=xn("Trident")||xn("MSIE"),T_=xn("Edge"),Ld=T_||wi,S_=xn("Gecko")&&!(fc().toLowerCase().indexOf("webkit")!=-1&&!xn("Edge"))&&!(xn("Trident")||xn("MSIE"))&&!xn("Edge"),qk=fc().toLowerCase().indexOf("webkit")!=-1&&!xn("Edge");function C_(){var t=Y.document;return t?t.documentMode:void 0}var _u;e:{var Ah="",xh=function(){var t=fc();if(S_)return/rv:([^\);]+)(\)|;)/.exec(t);if(T_)return/Edge\/([\d\.]+)/.exec(t);if(wi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qk)return/WebKit\/(\S+)/.exec(t);if(zk)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xh&&(Ah=xh?xh[1]:""),wi){var Dh=C_();if(Dh!=null&&Dh>parseFloat(Ah)){_u=String(Dh);break e}}_u=Ah}var Wk={};function Hk(){return jk(function(){let t=0;const e=Gg(String(_u)).split("."),n=Gg("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=Nh(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||Nh(s[2].length==0,i[2].length==0)||Nh(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Fd;if(Y.document&&wi){var Qg=C_();Fd=Qg||parseInt(_u,10)||void 0}else Fd=void 0;var Gk=Fd;function Xo(t,e){if(Tt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(S_){e:{try{fp(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Qk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xo.X.h.call(this)}}ft(Xo,Tt);var Qk={2:"touch",3:"pen",4:"mouse"};Xo.prototype.h=function(){Xo.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xa="closure_listenable_"+(1e6*Math.random()|0),Kk=0;function Xk(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=s,this.key=++Kk,this.ba=this.ea=!1}function pc(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function pp(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function E_(t){const e={};for(const n in t)e[n]=t[n];return e}const Kg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k_(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Kg.length;i++)n=Kg[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mc(t){this.src=t,this.g={},this.h=0}mc.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=$d(t,e,r,s);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Xk(e,this.src,i,!!r,s),e.ea=n,t.push(e)),e};function Vd(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=w_(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(pc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function $d(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==r)return s}return-1}var mp="closure_lm_"+(1e6*Math.random()|0),Oh={};function I_(t,e,n,r,s){if(r&&r.once)return A_(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)I_(t,e[i],n,r,s);return null}return n=vp(n),t&&t[xa]?t.N(e,n,Aa(r)?!!r.capture:!!r,s):N_(t,e,n,!1,r,s)}function N_(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Aa(s)?!!s.capture:!!s,a=yp(t);if(a||(t[mp]=a=new mc(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=Yk(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Bk||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(D_(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Yk(){function t(n){return e.call(t.src,t.listener,n)}const e=Zk;return t}function A_(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)A_(t,e[i],n,r,s);return null}return n=vp(n),t&&t[xa]?t.O(e,n,Aa(r)?!!r.capture:!!r,s):N_(t,e,n,!0,r,s)}function x_(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)x_(t,e[i],n,r,s);else r=Aa(r)?!!r.capture:!!r,n=vp(n),t&&t[xa]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=$d(i,n,r,s),-1<n&&(pc(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=yp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$d(e,n,r,s)),(n=-1<t?e[t]:null)&&gp(n))}function gp(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[xa])Vd(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(D_(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yp(e))?(Vd(n,t),n.h==0&&(n.src=null,e[mp]=null)):pc(t)}}}function D_(t){return t in Oh?Oh[t]:Oh[t]="on"+t}function Zk(t,e){if(t.ba)t=!0;else{e=new Xo(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&gp(t),t=n.call(r,e)}return t}function yp(t){return t=t[mp],t instanceof mc?t:null}var Mh="__closure_events_fn_"+(1e9*Math.random()>>>0);function vp(t){return typeof t=="function"?t:(t[Mh]||(t[Mh]=function(e){return t.handleEvent(e)}),t[Mh])}function ot(){zr.call(this),this.i=new mc(this),this.P=this,this.I=null}ft(ot,zr);ot.prototype[xa]=!0;ot.prototype.removeEventListener=function(t,e,n,r){x_(this,t,e,n,r)};function ht(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Tt(e,t);else if(e instanceof Tt)e.target=e.target||t;else{var s=e;e=new Tt(r,t),k_(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=yl(o,r,!0,e)&&s}if(o=e.g=t,s=yl(o,r,!0,e)&&s,s=yl(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=yl(o,r,!1,e)&&s}ot.prototype.M=function(){if(ot.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pc(n[r]);delete t.g[e],t.h--}}this.I=null};ot.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function yl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Vd(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var _p=Y.JSON.stringify;function Jk(){var t=R_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class eI{constructor(){this.h=this.g=null}add(e,n){const r=O_.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var O_=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new tI,t=>t.reset());class tI{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function nI(t){Y.setTimeout(()=>{throw t},0)}function M_(t,e){Ud||rI(),Bd||(Ud(),Bd=!0),R_.add(t,e)}var Ud;function rI(){var t=Y.Promise.resolve(void 0);Ud=function(){t.then(sI)}}var Bd=!1,R_=new eI;function sI(){for(var t;t=Jk();){try{t.h.call(t.g)}catch(n){nI(n)}var e=O_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Bd=!1}function gc(t,e){ot.call(this),this.h=t||1,this.g=e||Y,this.j=wt(this.lb,this),this.l=Date.now()}ft(gc,ot);z=gc.prototype;z.ca=!1;z.R=null;z.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ht(this,"tick"),this.ca&&(wp(this),this.start()))}};z.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function wp(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}z.M=function(){gc.X.M.call(this),wp(this),delete this.g};function Tp(t,e,n){if(typeof t=="function")n&&(t=wt(t,n));else if(t&&typeof t.handleEvent=="function")t=wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Y.setTimeout(t,e||0)}function b_(t){t.g=Tp(()=>{t.g=null,t.i&&(t.i=!1,b_(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class iI extends zr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:b_(this)}M(){super.M(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(t){zr.call(this),this.h=t,this.g={}}ft(Yo,zr);var Xg=[];function P_(t,e,n,r){Array.isArray(n)||(n&&(Xg[0]=n.toString()),n=Xg);for(var s=0;s<n.length;s++){var i=I_(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function L_(t){pp(t.g,function(e,n){this.g.hasOwnProperty(n)&&gp(e)},t),t.g={}}Yo.prototype.M=function(){Yo.X.M.call(this),L_(this)};Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function yc(){this.g=!0}yc.prototype.Aa=function(){this.g=!1};function oI(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function aI(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Zs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+uI(t,n)+(r?" "+r:"")})}function lI(t,e){t.info(function(){return"TIMEOUT: "+e})}yc.prototype.info=function(){};function uI(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return _p(n)}catch{return e}}var xs={},Yg=null;function vc(){return Yg=Yg||new ot}xs.Pa="serverreachability";function F_(t){Tt.call(this,xs.Pa,t)}ft(F_,Tt);function Zo(t){const e=vc();ht(e,new F_(e))}xs.STAT_EVENT="statevent";function V_(t,e){Tt.call(this,xs.STAT_EVENT,t),this.stat=e}ft(V_,Tt);function At(t){const e=vc();ht(e,new V_(e,t))}xs.Qa="timingevent";function $_(t,e){Tt.call(this,xs.Qa,t),this.size=e}ft($_,Tt);function Da(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){t()},e)}var _c={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},U_={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Sp(){}Sp.prototype.h=null;function Zg(t){return t.h||(t.h=t.i())}function B_(){}var Oa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Cp(){Tt.call(this,"d")}ft(Cp,Tt);function Ep(){Tt.call(this,"c")}ft(Ep,Tt);var jd;function wc(){}ft(wc,Sp);wc.prototype.g=function(){return new XMLHttpRequest};wc.prototype.i=function(){return{}};jd=new wc;function Ma(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Yo(this),this.O=cI,t=Ld?125:void 0,this.T=new gc(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new j_}function j_(){this.i=null,this.g="",this.h=!1}var cI=45e3,zd={},wu={};z=Ma.prototype;z.setTimeout=function(t){this.O=t};function qd(t,e,n){t.K=1,t.v=Sc(nr(e)),t.s=n,t.P=!0,z_(t,null)}function z_(t,e){t.F=Date.now(),Ra(t),t.A=nr(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Y_(n.i,"t",r),t.C=0,n=t.l.H,t.h=new j_,t.g=vw(t.l,n?e:null,!t.s),0<t.N&&(t.L=new iI(wt(t.La,t,t.g),t.N)),P_(t.S,t.g,"readystatechange",t.ib),e=t.H?E_(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Zo(),oI(t.j,t.u,t.A,t.m,t.U,t.s)}z.ib=function(t){t=t.target;const e=this.L;e&&Gn(t)==3?e.l():this.La(t)};z.La=function(t){try{if(t==this.g)e:{const c=Gn(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>c)&&(c!=3||Ld||this.g&&(this.h.h||this.g.fa()||ny(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?Zo(3):Zo(2)),Tc(this);var n=this.g.aa();this.Y=n;t:if(q_(this)){var r=ny(this.g);t="";var s=r.length,i=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),Co(this);var o="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,aI(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vu(a)){var u=a;break t}}u=null}if(n=u)Zs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wd(this,n);else{this.i=!1,this.o=3,At(12),ns(this),Co(this);break e}}this.P?(W_(this,c,o),Ld&&this.i&&c==3&&(P_(this.S,this.T,"tick",this.hb),this.T.start())):(Zs(this.j,this.m,o,null),Wd(this,o)),c==4&&ns(this),this.i&&!this.I&&(c==4?pw(this.l,this):(this.i=!1,Ra(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,At(12)):(this.o=0,At(13)),ns(this),Co(this)}}}catch{}finally{}};function q_(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function W_(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=hI(t,n),s==wu){e==4&&(t.o=4,At(14),r=!1),Zs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==zd){t.o=4,At(15),Zs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Zs(t.j,t.m,s,null),Wd(t,s);q_(t)&&s!=wu&&s!=zd&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,At(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Op(e),e.K=!0,At(11))):(Zs(t.j,t.m,n,"[Invalid Chunked Response]"),ns(t),Co(t))}z.hb=function(){if(this.g){var t=Gn(this.g),e=this.g.fa();this.C<e.length&&(Tc(this),W_(this,t,e),this.i&&t!=4&&Ra(this))}};function hI(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?wu:(n=Number(e.substring(n,r)),isNaN(n)?zd:(r+=1,r+n>e.length?wu:(e=e.substr(r,n),t.C=r+n,e)))}z.cancel=function(){this.I=!0,ns(this)};function Ra(t){t.V=Date.now()+t.O,H_(t,t.O)}function H_(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Da(wt(t.gb,t),e)}function Tc(t){t.B&&(Y.clearTimeout(t.B),t.B=null)}z.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(lI(this.j,this.A),this.K!=2&&(Zo(),At(17)),ns(this),this.o=2,Co(this)):H_(this,this.V-t)};function Co(t){t.l.G==0||t.I||pw(t.l,t)}function ns(t){Tc(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,wp(t.T),L_(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Wd(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Hd(n.h,t))){if(!t.J&&Hd(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Cu(n),kc(n);else break e;Dp(n),At(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=Da(wt(n.cb,n),6e3));if(1>=ew(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else rs(n,11)}else if((t.J||n.g==t)&&Cu(n),!vu(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const h=u[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.h;i.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(kp(i,i.h),i.h=null))}if(r.D){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.za=y,Ie(r.F,r.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=yw(r,r.H?r.ka:null,r.V),o.J){tw(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(Tc(a),Ra(a)),r.g=o}else dw(r);0<n.i.length&&Ic(n)}else u[0]!="stop"&&u[0]!="close"||rs(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?rs(n,7):xp(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}Zo(4)}catch{}}function dI(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(dc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function fI(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(dc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function G_(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(dc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=fI(t),r=dI(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Q_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pI(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function as(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof as){this.h=e!==void 0?e:t.h,Tu(this,t.j),this.s=t.s,this.g=t.g,Su(this,t.m),this.l=t.l,e=t.i;var n=new Jo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Jg(this,n),this.o=t.o}else t&&(n=String(t).match(Q_))?(this.h=!!e,Tu(this,n[1]||"",!0),this.s=uo(n[2]||""),this.g=uo(n[3]||"",!0),Su(this,n[4]),this.l=uo(n[5]||"",!0),Jg(this,n[6]||"",!0),this.o=uo(n[7]||"")):(this.h=!!e,this.i=new Jo(null,this.h))}as.prototype.toString=function(){var t=[],e=this.j;e&&t.push(co(e,ey,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(co(e,ey,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(co(n,n.charAt(0)=="/"?yI:gI,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",co(n,_I)),t.join("")};function nr(t){return new as(t)}function Tu(t,e,n){t.j=n?uo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Su(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Jg(t,e,n){e instanceof Jo?(t.i=e,wI(t.i,t.h)):(n||(e=co(e,vI)),t.i=new Jo(e,t.h))}function Ie(t,e,n){t.i.set(e,n)}function Sc(t){return Ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function uo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function co(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,mI),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function mI(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ey=/[#\/\?@]/g,gI=/[#\?:]/g,yI=/[#\?]/g,vI=/[#\?@]/g,_I=/#/g;function Jo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qr(t){t.g||(t.g=new Map,t.h=0,t.i&&pI(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=Jo.prototype;z.add=function(t,e){qr(this),this.i=null,t=Fi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function K_(t,e){qr(t),e=Fi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function X_(t,e){return qr(t),e=Fi(t,e),t.g.has(e)}z.forEach=function(t,e){qr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};z.oa=function(){qr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};z.W=function(t){qr(this);let e=[];if(typeof t=="string")X_(this,t)&&(e=e.concat(this.g.get(Fi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return qr(this),this.i=null,t=Fi(this,t),X_(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Y_(t,e,n){K_(t,e),0<n.length&&(t.i=null,t.g.set(Fi(t,e),dp(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Fi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function wI(t,e){e&&!t.j&&(qr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(K_(this,r),Y_(this,s,n))},t)),t.j=e}var TI=class{constructor(t,e){this.h=t,this.g=e}};function Z_(t){this.l=t||SI,Y.PerformanceNavigationTiming?(t=Y.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Y.g&&Y.g.Ga&&Y.g.Ga()&&Y.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var SI=10;function J_(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ew(t){return t.h?1:t.g?t.g.size:0}function Hd(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function kp(t,e){t.g?t.g.add(e):t.h=e}function tw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Z_.prototype.cancel=function(){if(this.i=nw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function nw(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return dp(t.i)}function Ip(){}Ip.prototype.stringify=function(t){return Y.JSON.stringify(t,void 0)};Ip.prototype.parse=function(t){return Y.JSON.parse(t,void 0)};function CI(){this.g=new Ip}function EI(t,e,n){const r=n||"";try{G_(t,function(s,i){let o=s;Aa(s)&&(o=_p(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function kI(t,e){const n=new yc;if(Y.Image){const r=new Image;r.onload=gl(vl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gl(vl,n,r,"TestLoadImage: error",!1,e),r.onabort=gl(vl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gl(vl,n,r,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function vl(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function ba(t){this.l=t.ac||null,this.j=t.jb||!1}ft(ba,Sp);ba.prototype.g=function(){return new Cc(this.l,this.j)};ba.prototype.i=function(t){return function(){return t}}({});function Cc(t,e){ot.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Np,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft(Cc,ot);var Np=0;z=Cc.prototype;z.open=function(t,e){if(this.readyState!=Np)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ea(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Y).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=Np};z.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rw(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function rw(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}z.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pa(this):ea(this),this.readyState==3&&rw(this)}};z.Va=function(t){this.g&&(this.response=this.responseText=t,Pa(this))};z.Ua=function(t){this.g&&(this.response=t,Pa(this))};z.ga=function(){this.g&&Pa(this)};function Pa(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ea(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var II=Y.JSON.parse;function Pe(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sw,this.K=this.L=!1}ft(Pe,ot);var sw="",NI=/^https?$/i,AI=["POST","PUT"];z=Pe.prototype;z.Ka=function(t){this.L=t};z.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jd.g(),this.C=this.u?Zg(this.u):Zg(jd),this.g.onreadystatechange=wt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){ty(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Y.FormData&&t instanceof Y.FormData,!(0<=w_(AI,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aw(this),0<this.B&&((this.K=xI(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wt(this.qa,this)):this.A=Tp(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){ty(this,i)}};function xI(t){return wi&&Hk()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.qa=function(){typeof hp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ht(this,"timeout"),this.abort(8))};function ty(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,iw(t),Ec(t)}function iw(t){t.D||(t.D=!0,ht(t,"complete"),ht(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ht(this,"complete"),ht(this,"abort"),Ec(this))};z.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ec(this,!0)),Pe.X.M.call(this)};z.Ha=function(){this.s||(this.F||this.v||this.l?ow(this):this.fb())};z.fb=function(){ow(this)};function ow(t){if(t.h&&typeof hp<"u"&&(!t.C[1]||Gn(t)!=4||t.aa()!=2)){if(t.v&&Gn(t)==4)Tp(t.Ha,0,t);else if(ht(t,"readystatechange"),Gn(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(Q_)[1]||null;if(!s&&Y.self&&Y.self.location){var i=Y.self.location.protocol;s=i.substr(0,i.length-1)}r=!NI.test(s?s.toLowerCase():"")}n=r}if(n)ht(t,"complete"),ht(t,"success");else{t.m=6;try{var o=2<Gn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",iw(t)}}finally{Ec(t)}}}}function Ec(t,e){if(t.g){aw(t);const n=t.g,r=t.C[0]?yu:null;t.g=null,t.C=null,e||ht(t,"ready");try{n.onreadystatechange=r}catch{}}}function aw(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Y.clearTimeout(t.A),t.A=null)}function Gn(t){return t.g?t.g.readyState:0}z.aa=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}};z.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),II(e)}};function ny(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case sw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}z.Ea=function(){return this.m};z.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function lw(t){let e="";return pp(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ap(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=lw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ie(t,e,n))}function so(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function uw(t){this.Ca=0,this.i=[],this.j=new yc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=so("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=so("baseRetryDelayMs",5e3,t),this.bb=so("retryDelaySeedMs",1e4,t),this.$a=so("forwardChannelMaxRetries",2,t),this.ta=so("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Z_(t&&t.concurrentRequestLimit),this.Fa=new CI,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}z=uw.prototype;z.ma=8;z.G=1;function xp(t){if(cw(t),t.G==3){var e=t.U++,n=nr(t.F);Ie(n,"SID",t.I),Ie(n,"RID",e),Ie(n,"TYPE","terminate"),La(t,n),e=new Ma(t,t.j,e,void 0),e.K=2,e.v=Sc(nr(n)),n=!1,Y.navigator&&Y.navigator.sendBeacon&&(n=Y.navigator.sendBeacon(e.v.toString(),"")),!n&&Y.Image&&(new Image().src=e.v,n=!0),n||(e.g=vw(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ra(e)}gw(t)}function kc(t){t.g&&(Op(t),t.g.cancel(),t.g=null)}function cw(t){kc(t),t.u&&(Y.clearTimeout(t.u),t.u=null),Cu(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Y.clearTimeout(t.m),t.m=null)}function Ic(t){J_(t.h)||t.m||(t.m=!0,M_(t.Ja,t),t.C=0)}function DI(t,e){return ew(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Da(wt(t.Ja,t,e),mw(t,t.C)),t.C++,!0)}z.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Ma(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=E_(i),k_(i,this.S)):i=this.S),this.o!==null||this.N||(s.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=hw(this,s,e),n=nr(this.F),Ie(n,"RID",t),Ie(n,"CVER",22),this.D&&Ie(n,"X-HTTP-Session-Id",this.D),La(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(lw(i)))+"&"+e:this.o&&Ap(n,this.o,i)),kp(this.h,s),this.Ya&&Ie(n,"TYPE","init"),this.O?(Ie(n,"$req",e),Ie(n,"SID","null"),s.Z=!0,qd(s,n,null)):qd(s,n,e),this.G=2}}else this.G==3&&(t?ry(this,t):this.i.length==0||J_(this.h)||ry(this))};function ry(t,e){var n;e?n=e.m:n=t.U++;const r=nr(t.F);Ie(r,"SID",t.I),Ie(r,"RID",n),Ie(r,"AID",t.T),La(t,r),t.o&&t.s&&Ap(r,t.o,t.s),n=new Ma(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=hw(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),kp(t.h,n),qd(n,r,e)}function La(t,e){t.ia&&pp(t.ia,function(n,r){Ie(e,r,n)}),t.l&&G_({},function(n,r){Ie(e,r,n)})}function hw(t,e,n){n=Math.min(t.i.length,n);var r=t.l?wt(t.l.Ra,t.l,t):null;e:{var s=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].h;const c=s[l].g;if(u-=i,0>u)i=Math.max(0,s[l].h-100),a=!1;else try{EI(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function dw(t){t.g||t.u||(t.Z=1,M_(t.Ia,t),t.A=0)}function Dp(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Da(wt(t.Ia,t),mw(t,t.A)),t.A++,!0)}z.Ia=function(){if(this.u=null,fw(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Da(wt(this.eb,this),t)}};z.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,At(10),kc(this),fw(this))};function Op(t){t.B!=null&&(Y.clearTimeout(t.B),t.B=null)}function fw(t){t.g=new Ma(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=nr(t.sa);Ie(e,"RID","rpc"),Ie(e,"SID",t.I),Ie(e,"CI",t.L?"0":"1"),Ie(e,"AID",t.T),Ie(e,"TYPE","xmlhttp"),La(t,e),t.o&&t.s&&Ap(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Sc(nr(e)),n.s=null,n.P=!0,z_(n,t)}z.cb=function(){this.v!=null&&(this.v=null,kc(this),Dp(this),At(19))};function Cu(t){t.v!=null&&(Y.clearTimeout(t.v),t.v=null)}function pw(t,e){var n=null;if(t.g==e){Cu(t),Op(t),t.g=null;var r=2}else if(Hd(t.h,e))n=e.D,tw(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=vc(),ht(r,new $_(r,n)),Ic(t)}else dw(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(r==1&&DI(t,e)||r==2&&Dp(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:rs(t,5);break;case 4:rs(t,10);break;case 3:rs(t,6);break;default:rs(t,2)}}}function mw(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function rs(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=wt(t.kb,t);n||(n=new as("//www.google.com/images/cleardot.gif"),Y.location&&Y.location.protocol=="http"||Tu(n,"https"),Sc(n)),kI(n.toString(),r)}else At(2);t.G=0,t.l&&t.l.va(e),gw(t),cw(t)}z.kb=function(t){t?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function gw(t){if(t.G=0,t.la=[],t.l){const e=nw(t.h);(e.length!=0||t.i.length!=0)&&(Hg(t.la,e),Hg(t.la,t.i),t.h.i.length=0,dp(t.i),t.i.length=0),t.l.ua()}}function yw(t,e,n){var r=n instanceof as?nr(n):new as(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Su(r,r.m);else{var s=Y.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new as(null,void 0);r&&Tu(i,r),e&&(i.g=e),s&&Su(i,s),n&&(i.l=n),r=i}return n=t.D,e=t.za,n&&e&&Ie(r,n,e),Ie(r,"VER",t.ma),La(t,r),r}function vw(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Pe(new ba({jb:!0})):new Pe(t.ra),e.Ka(t.H),e}function _w(){}z=_w.prototype;z.xa=function(){};z.wa=function(){};z.va=function(){};z.ua=function(){};z.Ra=function(){};function Eu(){if(wi&&!(10<=Number(Gk)))throw Error("Environmental error: no available transport.")}Eu.prototype.g=function(t,e){return new Qt(t,e)};function Qt(t,e){ot.call(this),this.g=new uw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!vu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vu(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vi(this)}ft(Qt,ot);Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;At(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=yw(t,null,t.V),Ic(t)};Qt.prototype.close=function(){xp(this.g)};Qt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=_p(t),t=n);e.i.push(new TI(e.ab++,t)),e.G==3&&Ic(e)};Qt.prototype.M=function(){this.g.l=null,delete this.j,xp(this.g),delete this.g,Qt.X.M.call(this)};function ww(t){Cp.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ft(ww,Cp);function Tw(){Ep.call(this),this.status=1}ft(Tw,Ep);function Vi(t){this.g=t}ft(Vi,_w);Vi.prototype.xa=function(){ht(this.g,"a")};Vi.prototype.wa=function(t){ht(this.g,new ww(t))};Vi.prototype.va=function(t){ht(this.g,new Tw)};Vi.prototype.ua=function(){ht(this.g,"b")};Eu.prototype.createWebChannel=Eu.prototype.g;Qt.prototype.send=Qt.prototype.u;Qt.prototype.open=Qt.prototype.m;Qt.prototype.close=Qt.prototype.close;_c.NO_ERROR=0;_c.TIMEOUT=8;_c.HTTP_ERROR=6;U_.COMPLETE="complete";B_.EventType=Oa;Oa.OPEN="a";Oa.CLOSE="b";Oa.ERROR="c";Oa.MESSAGE="d";ot.prototype.listen=ot.prototype.N;Pe.prototype.listenOnce=Pe.prototype.O;Pe.prototype.getLastError=Pe.prototype.Oa;Pe.prototype.getLastErrorCode=Pe.prototype.Ea;Pe.prototype.getStatus=Pe.prototype.aa;Pe.prototype.getResponseJson=Pe.prototype.Sa;Pe.prototype.getResponseText=Pe.prototype.fa;Pe.prototype.send=Pe.prototype.da;Pe.prototype.setWithCredentials=Pe.prototype.Ka;var OI=function(){return new Eu},MI=function(){return vc()},Rh=_c,RI=U_,bI=xs,sy={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},PI=ba,_l=B_,LI=Pe;const iy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="9.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new p_("@firebase/firestore");function oy(){return vs.logLevel}function q(t,...e){if(vs.logLevel<=he.DEBUG){const n=e.map(Mp);vs.debug(`Firestore (${$i}): ${t}`,...n)}}function rr(t,...e){if(vs.logLevel<=he.ERROR){const n=e.map(Mp);vs.error(`Firestore (${$i}): ${t}`,...n)}}function Gd(t,...e){if(vs.logLevel<=he.WARN){const n=e.map(Mp);vs.warn(`Firestore (${$i}): ${t}`,...n)}}function Mp(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function ve(t,e){t||Z()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class VI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $I{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ls,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ls)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new Sw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new yt(e)}}class UI{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ve(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class BI{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new UI(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zI{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.A=n.token,new jI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=qI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function Ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Xe(0,0))}static max(){return new ne(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ta.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ta?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends ta{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const WI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends ta{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return WI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(Re.fromString(e))}static fromName(e){return new H(Re.fromString(e).popFirst(5))}static empty(){return new H(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new Re(e.slice()))}}function HI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Pr(s,H.empty(),e)}function GI(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(ne.min(),H.empty(),-1)}static max(){return new Pr(ne.max(),H.empty(),-1)}}function QI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==KI)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Va(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ew(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rp.at=-1;class Ze{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:lt.RED,this.left=s!=null?s:lt.EMPTY,this.right=i!=null?i:lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(t,e,n,r,s){return this}insert(t,e,n){return new lt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ly(this.data.getIterator())}getIteratorFrom(e){return new ly(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class ly{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Ye(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ct(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const YI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=YI.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Iw(t){const e=t.mapValue.fields.__previous_value__;return kw(e)?Iw(e):e}function na(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,r,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}function Nc(t){return t==null}function ku(t){return t===0&&1/t==-1/0}function JI(t){return typeof t=="number"&&Number.isInteger(t)&&!ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kw(t)?4:eN(t)?9007199254740991:10:Z()}function bn(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return na(t).isEqual(na(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Lr(r.timestampValue),o=Lr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Si(r.bytesValue).isEqual(Si(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return qe(r.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(r.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return qe(r.integerValue)===qe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=qe(r.doubleValue),o=qe(s.doubleValue);return i===o?ku(i)===ku(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(ay(i)!==ay(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!bn(i[a],o[a])))return!1;return!0}(t,e);default:return Z()}}function sa(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function Ci(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=qe(s.integerValue||s.doubleValue),a=qe(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return uy(t.timestampValue,e.timestampValue);case 4:return uy(na(t),na(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Si(s),a=Si(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=de(o[l],a[l]);if(u!==0)return u}return de(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=de(qe(s.latitude),qe(i.latitude));return o!==0?o:de(qe(s.longitude),qe(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Ci(o[l],a[l]);if(u)return u}return de(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Tl.mapValue&&i===Tl.mapValue)return 0;if(s===Tl.mapValue)return 1;if(i===Tl.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=de(a[c],u[c]);if(h!==0)return h;const d=Ci(o[a[c]],l[u[c]]);if(d!==0)return d}return de(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Z()}}function uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Lr(t),r=Lr(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function li(t){return Qd(t)}function Qd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Lr(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Si(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,H.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=Qd(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${Qd(r.fields[a])}`;return i+"}"}(t.mapValue):Z();var e,n}function Kd(t){return!!t&&"integerValue"in t}function bp(t){return!!t&&"arrayValue"in t}function cy(t){return!!t&&"nullValue"in t}function hy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vl(t){return!!t&&"mapValue"in t}function Eo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eo(n)}setAll(e){let n=_t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Eo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tn(Eo(this.value))}}function Nw(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new _t([n]);if(Vl(r)){const i=Nw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new ut(e,0,ne.min(),ne.min(),tn.empty(),0)}static newFoundDocument(e,n,r){return new ut(e,1,n,ne.min(),r,0)}static newNoDocument(e,n){return new ut(e,2,n,ne.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ne.min(),tn.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function dy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new tN(t,e,n,r,s,i,o)}function Pp(t){const e=J(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+li(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>li(r)).join(",")),e.ht=n}return e.ht}function nN(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${li(r.value)}`;var r}).join(", ")}]`),Nc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>li(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>li(n)).join(",")),`Target(${e})`}function Lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!cN(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!bn(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!py(t.startAt,e.startAt)&&py(t.endAt,e.endAt)}function Xd(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Vt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,r):new rN(e,n,r):n==="array-contains"?new oN(e,r):n==="in"?new aN(e,r):n==="not-in"?new lN(e,r):n==="array-contains-any"?new uN(e,r):new Vt(e,n,r)}static lt(e,n,r){return n==="in"?new sN(e,r):new iN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(Ci(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.ft(Ci(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rN extends Vt{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.ft(n)}}class sN extends Vt{constructor(e,n){super(e,"in",n),this.keys=Aw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iN extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=Aw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Aw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class oN extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bp(n)&&sa(n.arrayValue,this.value)}}class aN extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class lN extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sa(this.value.arrayValue,n)}}class uN extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sa(this.value.arrayValue,r))}}class Iu{constructor(e,n){this.position=e,this.inclusive=n}}class ko{constructor(e,n="asc"){this.field=e,this.dir=n}}function cN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function fy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Ci(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function py(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function hN(t,e,n,r,s,i,o,a){return new Ac(t,e,n,r,s,i,o,a)}function Fp(t){return new Ac(t)}function my(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dN(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fN(t){for(const e of t.filters)if(e.dt())return e.field;return null}function pN(t){return t.collectionGroup!==null}function ia(t){const e=J(t);if(e._t===null){e._t=[];const n=fN(e),r=dN(e);if(n!==null&&r===null)n.isKeyField()||e._t.push(new ko(n)),e._t.push(new ko(_t.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ko(_t.keyField(),i))}}}return e._t}function sr(t){const e=J(t);if(!e.wt)if(e.limitType==="F")e.wt=dy(e.path,e.collectionGroup,ia(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of ia(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new ko(i.field,o))}const r=e.endAt?new Iu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Iu(e.startAt.position,e.startAt.inclusive):null;e.wt=dy(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.wt}function Yd(t,e,n){return new Ac(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xc(t,e){return Lp(sr(t),sr(e))&&t.limitType===e.limitType}function xw(t){return`${Pp(sr(t))}|lt:${t.limitType}`}function Zd(t){return`Query(target=${nN(sr(t))}; limitType=${t.limitType})`}function Vp(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):H.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=fy(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,ia(n),r)||n.endAt&&!function(s,i,o){const a=fy(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,ia(n),r))}(t,e)}function mN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dw(t){return(e,n)=>{let r=!1;for(const s of ia(t)){const i=gN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function gN(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Ci(a,l):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ku(e)?"-0":e}}function Mw(t){return{integerValue:""+t}}function yN(t,e){return JI(e)?Mw(e):Ow(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this._=void 0}}function vN(t,e,n){return t instanceof Nu?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof oa?bw(t,e):t instanceof aa?Pw(t,e):function(r,s){const i=Rw(r,s),o=gy(i)+gy(r.yt);return Kd(i)&&Kd(r.yt)?Mw(o):Ow(r.It,o)}(t,e)}function _N(t,e,n){return t instanceof oa?bw(t,e):t instanceof aa?Pw(t,e):n}function Rw(t,e){return t instanceof Au?Kd(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Nu extends Dc{}class oa extends Dc{constructor(e){super(),this.elements=e}}function bw(t,e){const n=Lw(e);for(const r of t.elements)n.some(s=>bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class aa extends Dc{constructor(e){super(),this.elements=e}}function Pw(t,e){let n=Lw(e);for(const r of t.elements)n=n.filter(s=>!bn(s,r));return{arrayValue:{values:n}}}class Au extends Dc{constructor(e,n){super(),this.It=e,this.yt=n}}function gy(t){return qe(t.integerValue||t.doubleValue)}function Lw(t){return bp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wN(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof oa&&r instanceof oa||n instanceof aa&&r instanceof aa?Ti(n.elements,r.elements,bn):n instanceof Au&&r instanceof Au?bn(n.yt,r.yt):n instanceof Nu&&r instanceof Nu}(t.transform,e.transform)}class TN{constructor(e,n){this.version=e,this.transformResults=n}}class Kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oc{}function Fw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $w(t.key,Kn.none()):new $a(t.key,t.data,Kn.none());{const n=t.data,r=tn.empty();let s=new Ye(_t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ds(t.key,r,new Rn(s.toArray()),Kn.none())}}function SN(t,e,n){t instanceof $a?function(r,s,i){const o=r.value.clone(),a=vy(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(r,s,i){if(!$l(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=vy(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(Vw(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Io(t,e,n,r){return t instanceof $a?function(s,i,o,a){if(!$l(s.precondition,i))return o;const l=s.value.clone(),u=_y(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(s,i,o,a){if(!$l(s.precondition,i))return o;const l=_y(s.fieldTransforms,a,i),u=i.data;return u.setAll(Vw(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return $l(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function CN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Rw(r.transform,s||null);i!=null&&(n===null&&(n=tn.empty()),n.set(r.field,i))}return n||null}function yy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Ti(n,r,(s,i)=>wN(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $a extends Oc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ds extends Oc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vy(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_N(o,a,n[s]))}return r}function _y(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,vN(i,o,e))}return r}class $w extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EN extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ae;function IN(t){switch(t){default:return Z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Uw(t){if(t===void 0)return rr("GRPC error has no .code"),R.UNKNOWN;switch(t){case ze.OK:return R.OK;case ze.CANCELLED:return R.CANCELLED;case ze.UNKNOWN:return R.UNKNOWN;case ze.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ze.INTERNAL:return R.INTERNAL;case ze.UNAVAILABLE:return R.UNAVAILABLE;case ze.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ze.NOT_FOUND:return R.NOT_FOUND;case ze.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ze.ABORTED:return R.ABORTED;case ze.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ze.DATA_LOSS:return R.DATA_LOSS;default:return Z()}}(ae=ze||(ze={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Ze(H.comparator);function ir(){return NN}const Bw=new Ze(H.comparator);function ho(...t){let e=Bw;for(const n of t)e=e.insert(n.key,n);return e}function jw(t){let e=Bw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return No()}function zw(){return No()}function No(){return new Bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const AN=new Ze(H.comparator),xN=new Ye(H.comparator);function ie(...t){let e=xN;for(const n of t)e=e.add(n);return e}const DN=new Ye(de);function qw(){return DN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mc(ne.min(),s,qw(),ir(),ie())}}class Ua{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ua(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r,s){this.Tt=e,this.removedTargetIds=n,this.key=r,this.Et=s}}class Ww{constructor(e,n){this.targetId=e,this.At=n}}class Hw{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class wy{constructor(){this.Rt=0,this.bt=Sy(),this.Pt=Ct.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=ie(),n=ie(),r=ie();return this.bt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new Ua(this.Pt,this.vt,e,n,r)}Nt(){this.Vt=!1,this.bt=Sy()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ON{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ir(),this.qt=Ty(),this.Kt=new Ye(de)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const r=this.zt(n);switch(e.state){case 0:this.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),r.Ct(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((r,s)=>{this.Ht(s)&&n(s)})}Yt(e){const n=e.targetId,r=e.At.count,s=this.Xt(n);if(s){const i=s.target;if(Xd(i))if(r===0){const o=new H(i.path);this.jt(n,o,ut.newNoDocument(o,ne.min()))}else ve(r===1);else this.Zt(n)!==r&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&Xd(a.target)){const l=new H(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,ut.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let r=ie();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const s=new Mc(e,n,this.Kt,this.Ut,r);return this.Ut=ir(),this.qt=Ty(),this.Kt=new Ye(de),s}Qt(e,n){if(!this.Ht(e))return;const r=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,n)?s.kt(n,1):s.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new wy,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Ye(de),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new wy),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function Ty(){return new Ze(H.comparator)}function Sy(){return new Ze(H.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),RN=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class bN{constructor(e,n){this.databaseId=e,this.gt=n}}function xu(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gw(t,e){return t.gt?e.toBase64():e.toUint8Array()}function PN(t,e){return xu(t,e.toTimestamp())}function Xn(t){return ve(!!t),ne.fromTimestamp(function(e){const n=Lr(e);return new Xe(n.seconds,n.nanos)}(t))}function $p(t,e){return function(n){return new Re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Qw(t){const e=Re.fromString(t);return ve(Yw(e)),e}function Jd(t,e){return $p(t.databaseId,e.path)}function bh(t,e){const n=Qw(e);if(n.get(1)!==t.databaseId.projectId)throw new X(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(Kw(n))}function ef(t,e){return $p(t.databaseId,e)}function LN(t){const e=Qw(t);return e.length===4?Re.emptyPath():Kw(e)}function tf(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kw(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cy(t,e,n){return{name:Jd(t,e),fields:n.value.mapValue.fields}}function FN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(ve(u===void 0||typeof u=="string"),Ct.fromBase64String(u||"")):(ve(u===void 0||u instanceof Uint8Array),Ct.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?R.UNKNOWN:Uw(l.code);return new X(u,l.message||"")}(o);n=new Hw(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bh(t,r.document.name),i=Xn(r.document.updateTime),o=new tn({mapValue:{fields:r.document.fields}}),a=ut.newFoundDocument(s,i,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Ul(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bh(t,r.document),i=r.readTime?Xn(r.readTime):ne.min(),o=ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ul([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bh(t,r.document),i=r.removedTargetIds||[];n=new Ul([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new kN(s),o=r.targetId;n=new Ww(o,i)}}return n}function VN(t,e){let n;if(e instanceof $a)n={update:Cy(t,e.key,e.value)};else if(e instanceof $w)n={delete:Jd(t,e.key)};else if(e instanceof Ds)n={update:Cy(t,e.key,e.data),updateMask:QN(e.fieldMask)};else{if(!(e instanceof EN))return Z();n={verify:Jd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Nu)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof oa)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof aa)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Au)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:PN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function $N(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Xn(r.updateTime):Xn(s);return i.isEqual(ne.min())&&(i=Xn(s)),new TN(i,r.transformResults||[])}(n,e))):[]}function UN(t,e){return{documents:[ef(t,e.path)]}}function BN(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ef(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ef(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(hy(h.value))return{unaryFilter:{field:Vs(h.field),op:"IS_NAN"}};if(cy(h.value))return{unaryFilter:{field:Vs(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(hy(h.value))return{unaryFilter:{field:Vs(h.field),op:"IS_NOT_NAN"}};if(cy(h.value))return{unaryFilter:{field:Vs(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vs(h.field),op:WN(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Vs(c.field),direction:qN(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||Nc(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function jN(t){let e=LN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=Xw(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new ko(Js(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Nc(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new Iu(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new Iu(d,h)}(n.endAt)),hN(e,s,o,i,a,"F",l,u)}function zN(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Z()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xw(t){return t?t.unaryFilter!==void 0?[GN(t)]:t.fieldFilter!==void 0?[HN(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Xw(e)).reduce((e,n)=>e.concat(n)):Z():[]}function qN(t){return MN[t]}function WN(t){return RN[t]}function Vs(t){return{fieldPath:t.canonicalString()}}function Js(t){return _t.fromServerFormat(t.fieldPath)}function HN(t){return Vt.create(Js(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(t.fieldFilter.op),t.fieldFilter.value)}function GN(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Js(t.unaryFilter.field);return Vt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Js(t.unaryFilter.field);return Vt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Js(t.unaryFilter.field);return Vt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Js(t.unaryFilter.field);return Vt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}function QN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&SN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Fw(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,r)=>yy(n,r))&&Ti(this.baseMutations,e.baseMutations,(n,r)=>yy(n,r))}}class Up{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=AN;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Up(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r,s,i=ne.min(),o=ne.min(),a=Ct.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.re=e}}function ZN(t){const e=jN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.Ye=new eA}addToCollectionParentIndex(e,n){return this.Ye.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Pr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class eA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ei(0)}static vn(){return new Ei(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&Io(r.mutation,s,Rn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=ss();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ho();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ir();const o=No(),a=No();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Ds)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),Io(c.mutation,u,c.mutation.getFieldMask(),Xe.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new nA(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=No();let s=new Ze((o,a)=>o-a),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Rn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||ie()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=zw();c.forEach(d=>{if(!i.has(d)){const f=Fw(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(ss());let a=-1,l=i;return o.next(u=>O.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?O.resolve():this.getBaseDocument(e,c,h).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,ie())).next(c=>({batchId:a,changes:jw(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let s=ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ho();return this.indexManager.getCollectionParents(e,s).next(o=>O.forEach(o,a=>{const l=function(u,c){return new Ac(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,ut.newInvalidDocument(u)))});let o=ho();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&Io(u.mutation,l,Rn.empty(),Xe.now()),Vp(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):O.resolve(ut.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return O.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:Xn(r.createTime)}),O.resolve()}getNamedQuery(e,n){return O.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:ZN(r.bundledQuery),readTime:Xn(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.overlays=new Ze(H.comparator),this.es=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ue(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.es.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=ss(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ze((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=ss(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ss(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return O.resolve(a)}ue(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XN(n,r));let i=this.es.get(n);i===void 0&&(i=ie(),this.es.set(n,i)),this.es.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this.ns=new Ye(nt.ss),this.rs=new Ye(nt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new nt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new nt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new H(new Re([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.rs.forEachInRange([r,s],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new H(new Re([])),r=new nt(n,e),s=new nt(n,e+1);let i=ie();return this.rs.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return H.comparator(e.key,n.key)||de(e._s,n._s)}static os(e,n){return de(e._s,n._s)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ye(nt.ss)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KN(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new nt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ps(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,s],o=>{const a=this.ys(o._s);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(de);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{r=r.add(a._s)})}),O.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new nt(new H(i),0);let a=new Ye(de);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l._s)),!0)},o),O.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const s=this.ys(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return O.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new nt(n,0),s=this.gs.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.Es=e,this.docs=new Ze(H.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),O.resolve(r)}getAllFromCollection(e,n,r){let s=ir();const i=new H(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||QI(GI(l),r)<=0||(s=s.insert(l.key,l.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,s){Z()}As(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lA(this)}getSize(e){return O.resolve(this.size)}}class lA extends tA{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.persistence=e,this.Rs=new Bi(n=>Pp(n),Lp),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Bp,this.targetCount=0,this.vs=Ei.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),O.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Ei(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Dn(n),O.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Rp(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new uA(this),this.indexManager=new JN,this.remoteDocumentCache=function(r){return new aA(r)}(r=>this.referenceDelegate.xs(r)),this.It=new YN(n),this.Ns=new sA(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new oA(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new hA(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(i=>this.referenceDelegate.Os(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ms(e,n){return O.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class hA extends XI{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Fs=new Bp,this.$s=null}static Bs(e){return new jp(e)}get Ls(){if(this.$s)return this.$s;throw Z()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),O.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Ls,r=>{const s=H.fromPath(r);return this.Us(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return O.or([()=>O.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=s}static Ci(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.ki(e,n).next(i=>i||this.Oi(e,n,s,r)).next(i=>i||this.Mi(e,n))}ki(e,n){if(my(n))return O.resolve(null);let r=sr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yd(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,Yd(n,null,"F")):this.Bi(e,u,n,l)}))})))}Oi(e,n,r,s){return my(n)||s.isEqual(ne.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,r,s)?this.Mi(e,n):(oy()<=he.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zd(n)),this.Bi(e,o,n,HI(s,-1)))})}Fi(e,n){let r=new Ye(Dw(e));return n.forEach((s,i)=>{Vp(e,i)&&(r=r.add(i))}),r}$i(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Mi(e,n){return oy()<=he.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Zd(n)),this.Ni.getDocumentsMatchingQuery(e,n,Pr.min())}Bi(e,n,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,s){this.persistence=e,this.Li=n,this.It=s,this.Ui=new Ze(de),this.qi=new Bi(i=>Pp(i),Lp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rA(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function pA(t,e,n,r){return new fA(t,e,n,r)}async function Zw(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ie();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function mA(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=O.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(p=>{const y=l.docVersions.get(f);ve(y!==null),p.version.compareTo(y)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ie();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Jw(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function gA(t,e){const n=J(t),r=e.snapshotVersion;let s=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(Ct.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(p,y,w){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,c)&&a.push(n.Cs.updateTargetData(i,f))});let l=ir(),u=ie();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(yA(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!r.isEqual(ne.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=s,i))}function yA(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:s}})}function vA(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _A(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Cs.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Cs.allocateTargetId(r).next(o=>(s=new us(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ui.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(r.targetId,r),n.qi.set(e,r.targetId)),r})}async function nf(t,e,n){const r=J(t),s=r.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Va(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}function Ey(t,e,n){const r=J(t);let s=ne.min(),i=ie();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=J(a),h=c.qi.get(u);return h!==void 0?O.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(r,o,sr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:ie())).next(a=>(wA(r,mN(e),a),{documents:a,Hi:i})))}function wA(t,e,n){let r=t.Ki.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ki.set(e,r)}class ky{constructor(){this.activeTargetIds=qw()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TA{constructor(){this.Lr=new ky,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,r){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ky,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,s,i){const o=this.ho(e,n);q("RestConnection","Sending: ",o,r);const a={};return this.lo(a,s,i),this.fo(e,o,a,r).then(l=>(q("RestConnection","Received: ",l),l),l=>{throw Gd("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}_o(e,n,r,s,i,o){return this.ao(e,n,r,s,i)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$i,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}ho(e,n){const r=CA[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,s){return new Promise((i,o)=>{const a=new LI;a.setWithCredentials(!0),a.listenOnce(RI.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Rh.NO_ERROR:const u=a.getResponseJson();q("Connection","XHR received:",JSON.stringify(u)),i(u);break;case Rh.TIMEOUT:q("Connection",'RPC "'+e+'" timed out'),o(new X(R.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const c=a.getStatus();if(q("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(p)>=0?p:R.UNKNOWN}(h.status);o(new X(d,h.message))}else o(new X(R.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new X(R.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{q("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,r,15)})}wo(e,n,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=OI(),o=MI(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new PI({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=s.join("");q("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const d=new EA({Hr:p=>{h?q("Connection","Not sending because WebChannel is closed:",p):(c||(q("Connection","Opening WebChannel transport."),u.open(),c=!0),q("Connection","WebChannel sending:",p),u.send(p))},Jr:()=>u.close()}),f=(p,y,w)=>{p.listen(y,g=>{try{w(g)}catch(m){setTimeout(()=>{throw m},0)}})};return f(u,_l.EventType.OPEN,()=>{h||q("Connection","WebChannel transport opened.")}),f(u,_l.EventType.CLOSE,()=>{h||(h=!0,q("Connection","WebChannel transport closed"),d.io())}),f(u,_l.EventType.ERROR,p=>{h||(h=!0,Gd("Connection","WebChannel transport errored:",p),d.io(new X(R.UNAVAILABLE,"The operation could not be completed")))}),f(u,_l.EventType.MESSAGE,p=>{var y;if(!h){const w=p.data[0];ve(!!w);const g=w,m=g.error||((y=g[0])===null||y===void 0?void 0:y.error);if(m){q("Connection","WebChannel received error:",m);const v=m.status;let T=function(S){const C=ze[S];if(C!==void 0)return Uw(C)}(v),_=m.message;T===void 0&&(T=R.INTERNAL,_="Unknown error status: "+v+" with message "+m.message),h=!0,d.io(new X(T,_)),u.close()}else q("Connection","WebChannel received:",w),d.ro(w)}}),f(o,bI.STAT_EVENT,p=>{p.stat===sy.PROXY?q("Connection","Detected buffering proxy"):p.stat===sy.NOPROXY&&q("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.so()},0),d}}function Ph(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){return new bN(t,!0)}class e1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=s,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,s,i,o,a,l){this.Hs=e,this.vo=r,this.Vo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new e1(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===n&&this.Go(r,s)},r=>{e(()=>{const s=new X(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IA extends t1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.It=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=FN(this.It,e),r=function(s){if(!("targetChange"in s))return ne.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ne.min():i.readTime?Xn(i.readTime):ne.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=tf(this.It),n.addTarget=function(s,i){let o;const a=i.target;return o=Xd(a)?{documents:UN(s,a)}:{query:BN(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=Gw(s,i.resumeToken):i.snapshotVersion.compareTo(ne.min())>0&&(o.readTime=xu(s,i.snapshotVersion.toTimestamp())),o}(this.It,e);const r=zN(this.It,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=tf(this.It),n.removeTarget=e,this.Bo(n)}}class NA extends t1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=$N(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.Zo(r,n)}return ve(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=tf(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>VN(this.It,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new X(R.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.ao(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(R.UNKNOWN,s.toString())})}_o(e,n,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(R.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class xA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(rr(n),this.ou=!1):q("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{r.enqueueAndForget(async()=>{Os(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=J(a);l._u.add(4),await Ba(l),l.gu.set("Unknown"),l._u.delete(4),await bc(l)}(this))})}),this.gu=new xA(r,s)}}async function bc(t){if(Os(t))for(const e of t.wu)await e(!0)}async function Ba(t){for(const e of t.wu)await e(!1)}function n1(t,e){const n=J(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Hp(n)?Wp(n):ji(n).ko()&&qp(n,e))}function r1(t,e){const n=J(t),r=ji(n);n.du.delete(e),r.ko()&&s1(n,e),n.du.size===0&&(r.ko()?r.Fo():Os(n)&&n.gu.set("Unknown"))}function qp(t,e){t.yu.Mt(e.targetId),ji(t).zo(e)}function s1(t,e){t.yu.Mt(e),ji(t).Ho(e)}function Wp(t){t.yu=new ON({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),ji(t).start(),t.gu.uu()}function Hp(t){return Os(t)&&!ji(t).No()&&t.du.size>0}function Os(t){return J(t)._u.size===0}function i1(t){t.yu=void 0}async function OA(t){t.du.forEach((e,n)=>{qp(t,e)})}async function MA(t,e){i1(t),Hp(t)?(t.gu.hu(e),Wp(t)):t.gu.set("Unknown")}async function RA(t,e,n){if(t.gu.set("Online"),e instanceof Hw&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Du(t,r)}else if(e instanceof Ul?t.yu.Gt(e):e instanceof Ww?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(ne.min()))try{const r=await Jw(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.du.get(l);u&&s.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=s.du.get(a);if(!l)return;s.du.set(a,l.withResumeToken(Ct.EMPTY_BYTE_STRING,l.snapshotVersion)),s1(s,a);const u=new us(l.target,a,1,l.sequenceNumber);qp(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Du(t,r)}}async function Du(t,e,n){if(!Va(e))throw e;t._u.add(1),await Ba(t),t.gu.set("Offline"),n||(n=()=>Jw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await bc(t)})}function o1(t,e){return e().catch(n=>Du(t,n,e))}async function Pc(t){const e=J(t),n=Fr(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;bA(e);)try{const s=await vA(e.localStore,r);if(s===null){e.fu.length===0&&n.Fo();break}r=s.batchId,PA(e,s)}catch(s){await Du(e,s)}a1(e)&&l1(e)}function bA(t){return Os(t)&&t.fu.length<10}function PA(t,e){t.fu.push(e);const n=Fr(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function a1(t){return Os(t)&&!Fr(t).No()&&t.fu.length>0}function l1(t){Fr(t).start()}async function LA(t){Fr(t).eu()}async function FA(t){const e=Fr(t);for(const n of t.fu)e.Xo(n.mutations)}async function VA(t,e,n){const r=t.fu.shift(),s=Up.from(r,e,n);await o1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pc(t)}async function $A(t,e){e&&Fr(t).Yo&&await async function(n,r){if(s=r.code,IN(s)&&s!==R.ABORTED){const i=n.fu.shift();Fr(n).Mo(),await o1(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Pc(n)}var s}(t,e),a1(t)&&l1(t)}async function Ny(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Os(n);n._u.add(3),await Ba(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await bc(n)}async function UA(t,e){const n=J(t);e?(n._u.delete(2),await bc(n)):e||(n._u.add(2),await Ba(n),n.gu.set("Unknown"))}function ji(t){return t.pu||(t.pu=function(e,n,r){const s=J(e);return s.su(),new IA(n,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:OA.bind(null,t),Zr:MA.bind(null,t),Wo:RA.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),Hp(t)?Wp(t):t.gu.set("Unknown")):(await t.pu.stop(),i1(t))})),t.pu}function Fr(t){return t.Iu||(t.Iu=function(e,n,r){const s=J(e);return s.su(),new NA(n,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:LA.bind(null,t),Zr:$A.bind(null,t),tu:FA.bind(null,t),Zo:VA.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await Pc(t)):(await t.Iu.stop(),t.fu.length>0&&(q("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Gp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Va(t))return new X(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=ho(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new ui(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.Tu=new Ze(H.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):Z():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class ki{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ki(e,n,ui.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.Au=void 0,this.listeners=[]}}class jA{constructor(){this.queries=new Bi(e=>xw(e),xc),this.onlineState="Unknown",this.Ru=new Set}}async function zA(t,e){const n=J(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new BA),s)try{i.Au=await n.onListen(r)}catch(o){const a=Qp(o,`Initialization of query '${Zd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Kp(n)}async function qA(t,e){const n=J(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function WA(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(s)&&(r=!0);o.Au=s}}r&&Kp(n)}function HA(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Kp(t){t.Ru.forEach(e=>{e.next()})}class GA{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.key=e}}class c1{constructor(e){this.key=e}}class QA{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ie(),this.mutatedKeys=ie(),this.Gu=Dw(e),this.Qu=new ui(this.Gu)}get ju(){return this.Uu}Wu(e,n){const r=n?n.zu:new Ay,s=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=Vp(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),w=!0):this.Hu(d,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.Gu(f,l)>0||u&&this.Gu(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),w=!0):d&&!f&&(r.track({type:1,doc:d}),w=!0,(l||u)&&(a=!0)),w&&(f?(o=o.add(f),i=y?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Qu:o,zu:r,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((u,c)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return f(h)-f(d)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.qu;return this.qu=a,i.length!==0||l?{snapshot:new ki(this.query,e.Qu,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ay,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ie(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new c1(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new u1(r))}),n}tc(e){this.Uu=e.Hi,this.Ku=ie();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return ki.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class KA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XA{constructor(e){this.key=e,this.nc=!1}}class YA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Bi(a=>xw(a),xc),this.rc=new Map,this.oc=new Set,this.uc=new Ze(H.comparator),this.cc=new Map,this.ac=new Bp,this.hc={},this.lc=new Map,this.fc=Ei.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function ZA(t,e){const n=lx(t);let r,s;const i=n.ic.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.ec();else{const o=await _A(n.localStore,sr(e));n.isPrimaryClient&&n1(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await JA(n,e,r,a==="current",o.resumeToken)}return s}async function JA(t,e,n,r,s){t._c=(h,d,f)=>async function(p,y,w,g){let m=y.view.Wu(w);m.$i&&(m=await Ey(p.localStore,y.query,!1).then(({documents:_})=>y.view.Wu(_,m)));const v=g&&g.targetChanges.get(y.targetId),T=y.view.applyChanges(m,p.isPrimaryClient,v);return Dy(p,y.targetId,T.Xu),T.snapshot}(t,h,d,f);const i=await Ey(t.localStore,e,!0),o=new QA(e,i.Hi),a=o.Wu(i.documents),l=Ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Dy(t,n,u.Xu);const c=new KA(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function ex(t,e){const n=J(t),r=n.ic.get(e),s=n.rc.get(r.targetId);if(s.length>1)return n.rc.set(r.targetId,s.filter(i=>!xc(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await nf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),r1(n.remoteStore,r.targetId),rf(n,r.targetId)}).catch(Fa)):(rf(n,r.targetId),await nf(n.localStore,r.targetId,!0))}async function tx(t,e,n){const r=ux(t);try{const s=await function(i,o){const a=J(i),l=Xe.now(),u=o.reduce((d,f)=>d.add(f.key),ie());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=ir(),p=ie();return a.Gi.getEntries(d,u).next(y=>{f=y,f.forEach((w,g)=>{g.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(y=>{c=y;const w=[];for(const g of o){const m=CN(g,c.get(g.key).overlayedDocument);m!=null&&w.push(new Ds(g.key,m,Nw(m.value.mapValue),Kn.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(d,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:jw(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.hc[i.currentUser.toKey()];l||(l=new Ze(de)),l=l.insert(o,a),i.hc[i.currentUser.toKey()]=l}(r,s.batchId,n),await ja(r,s.changes),await Pc(r.remoteStore)}catch(s){const i=Qp(s,"Failed to persist write");n.reject(i)}}async function h1(t,e){const n=J(t);try{const r=await gA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.cc.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.nc=!0:s.modifiedDocuments.size>0?ve(o.nc):s.removedDocuments.size>0&&(ve(o.nc),o.nc=!1))}),await ja(n,r,e)}catch(r){await Fa(r)}}function xy(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=J(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&Kp(a)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nx(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.cc.get(e),i=s&&s.key;if(i){let o=new Ze(H.comparator);o=o.insert(i,ut.newNoDocument(i,ne.min()));const a=ie().add(i),l=new Mc(ne.min(),new Map,new Ye(de),o,a);await h1(r,l),r.uc=r.uc.remove(i),r.cc.delete(e),Xp(r)}else await nf(r.localStore,e,!1).then(()=>rf(r,e,n)).catch(Fa)}async function rx(t,e){const n=J(t),r=e.batch.batchId;try{const s=await mA(n.localStore,e);f1(n,r,null),d1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ja(n,s)}catch(s){await Fa(s)}}async function sx(t,e,n){const r=J(t);try{const s=await function(i,o){const a=J(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ve(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);f1(r,e,n),d1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ja(r,s)}catch(s){await Fa(s)}}function d1(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function f1(t,e,n){const r=J(t);let s=r.hc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function rf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||p1(t,r)})}function p1(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(r1(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),Xp(t))}function Dy(t,e,n){for(const r of n)r instanceof u1?(t.ac.addReference(r.key,e),ix(t,r)):r instanceof c1?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||p1(t,r.key)):Z()}function ix(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(q("SyncEngine","New document in limbo: "+n),t.oc.add(r),Xp(t))}function Xp(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new H(Re.fromString(e)),r=t.fc.next();t.cc.set(r,new XA(n)),t.uc=t.uc.insert(n,r),n1(t.remoteStore,new us(sr(Fp(n.path)),r,2,Rp.at))}}async function ja(t,e,n){const r=J(t),s=[],i=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,l)=>{o.push(r._c(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const c=zp.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.sc.Wo(s),await async function(a,l){const u=J(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>O.forEach(l,h=>O.forEach(h.Si,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>O.forEach(h.Di,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!Va(c))throw c;q("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ui.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);u.Ui=u.Ui.insert(h,p)}}}(r.localStore,i))}async function ox(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Zw(n.localStore,e);n.currentUser=e,function(s,i){s.lc.forEach(o=>{o.forEach(a=>{a.reject(new X(R.CANCELLED,i))})}),s.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ja(n,r.ji)}}function ax(t,e){const n=J(t),r=n.cc.get(e);if(r&&r.nc)return ie().add(r.key);{let s=ie();const i=n.rc.get(e);if(!i)return s;for(const o of i){const a=n.ic.get(o);s=s.unionWith(a.view.ju)}return s}}function lx(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ax.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nx.bind(null,e),e.sc.Wo=WA.bind(null,e.eventManager),e.sc.wc=HA.bind(null,e.eventManager),e}function ux(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sx.bind(null,e),e}class cx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return pA(this.persistence,new dA,e.initialUser,this.It)}yc(e){return new cA(jp.Bs,this.It)}gc(e){return new TA}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ox.bind(null,this.syncEngine),await UA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jA}createDatastore(e){const n=Rc(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new kA(s));var s;return function(i,o,a,l){return new AA(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>xy(this.syncEngine,a,0),o=Iy.C()?new Iy:new SA,new DA(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new YA(r,s,i,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=J(e);q("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Ba(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e,n){if(!n)throw new X(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fx(t,e,n,r){if(e===!0&&r===!0)throw new X(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Oy(t){if(!H.isDocumentKey(t))throw new X(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yp(t);throw new X(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;class Ry{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new X(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new FI;switch(n.type){case"gapi":const r=n.client;return new BI(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new X(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=My.get(e);n&&(q("ComponentProvider","Removing Datastore"),My.delete(e),n.terminate())}(this),Promise.resolve()}}function px(t,e,n,r={}){var s;const i=(t=ci(t,Zp))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&Gd("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=yt.MOCK_USER;else{o=TE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new X(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new yt(l)}t._authCredentials=new VI(new Sw(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class Lc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lc(this.firestore,e,this._query)}}class la extends Lc{constructor(e,n,r){super(e,n,Fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new H(e))}withConverter(e){return new la(this.firestore,e,this._path)}}function m1(t,e,...n){if(t=Go(t),arguments.length===1&&(e=Cw.R()),dx("doc","path",e),t instanceof Zp){const r=Re.fromString(e,...n);return Oy(r),new on(t,null,new H(r))}{if(!(t instanceof on||t instanceof la))throw new X(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Oy(r),new on(t.firestore,t instanceof la?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=Cw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{q("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(q("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yx(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Zw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function vx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _x(t);q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Ny(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ny(e.remoteStore,i)),t.onlineComponents=e}async function _x(t){return t.offlineComponents||(q("FirestoreClient","Using default OfflineComponentProvider"),await yx(t,new cx)),t.offlineComponents}async function g1(t){return t.onlineComponents||(q("FirestoreClient","Using default OnlineComponentProvider"),await vx(t,new hx)),t.onlineComponents}function wx(t){return g1(t).then(e=>e.syncEngine)}async function by(t){const e=await g1(t),n=e.eventManager;return n.onListen=ZA.bind(null,e.syncEngine),n.onUnlisten=ex.bind(null,e.syncEngine),n}class Tx{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new e1(this,"async_queue_retry"),this.Wc=()=>{const n=Ph();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Ph();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Ph();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new ls;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Va(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw rr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const s=Gp.createAndSchedule(this,e,n,r,i=>this.Yc(i));return this.qc.push(s),s}zc(){this.Kc&&Z()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function Py(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ou extends Zp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Tx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||v1(this),this._firestoreClient.terminate()}}function Sx(t,e){const n=typeof t=="object"?t:Ck(),r=typeof t=="string"?t:e||"(default)",s=_k(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vE("firestore");i&&px(s,...i)}return s}function y1(t){return t._firestoreClient||v1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function v1(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new ZI(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new gx(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ii(Ct.fromBase64String(e))}catch(n){throw new X(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ii(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=/^__.*__$/;class Ex{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new $a(e,this.data,n,this.fieldTransforms)}}function w1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class tm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=s,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new tm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Mu(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(w1(this.sa)&&Cx.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class kx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=r||Rc(e)}da(e,n,r,s=!1){return new tm({sa:e,methodName:n,fa:r,path:_t.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ix(t){const e=t._freezeSettings(),n=Rc(t._databaseId);return new kx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nx(t,e,n,r,s,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,s);E1("Data must be an object, but it was:",o,r);const a=S1(r,o);let l,u;if(i.merge)l=new Rn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=Ax(e,h,n);if(!o.contains(d))throw new X(R.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Dx(c,d)||c.push(d)}l=new Rn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new Ex(new tn(a),l,u)}function T1(t,e){if(C1(t=Go(t)))return E1("Unsupported field value:",e,t),S1(t,e);if(t instanceof _1)return function(n,r){if(!w1(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=T1(o,r.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Go(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return yN(r.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Xe.fromDate(n);return{timestampValue:xu(r.It,s)}}if(n instanceof Xe){const s=new Xe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xu(r.It,s)}}if(n instanceof em)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ii)return{bytesValue:Gw(r.It,n._byteString)};if(n instanceof on){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$p(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${Yp(n)}`)}(t,e)}function S1(t,e){const n={};return Ew(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const i=T1(s,e.ra(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function C1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof em||t instanceof Ii||t instanceof on||t instanceof _1)}function E1(t,e,n){if(!C1(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Yp(n);throw r==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function Ax(t,e,n){if((e=Go(e))instanceof Jp)return e._internalPath;if(typeof e=="string")return k1(t,e);throw Mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const xx=new RegExp("[~\\*/\\[\\]]");function k1(t,e,n){if(e.search(xx)>=0)throw Mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jp(...e.split("."))._internalPath}catch{throw Mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(R.INVALID_ARGUMENT,a+t+l)}function Dx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ox(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(N1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ox extends I1{data(){return super.data()}}function N1(t,e){return typeof e=="string"?k1(t,e):e instanceof Jp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Z()}}convertObject(e,n){const r={};return Ui(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new em(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Iw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ve(Yw(r));const s=new ra(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||rr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A1 extends I1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(N1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bl extends A1{data(e={}){return super.data(e)}}class Px{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bl(this._firestore,this._userDataWriter,r.key,r,new fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new Bl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new fo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Bl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new fo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:Lx(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Lx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class x1 extends Rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function Fx(t,e,n){t=ci(t,on);const r=ci(t.firestore,Ou),s=bx(t.converter,e,n);return $x(r,[Nx(Ix(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kn.none())])}function Vx(t,...e){var n,r,s;t=Go(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Py(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Py(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,c;if(t instanceof on)u=ci(t.firestore,Ou),c=Fp(t._key.path),l={next:h=>{e[o]&&e[o](Ux(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ci(t,Lc);u=ci(h.firestore,Ou),c=h._query;const d=new x1(u);l={next:f=>{e[o]&&e[o](new Px(u,d,h,f))},error:e[o+1],complete:e[o+2]},Mx(t._query)}return function(h,d,f,p){const y=new mx(p),w=new GA(d,y,f);return h.asyncQueue.enqueueAndForget(async()=>zA(await by(h),w)),()=>{y.bc(),h.asyncQueue.enqueueAndForget(async()=>qA(await by(h),w))}}(y1(u),c,a,l)}function $x(t,e){return function(n,r){const s=new ls;return n.asyncQueue.enqueueAndForget(async()=>tx(await wx(n),r,s)),s.promise}(y1(t),e)}function Ux(t,e,n){const r=n.docs.get(e._key),s=new x1(t);return new A1(t,s,e._key,r,new fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){$i=n})(Sk),gu(new Qo("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Ou(new $I(n.getProvider("auth-internal")),new zI(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new X(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ai(iy,"3.7.2",t),ai(iy,"3.7.2","esm2017")})();const Bx={apiKey:"AIzaSyDe0U2cocfjEPh7jOYXvfK3FE-aGRcLykA",authDomain:"daw-compmusic-2022.firebaseapp.com",projectId:"daw-compmusic-2022",storageBucket:"daw-compmusic-2022.appspot.com",messagingSenderId:"176901734090",appId:"1:176901734090:web:10a622ede20c0f06a5be33"},jx=y_(Bx),D1=Sx(jx);async function zx(t){if(!t)return;const e=t.flat(),n=await m1(D1,"active","active");await Fx(n,{active:e})}const O1="14.7.77",Ly=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Fy=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),sf=(t,e)=>({startTime:e,type:"setValue",value:t}),M1=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),R1=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),ei=t=>t.type==="exponentialRampToValue",Ru=t=>t.type==="linearRampToValue",yr=t=>ei(t)||Ru(t),nm=t=>t.type==="setValue",jn=t=>t.type==="setValueCurve",bu=(t,e,n,r)=>{const s=t[e];return s===void 0?r:yr(s)||nm(s)?s.value:jn(s)?s.values[s.values.length-1]:R1(n,bu(t,e-1,s.startTime,r),s)},Vy=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:yr(n)?[n.endTime,n.value]:nm(n)?[n.startTime,n.value]:jn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,bu(t,e-1,n.startTime,s)],of=t=>t.type==="cancelAndHold",af=t=>t.type==="cancelScheduledValues",fr=t=>of(t)||af(t)?t.cancelTime:ei(t)||Ru(t)?t.endTime:t.startTime,$y=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,Uy=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),qx=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},Wx=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return qx(r,s)},Sl=t=>t.type==="setTarget";class Hx{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=fr(e);if(of(e)||af(e)){const r=this._automationEvents.findIndex(i=>af(e)&&jn(i)?i.startTime+i.duration>=n:fr(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),of(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&yr(s)){if(Sl(i))throw new Error("The internal list is malformed.");const o=jn(i)?i.startTime+i.duration:fr(i),a=jn(i)?i.values[i.values.length-1]:i.value,l=ei(s)?$y(n,o,a,s):Uy(n,o,a,s),u=ei(s)?Ly(l,n,this._currenTime):Fy(l,n,this._currenTime);this._automationEvents.push(u)}i!==void 0&&Sl(i)&&this._automationEvents.push(sf(this.getValue(n),n)),i!==void 0&&jn(i)&&i.startTime+i.duration>n&&(this._automationEvents[this._automationEvents.length-1]=M1(new Float32Array([6,7]),i.startTime,n-i.startTime))}}else{const r=this._automationEvents.findIndex(o=>fr(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&jn(s)&&fr(s)+s.duration>n)return!1;const i=ei(e)?Ly(e.value,e.endTime,this._currenTime):Ru(e)?Fy(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(jn(e)&&n+e.duration>fr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>fr(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];Sl(s)&&r.unshift(sf(bu(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>fr(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&Sl(i)&&(r===void 0||!yr(r)||r.insertTime>e))return R1(e,bu(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&nm(i)&&(r===void 0||!yr(r)))return i.value;if(i!==void 0&&jn(i)&&(r===void 0||!yr(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Wx(e,i):i.values[i.values.length-1];if(i!==void 0&&yr(i)&&(r===void 0||!yr(r)))return i.value;if(r!==void 0&&ei(r)){const[o,a]=Vy(this._automationEvents,s,i,r,this._defaultValue);return $y(e,o,a,r)}if(r!==void 0&&Ru(r)){const[o,a]=Vy(this._automationEvents,s,i,r,this._defaultValue);return Uy(e,o,a,r)}return this._defaultValue}}const Gx=t=>({cancelTime:t,type:"cancelAndHold"}),Qx=t=>({cancelTime:t,type:"cancelScheduledValues"}),Kx=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),Xx=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),Yx=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),Zx=()=>new DOMException("","AbortError"),Jx=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)},eD=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},tD=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Ni=new WeakSet,b1=new WeakMap,rm=new WeakMap,P1=new WeakMap,sm=new WeakMap,Fc=new WeakMap,L1=new WeakMap,lf=new WeakMap,uf=new WeakMap,cf=new WeakMap,F1={construct(){return F1}},nD=t=>{try{const e=new Proxy(t,F1);new e}catch{return!1}return!0},By=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,jy=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(By);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(By)}return[n.join(";"),r]},zy=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},qy=t=>{if(!nD(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},rD=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>{let f=0;return(p,y,w={credentials:"omit"})=>{const g=c.get(p);if(g!==void 0&&g.has(y))return Promise.resolve();const m=u.get(p);if(m!==void 0){const _=m.get(y);if(_!==void 0)return _}const v=i(p),T=v.audioWorklet===void 0?s(y).then(([_,S])=>{const[C,E]=jy(_,S),N=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}
})})(window,'_AWGS')`;return n(N)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;r(v.currentTime,v.sampleRate,()=>_(class{},void 0,(S,C)=>{if(S.trim()==="")throw e();const E=uf.get(v);if(E!==void 0){if(E.has(S))throw e();qy(C),zy(C.parameterDescriptors),E.set(S,C)}else qy(C),zy(C.parameterDescriptors),uf.set(v,new Map([[S,C]]))},v.sampleRate,void 0,void 0))}):Promise.all([s(y),Promise.resolve(t(h,h))]).then(([[_,S],C])=>{const E=f+1;f=E;const[N,k]=jy(_,S),P=`${N};((AudioWorkletProcessor,registerProcessor)=>{${k}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`,G=new Blob([P],{type:"application/javascript; charset=utf-8"}),$=URL.createObjectURL(G);return v.audioWorklet.addModule($,w).then(()=>{if(a(v))return v;const j=o(v);return j.audioWorklet.addModule($,w).then(()=>j)}).then(j=>{if(l===null)throw new SyntaxError;try{new l(j,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL($))});return m===void 0?u.set(p,new Map([[y,T]])):m.set(y,T),T.then(()=>{const _=c.get(p);_===void 0?c.set(p,new Set([y])):_.add(y)}).finally(()=>{const _=u.get(p);_!==void 0&&_.delete(y)}),T}},Tn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Vc=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},V1=(t,e,n,r)=>{const s=Tn(t,e),i=Vc(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},za=t=>Tn(L1,t),Ai=t=>{if(Ni.has(t))throw new Error("The AudioNode is already stored.");Ni.add(t),za(t).forEach(e=>e(!0))},$1=t=>"port"in t,qa=t=>{if(!Ni.has(t))throw new Error("The AudioNode is not stored.");Ni.delete(t),za(t).forEach(e=>e(!1))},hf=(t,e)=>{!$1(t)&&e.every(n=>n.size===0)&&qa(t)},sD=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>{const f=new WeakMap;return(p,y,w,g,m)=>{const{activeInputs:v,passiveInputs:T}=i(y),{outputs:_}=i(p),S=a(p),C=E=>{const N=l(y),k=l(p);if(E){const A=V1(T,p,w,g);t(v,p,A,!1),!m&&!h(p)&&n(k,N,w,g),d(y)&&Ai(y)}else{const A=r(v,p,w,g);e(T,g,A,!1),!m&&!h(p)&&s(k,N,w,g);const I=o(y);if(I===0)c(y)&&hf(y,v);else{const F=f.get(y);F!==void 0&&clearTimeout(F),f.set(y,setTimeout(()=>{c(y)&&hf(y,v)},I*1e3))}}};return u(_,[y,w,g],E=>E[0]===y&&E[1]===w&&E[2]===g,!0)?(S.add(C),c(p)?t(v,p,[w,g,C],!0):e(T,g,[p,w,C],!0),!0):!1}},iD=t=>(e,n,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],l=>l[0]===s&&l[1]===n,o)},oD=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},aD=t=>(e,n)=>{t(e).add(n)},lD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},uD=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=s(a),c={...lD,...l},h=r(u,c),d=i(u)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Et=(t,e)=>t.context===e,cD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Et(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,u)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Pu=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Fn=()=>new DOMException("","IndexSizeError"),im=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Fn():r}})(t.getChannelData)},hD={numberOfChannels:1},dD=(t,e,n,r,s,i,o,a)=>{let l=null;return class U1{constructor(c){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...hD,...c};l===null&&(l=new s(1,1,44100));const p=r!==null&&e(i,i)?new r({length:h,numberOfChannels:d,sampleRate:f}):l.createBuffer(d,h,f);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),im(p)):e(Pu,()=>Pu(p))||a(p),t.add(p),p}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===U1.prototype||t.has(c)}}},Lt=-34028234663852886e22,Nt=-Lt,Yn=t=>Ni.has(t),fD={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},pD=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...fD,...c},f=s(h,d),p=o(h),y=p?e():null;super(u,!1,f,y),this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,Nt,Lt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const c=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=c;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===c?u:h}get playbackRate(){return this._playbackRate}start(u=0,c=0,h){if(this._nativeAudioBufferSourceNode.start(u,c,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[u,c]:[u,c,h]),this.context.state!=="closed"){Ai(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Yn(this)&&qa(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},mD=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(u,c)=>{let h=n(u);const d=Et(h,c);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(c,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(c,h),d?await t(c,u.playbackRate,h.playbackRate):await r(c,u.playbackRate,h.playbackRate),await s(u,c,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):l(u,c)}}},gD=t=>"playbackRate"in t,yD=t=>"frequency"in t&&"gain"in t,vD=t=>"offset"in t,_D=t=>!("frequency"in t)&&"gain"in t,wD=t=>"detune"in t&&"frequency"in t,TD=t=>"pan"in t,xt=t=>Tn(b1,t),Wa=t=>Tn(P1,t),df=(t,e)=>{const{activeInputs:n}=xt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||df(i,[...e,t])}));const r=gD(t)?[t.playbackRate]:$1(t)?Array.from(t.parameters.values()):yD(t)?[t.Q,t.detune,t.frequency,t.gain]:vD(t)?[t.offset]:_D(t)?[t.gain]:wD(t)?[t.detune,t.frequency]:TD(t)?[t.pan]:[];for(const s of r){const i=Wa(s);i!==void 0&&i.activeInputs.forEach(([o])=>df(o,e))}Yn(t)&&qa(t)},B1=t=>{df(t.destination,[])},SD=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),CD=(t,e,n,r,s,i,o,a,l)=>class extends t{constructor(c={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new l(c)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw r();if(!SD(c.latencyHint))throw new TypeError(`The provided value '${c.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(c.sampleRate!==void 0&&h.sampleRate!==c.sampleRate)throw n();super(h,2);const{latencyHint:d}=c,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,l.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),B1(this)}))}createMediaElementSource(c){return new s(this,{mediaElement:c})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(c){return new o(this,{mediaStream:c})}createMediaStreamTrackSource(c){return new a(this,{mediaStreamTrack:c})}resume(){return this._state==="suspended"?new Promise((c,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?c():this.resume().then(c,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(c=>{throw c===void 0||c.code===15?e():c})}suspend(){return this._nativeAudioContext.suspend().catch(c=>{throw c===void 0?e():c})}},ED=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d=o(h),f=s(h,c,d),p=d?e(a):null;super(u,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},kD=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},ID=(t,e,n,r,s,i,o,a)=>(l,u)=>{const c=u.listener,h=()=>{const _=new Float32Array(1),S=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(u);let E=!1,N=[0,0,-1,0,1,0],k=[0,0,0];const A=()=>{if(E)return;E=!0;const G=r(u,256,9,0);G.onaudioprocess=({inputBuffer:$})=>{const j=[i($,_,0),i($,_,1),i($,_,2),i($,_,3),i($,_,4),i($,_,5)];j.some((M,b)=>M!==N[b])&&(c.setOrientation(...j),N=j);const x=[i($,_,6),i($,_,7),i($,_,8)];x.some((M,b)=>M!==k[b])&&(c.setPosition(...x),k=x)},S.connect(G)},I=G=>$=>{$!==N[G]&&(N[G]=$,c.setOrientation(...N))},F=G=>$=>{$!==k[G]&&(k[G]=$,c.setPosition(...k))},P=(G,$,j)=>{const x=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$});x.connect(S,0,G),x.start(),Object.defineProperty(x.offset,"defaultValue",{get(){return $}});const M=t({context:l},C,x.offset,Nt,Lt);return a(M,"value",b=>()=>b.call(M),b=>U=>{try{b.call(M,U)}catch(Q){if(Q.code!==9)throw Q}A(),C&&j(U)}),M.cancelAndHoldAtTime=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.cancelAndHoldAtTime),M.cancelScheduledValues=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.cancelScheduledValues),M.exponentialRampToValueAtTime=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.exponentialRampToValueAtTime),M.linearRampToValueAtTime=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.linearRampToValueAtTime),M.setTargetAtTime=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.setTargetAtTime),M.setValueAtTime=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.setValueAtTime),M.setValueCurveAtTime=(b=>C?()=>{throw s()}:(...U)=>{const Q=b.apply(M,U);return A(),Q})(M.setValueCurveAtTime),M};return{forwardX:P(0,0,I(0)),forwardY:P(1,0,I(1)),forwardZ:P(2,-1,I(2)),positionX:P(6,0,F(0)),positionY:P(7,0,F(1)),positionZ:P(8,0,F(2)),upX:P(3,0,I(3)),upY:P(4,1,I(4)),upZ:P(5,0,I(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:y,positionY:w,positionZ:g,upX:m,upY:v,upZ:T}=c.forwardX===void 0?h():c;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return y},get positionY(){return w},get positionZ(){return g},get upX(){return m},get upY(){return v},get upZ(){return T}}},Lu=t=>"context"in t,Ha=t=>Lu(t[0]),Ms=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Wy=(t,e,[n,r],s)=>{Ms(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},Hy=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):Ms(i,[n,r],o=>o[0]===n,s)},zi=t=>"inputs"in t,Fu=(t,e,n,r)=>{if(zi(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},j1=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},ND=(t,e,n)=>Vc(t,r=>r[0]===e&&r[1]===n),z1=(t,e)=>{if(!za(t).delete(e))throw new Error("Missing the expected event listener.")},q1=(t,e,n)=>{const r=Tn(t,e),s=Vc(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},Vu=(t,e,n,r)=>{zi(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Se=t=>Tn(rm,t),ua=t=>Tn(sm,t),ws=t=>lf.has(t),jl=t=>!Ni.has(t),Gy=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=l=>{const u=l.inputBuffer.getChannelData(0);Array.prototype.some.call(u,c=>c===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Lh=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},$u=t=>"context"in t,AD=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=$u(r)?n(r,s,i):n(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(l=>l.input!==i||l.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(u=>u.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==s&&(l.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{$u(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},xD=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Wa(e),{outputs:o}=xt(t),a=za(t),l=u=>{const c=Se(t),h=ua(e);if(u){const d=q1(i,t,n);Wy(s,t,d,!1),!r&&!ws(t)&&c.connect(h,n)}else{const d=ND(s,t,n);Hy(i,d,!1),!r&&!ws(t)&&c.disconnect(h,n)}};return Ms(o,[e,n],u=>u[0]===e&&u[1]===n,!0)?(a.add(l),Yn(t)?Wy(s,t,[n,l],!0):Hy(i,[t,n,l],!0),!0):!1},DD=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=xt(e),o=j1(s[r],t,n);return o===null?[V1(i,t,n,r)[2],!1]:[o[2],!0]},OD=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=Wa(e),i=j1(r,t,n);return i===null?[q1(s,t,n)[1],!1]:[i[2],!0]},om=(t,e,n,r,s)=>{const[i,o]=DD(t,n,r,s);if(i!==null&&(z1(t,i),o&&!e&&!ws(t)&&Vu(Se(t),Se(n),r,s)),Yn(n)){const{activeInputs:a}=xt(n);hf(n,a)}},am=(t,e,n,r)=>{const[s,i]=OD(t,n,r);s!==null&&(z1(t,s),i&&!e&&!ws(t)&&Se(t).disconnect(ua(n),r))},MD=(t,e)=>{const n=xt(t),r=[];for(const s of n.outputs)Ha(s)?om(t,e,...s):am(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},RD=(t,e,n)=>{const r=xt(t),s=[];for(const i of r.outputs)i[1]===n&&(Ha(i)?om(t,e,...i):am(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},bD=(t,e,n,r,s)=>{const i=xt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(Ha(o)?om(t,e,...o):am(t,e,...o),i.outputs.delete(o),o[0]))},PD=(t,e,n,r,s,i,o,a,l,u,c,h,d,f,p,y)=>class extends u{constructor(g,m,v,T){super(v),this._context=g,this._nativeAudioNode=v;const _=c(g);h(_)&&n(Gy,()=>Gy(_,y))!==!0&&AD(v),rm.set(this,v),L1.set(this,new Set),g.state!=="closed"&&m&&Ai(this),t(this,T,v)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(g){this._nativeAudioNode.channelCount=g}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(g){this._nativeAudioNode.channelCountMode=g}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(g){this._nativeAudioNode.channelInterpretation=g}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(g,m=0,v=0){if(m<0||m>=this._nativeAudioNode.numberOfOutputs)throw s();const T=c(this._context),_=p(T);if(d(g)||f(g))throw i();if(Lu(g)){const E=Se(g);try{const k=Fu(this._nativeAudioNode,E,m,v),A=jl(this);(_||A)&&this._nativeAudioNode.disconnect(...k),this.context.state!=="closed"&&!A&&jl(g)&&Ai(g)}catch(k){throw k.code===12?i():k}if(e(this,g,m,v,_)){const k=l([this],g);Lh(k,r(_))}return g}const S=ua(g);if(S.name==="playbackRate"&&S.maxValue===1024)throw o();try{this._nativeAudioNode.connect(S,m),(_||jl(this))&&this._nativeAudioNode.disconnect(S,m)}catch(E){throw E.code===12?i():E}if(xD(this,g,m,_)){const E=l([this],g);Lh(E,r(_))}}disconnect(g,m,v){let T;const _=c(this._context),S=p(_);if(g===void 0)T=MD(this,S);else if(typeof g=="number"){if(g<0||g>=this.numberOfOutputs)throw s();T=RD(this,S,g)}else{if(m!==void 0&&(m<0||m>=this.numberOfOutputs)||Lu(g)&&v!==void 0&&(v<0||v>=g.numberOfInputs))throw s();if(T=bD(this,S,g,m,v),T.length===0)throw i()}for(const C of T){const E=l([this],C);Lh(E,a)}}},LD=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>(f,p,y,w=null,g=null)=>{const m=new Hx(y.defaultValue),v=p?r(m):null,T={get defaultValue(){return y.defaultValue},get maxValue(){return w===null?y.maxValue:w},get minValue(){return g===null?y.minValue:g},get value(){return y.value},set value(_){y.value=_,T.setValueAtTime(_,f.context.currentTime)},cancelAndHoldAtTime(_){if(typeof y.cancelAndHoldAtTime=="function")v===null&&m.flush(f.context.currentTime),m.add(s(_)),y.cancelAndHoldAtTime(_);else{const S=Array.from(m).pop();v===null&&m.flush(f.context.currentTime),m.add(s(_));const C=Array.from(m).pop();y.cancelScheduledValues(_),S!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?y.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?y.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&y.setValueCurveAtTime(C.values,C.startTime,C.duration))}return T},cancelScheduledValues(_){return v===null&&m.flush(f.context.currentTime),m.add(i(_)),y.cancelScheduledValues(_),T},exponentialRampToValueAtTime(_,S){if(_===0)throw new RangeError;if(!Number.isFinite(S)||S<0)throw new RangeError;return v===null&&m.flush(f.context.currentTime),m.add(o(_,S)),y.exponentialRampToValueAtTime(_,S),T},linearRampToValueAtTime(_,S){return v===null&&m.flush(f.context.currentTime),m.add(a(_,S)),y.linearRampToValueAtTime(_,S),T},setTargetAtTime(_,S,C){return v===null&&m.flush(f.context.currentTime),m.add(l(_,S,C)),y.setTargetAtTime(_,S,C),T},setValueAtTime(_,S){return v===null&&m.flush(f.context.currentTime),m.add(u(_,S)),y.setValueAtTime(_,S),T},setValueCurveAtTime(_,S,C){const E=_ instanceof Float32Array?_:new Float32Array(_);if(h!==null&&h.name==="webkitAudioContext"){const N=S+C,k=f.context.sampleRate,A=Math.ceil(S*k),I=Math.floor(N*k),F=I-A,P=new Float32Array(F);for(let $=0;$<F;$+=1){const j=(E.length-1)/C*((A+$)/k-S),x=Math.floor(j),M=Math.ceil(j);P[$]=x===M?E[x]:(1-(j-x))*E[x]+(1-(M-j))*E[M]}v===null&&m.flush(f.context.currentTime),m.add(c(P,S,C)),y.setValueCurveAtTime(P,S,C);const G=I/k;G<N&&d(T,P[P.length-1],G),d(T,E[E.length-1],N)}else v===null&&m.flush(f.context.currentTime),m.add(c(E,S,C)),y.setValueCurveAtTime(E,S,C);return T}};return n.set(T,y),e.set(T,f),t(T,v),T},FD=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class W1{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const VD={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},$D=(t,e,n,r,s,i,o,a,l,u,c,h,d,f)=>class extends e{constructor(y,w,g){var m;const v=a(y),T=l(v),_=c({...VD,...g});d(_);const S=uf.get(v),C=S==null?void 0:S.get(w),E=T||v.state!=="closed"?v:(m=o(v))!==null&&m!==void 0?m:v,N=s(E,T?null:y.baseLatency,u,w,C,_),k=T?r(w,_,C):null;super(y,!0,N,k);const A=[];N.parameters.forEach((F,P)=>{const G=n(this,T,F);A.push([P,G])}),this._nativeAudioWorkletNode=N,this._onprocessorerror=null,this._parameters=new W1(A),T&&t(v,this);const{activeInputs:I}=i(this);h(N,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){const w=typeof y=="function"?f(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=w;const g=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=g!==null&&g===w?y:g}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Uu(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const H1=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},Bu=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},UD=(t,e)=>{const n=Tn(cf,t),r=Se(e);return Tn(n,r)},BD=async(t,e,n,r,s,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,u=s.reduce((w,g)=>w+g,0),c=u===0?null:n.createBuffer(u,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=xt(t),d=await UD(n,t),f=Bu(r.numberOfInputs,r.channelCount),p=Bu(r.numberOfOutputs,s),y=Array.from(t.parameters.keys()).reduce((w,g)=>({...w,[g]:new Float32Array(128)}),{});for(let w=0;w<a;w+=128){if(r.numberOfInputs>0&&e!==null)for(let g=0;g<r.numberOfInputs;g+=1)for(let m=0;m<r.channelCount;m+=1)Uu(e,f[g],m,m,w);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:g},m)=>{Uu(e,y,g,l+m,w)});for(let g=0;g<r.numberOfInputs;g+=1)for(let m=0;m<s[g];m+=1)p[g][m].byteLength===0&&(p[g][m]=new Float32Array(128));try{const g=f.map((v,T)=>h.activeInputs[T].size===0?[]:v),m=o(w/n.sampleRate,n.sampleRate,()=>d.process(g,p,y));if(c!==null)for(let v=0,T=0;v<r.numberOfOutputs;v+=1){for(let _=0;_<s[v];_+=1)H1(c,p[v],_,T+_,w);T+=s[v]}if(!m)break}catch(g){t.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return c},jD=(t,e,n,r,s,i,o,a,l,u,c,h,d,f,p,y)=>(w,g,m)=>{const v=new WeakMap;let T=null;const _=async(S,C)=>{let E=c(S),N=null;const k=Et(E,C),A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(h===null){const I=A.reduce(($,j)=>$+j,0),F=s(C,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),P=[];for(let $=0;$<S.numberOfOutputs;$+=1)P.push(r(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[$]}));const G=o(C,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});G.connect=e.bind(null,P),G.disconnect=l.bind(null,P),N=[F,P,G]}else k||(E=new h(C,w));if(v.set(C,N===null?E:N[2]),N!==null){if(T===null){if(m===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=S.channelCount*S.numberOfInputs,x=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length,M=j+x;T=BD(S,M===0?null:await(async()=>{const U=new d(M,Math.ceil(S.context.length/128)*128,C.sampleRate),Q=[],tt=[];for(let ue=0;ue<g.numberOfInputs;ue+=1)Q.push(o(U,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),tt.push(s(U,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const Fe=await Promise.all(Array.from(S.parameters.values()).map(async ue=>{const je=i(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ue.value});return await f(U,ue,je.offset),je})),ee=r(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,j+x)});for(let ue=0;ue<g.numberOfInputs;ue+=1){Q[ue].connect(tt[ue]);for(let je=0;je<g.channelCount;je+=1)tt[ue].connect(ee,je,ue*g.channelCount+je)}for(const[ue,je]of Fe.entries())je.connect(ee,0,j+ue),je.start(0);return ee.connect(U.destination),await Promise.all(Q.map(ue=>p(S,U,ue))),y(U)})(),C,g,A,m,u)}const I=await T,F=n(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[P,G,$]=N;I!==null&&(F.buffer=I,F.start(0)),F.connect(P);for(let j=0,x=0;j<S.numberOfOutputs;j+=1){const M=G[j];for(let b=0;b<A[j];b+=1)P.connect(M,x+b,b);x+=A[j]}return $}if(k)for(const[I,F]of S.parameters.entries())await t(C,F,E.parameters.get(I));else for(const[I,F]of S.parameters.entries())await f(C,F,E.parameters.get(I));return await p(S,C,E),E};return{render(S,C){a(C,S);const E=v.get(C);return E!==void 0?Promise.resolve(E):_(S,C)}}},zD=(t,e,n,r,s,i,o,a,l,u,c,h,d,f,p,y,w,g,m,v)=>class extends p{constructor(_,S){super(_,S),this._nativeContext=_,this._audioWorklet=t===void 0?void 0:{addModule:(C,E)=>t(this,C,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(_,S,C){return new n({length:S,numberOfChannels:_,sampleRate:C})}createBufferSource(){return new r(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(_=1){return new c(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(_,S){return new f(this,{feedback:S,feedforward:_})}createOscillator(){return new y(this)}createPanner(){return new w(this)}createPeriodicWave(_,S,C={disableNormalization:!1}){return new g(this,{...C,imag:S,real:_})}createStereoPanner(){return new m(this)}createWaveShaper(){return new v(this)}decodeAudioData(_,S,C){return u(this._nativeContext,_).then(E=>(typeof S=="function"&&S(E),E),E=>{throw typeof C=="function"&&C(E),E})}},qD={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},WD=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...qD,...c},f=s(h,d),p=o(h),y=p?n():null;super(u,!1,f,y),this._Q=e(this,p,f.Q,Nt,Lt),this._detune=e(this,p,f.detune,1200*Math.log2(Nt),-1200*Math.log2(Nt)),this._frequency=e(this,p,f.frequency,u.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Nt),Lt),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,c,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,c,h)}catch(d){throw d.code===11?r():d}if(u.length!==c.length||c.length!==h.length)throw r()}},HD=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Et(u,l);if(!c){const h={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(l,h)}return i.set(l,u),c?(await t(l,a.Q,u.Q),await t(l,a.detune,u.detune),await t(l,a.frequency,u.frequency),await t(l,a.gain,u.gain)):(await r(l,a.Q,u.Q),await r(l,a.detune,u.detune),await r(l,a.frequency,u.frequency),await r(l,a.gain,u.gain)),await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},GD=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},QD={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},KD=(t,e,n,r,s)=>class extends t{constructor(o,a){const l=r(o),u={...QD,...a},c=n(l,u),h=s(l)?e():null;super(o,!1,c,h)}},XD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Et(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,u)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},YD={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ZD=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=r(a),c=i({...YD,...l}),h=n(u,c),d=s(u)?e():null;super(a,!1,h,d)}},JD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Et(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,u)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},eO=t=>(e,n,r)=>t(n,e,r),tO=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return $u(n)?i.connect(n,0,s):i.connect(n,0)},nO=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},rO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},sO=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...rO,...u},d=r(c,h),f=i(c),p=f?n():null;super(l,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Nt,Lt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=u;const c=this._nativeConstantSourceNode.onended;this._onended=c!==null&&c===u?l:c}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Ai(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),Yn(this)&&qa(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},iO=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(u,c)=>{let h=n(u);const d=Et(h,c);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(c,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(c,h),d?await t(c,u.offset,h.offset):await r(c,u.offset,h.offset),await s(u,c,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):l(u,c)}}},oO=t=>e=>(t[0]=e,t[0]),aO={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},lO=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=r(a),c={...aO,...l},h=n(u,c),f=s(u)?e():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,c.buffer!==null&&i(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},uO=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Et(a,o)){const u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,u)}return r.set(o,a),zi(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},cO=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},hO=()=>new DOMException("","DataCloneError"),Qy=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}finally{s()}})},dO=(t,e,n,r,s,i,o,a,l,u,c)=>(h,d)=>{const f=o(h)?h:i(h);if(s.has(d)){const p=n();return Promise.reject(p)}try{s.add(d)}catch{}return e(l,()=>l(f))?f.decodeAudioData(d).then(p=>(Qy(d).catch(()=>{}),e(a,()=>a(p))||c(p),t.add(p),p)):new Promise((p,y)=>{const w=async()=>{try{await Qy(d)}catch{}},g=m=>{y(m),w()};try{f.decodeAudioData(d,m=>{typeof m.copyFromChannel!="function"&&(u(m),im(m)),t.add(m),w().then(()=>p(m))},m=>{g(m===null?r():m)})}catch(m){g(m)}})},fO=(t,e,n,r,s,i,o,a)=>(l,u)=>{const c=e.get(l);if(c===void 0)throw new Error("Missing the expected cycle count.");const h=i(l.context),d=a(h);if(c===u){if(e.delete(l),!d&&o(l)){const f=r(l),{outputs:p}=n(l);for(const y of p)if(Ha(y)){const w=r(y[0]);t(f,w,y[1],y[2])}else{const w=s(y[0]);f.connect(w,y[1])}}}else e.set(l,c-u)},pO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},mO=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...pO,...u},d=r(c,h),f=i(c),p=f?n(h.maxDelayTime):null;super(l,!1,d,p),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},gO=(t,e,n,r,s)=>i=>{const o=new WeakMap,a=async(l,u)=>{let c=n(l);const h=Et(c,u);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:i};c=e(u,d)}return o.set(u,c),h?await t(u,l.delayTime,c.delayTime):await r(u,l.delayTime,c.delayTime),await s(l,u,c),c};return{render(l,u){const c=o.get(u);return c!==void 0?Promise.resolve(c):a(l,u)}}},yO=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),vO=t=>(e,n)=>{t(e).delete(n)},_O=t=>"delayTime"in t,wO=(t,e,n)=>function r(s,i){const o=Lu(i)?i:n(t,i);if(_O(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...s,o],l[0])).reduce((l,u)=>l.concat(u),[])},Cl=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},TO=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Cl(t,e,n).disconnect():$u(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?Cl(t,e,r).disconnect(n,0):Cl(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):Cl(t,e,r).disconnect(n,0),SO={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},CO=(t,e,n,r,s,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...SO,...c},f=r(h,d),p=o(h),y=p?n():null;super(u,!1,f,y),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const c=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=c,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const c=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=c,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},EO=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Et(u,l);if(!c){const h={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(l,h)}return i.set(l,u),c?(await t(l,a.attack,u.attack),await t(l,a.knee,u.knee),await t(l,a.ratio,u.ratio),await t(l,a.release,u.release),await t(l,a.threshold,u.threshold)):(await r(l,a.attack,u.attack),await r(l,a.knee,u.knee),await r(l,a.ratio,u.ratio),await r(l,a.release,u.release),await r(l,a.threshold,u.threshold)),await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},kO=()=>new DOMException("","EncodingError"),IO=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(c,h,d,f,p)=>{if(h===a||h===t.location.href&&d===1&&f===1)return u(),r(p),!1;if(l!==null)return l(c,h,d,f,p)},i.onerror=()=>{u(),r(new SyntaxError)},i.onload=()=>{u(),n()},i.src=a,i.type="module",s.appendChild(i)}}),NO=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},AO=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},xO=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},DO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},OO=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=s(a),c={...DO,...l},h=r(u,c),d=i(u),f=d?n():null;super(a,!1,h,f),this._gain=e(this,d,h.gain,Nt,Lt)}get gain(){return this._gain}},MO=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Et(u,l);if(!c){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(l,h)}return i.set(l,u),c?await t(l,a.gain,u.gain):await r(l,a.gain,u.gain),await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},RO=(t,e)=>n=>e(t,n),bO=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},PO=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},LO=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},FO=t=>e=>t.get(e),it=()=>new DOMException("","InvalidStateError"),VO=t=>e=>{const n=t.get(e);if(n===void 0)throw it();return n},$O=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},UO=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},$c=()=>new DOMException("","InvalidAccessError"),BO=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw $c();return e.call(t,n,r,s)})(t.getFrequencyResponse)},jO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},zO=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=r(a),c=s(u),h={...jO,...l},d=e(u,c?null:a.baseLatency,h),f=c?n(h.feedback,h.feedforward):null;super(a,!1,d,f),BO(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,l,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,u)}},G1=(t,e,n,r,s,i,o,a,l,u,c)=>{const h=u.length;let d=a;for(let f=0;f<h;f+=1){let p=n[0]*u[f];for(let y=1;y<s;y+=1){const w=d-y&l-1;p+=n[y]*i[w],p-=t[y]*o[w]}for(let y=s;y<r;y+=1)p+=n[y]*i[d-y&l-1];for(let y=s;y<e;y+=1)p-=t[y]*o[d-y&l-1];i[d]=u[f],o[d]=p,d=d+1&l-1,c[f]=p}return d},qO=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,l=Math.min(o,a);if(s[0]!==1){for(let p=0;p<o;p+=1)i[p]/=s[0];for(let p=1;p<a;p+=1)s[p]/=s[0]}const u=32,c=new Float32Array(u),h=new Float32Array(u),d=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){const y=t.getChannelData(p),w=d.getChannelData(p);c.fill(0),h.fill(0),G1(s,o,i,a,l,c,h,0,u,y,w)}return d},WO=(t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let l=null;const u=async(c,h)=>{let d=null,f=e(c);const p=Et(f,h);if(h.createIIRFilter===void 0?d=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new n(c.context.destination.channelCount,c.context.length,h.sampleRate);l=(async()=>{await r(c,w,w.destination);const g=await s(w);return qO(g,h,i,o)})()}const y=await l;return d.buffer=y,d.start(0),d}return await r(c,h,f),f};return{render(c,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):u(c,h)}}},HO=(t,e,n,r,s,i)=>o=>(a,l)=>{const u=t.get(a);if(u===void 0){if(!o&&i(a)){const c=r(a),{outputs:h}=n(a);for(const d of h)if(Ha(d)){const f=r(d[0]);e(c,f,d[1],d[2])}else{const f=s(d[0]);c.disconnect(f,d[1])}}t.set(a,l)}else t.set(a,u+l)},GO=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},QO=(t,e)=>n=>t.has(n)||e(n),KO=(t,e)=>n=>t.has(n)||e(n),XO=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},YO=t=>e=>t!==null&&e instanceof t,ZO=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,JO=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,eM=(t,e)=>n=>t(n)||e(n),tM=t=>e=>t!==null&&e instanceof t,nM=t=>t!==null&&t.isSecureContext,rM=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},sM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},iM=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const l={...sM,...o},u=e(a,l);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},oM=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},aM=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),a=e(o,i);super(s,!0,a,null)}},lM=(t,e,n,r,s,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,Fc.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===l?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ca=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},uM=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,l=0,u=0)=>{const c=i.size===0;if(e(a))return o.call(n,a,l,u),t(i,[a,l,u],h=>h[0]===a&&h[1]===l&&h[2]===u,!0),c&&r(),a;o.call(n,a,l),t(i,[a,l],h=>h[0]===a&&h[1]===l,!0),c&&r()})(n.connect),n.disconnect=(o=>(a,l,u)=>{const c=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(n,a,l,u):o.call(n,a,l);for(const d of i)d[0]===a&&(l===void 0||d[1]===l)&&(u===void 0||d[2]===u)&&i.delete(d)}const h=i.size===0;c&&h&&s()})(n.disconnect),n},Ee=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Je=(t,e)=>{Ee(t,e,"channelCount"),Ee(t,e,"channelCountMode"),Ee(t,e,"channelInterpretation")},Ky=t=>typeof t.getFloatTimeDomainData=="function",cM=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},hM=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(Je(s,r),!(r.maxDecibels>r.minDecibels))throw e();return Ee(s,r,"fftSize"),Ee(s,r,"maxDecibels"),Ee(s,r,"minDecibels"),Ee(s,r,"smoothingTimeConstant"),t(Ky,()=>Ky(s))||cM(s),s},dM=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,be=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},fM=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw it();e.call(t,r,s,i),n=!0}})(t.start)},lm=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},um=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},pM=(t,e,n,r,s,i,o,a,l,u,c)=>(h,d)=>{const f=h.createBufferSource();return Je(f,d),be(f,d,"playbackRate"),Ee(f,d,"buffer"),Ee(f,d,"loop"),Ee(f,d,"loopEnd"),Ee(f,d,"loopStart"),e(n,()=>n(h))||fM(f),e(r,()=>r(h))||l(f),e(s,()=>s(h))||u(f,h),e(i,()=>i(h))||lm(f),e(o,()=>o(h))||c(f,h),e(a,()=>a(h))||um(f),t(h,f),f},mM=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,gM=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(u){if(l>i.maxChannelCount)throw u}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},yM=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,vM=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},_M=(t,e,n,r,s)=>(i,o,a,l,u,c)=>{if(a!==null)try{const h=new a(i,l,c),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...y)=>{if(y[0]==="processorerror"){const w=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(w!==null){const g=d.get(y[1]);g!==void 0?y[1]=g:(y[1]=m=>{m.type==="error"?(Object.defineProperties(m,{type:{value:"processorerror"}}),w(m)):w(new ErrorEvent(y[0],{...m}))},d.set(w,y[1]))}}return p.call(h,"error",y[1],y[2]),p.call(h,...y)})(h.addEventListener),h.removeEventListener=(p=>(...y)=>{if(y[0]==="processorerror"){const w=d.get(y[1]);w!==void 0&&(d.delete(y[1]),y[1]=w)}return p.call(h,"error",y[1],y[2]),p.call(h,y[0],y[1],y[2])})(h.removeEventListener),c.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),s(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?r():h}if(u===void 0)throw r();return vM(c),e(i,o,u,c)},Q1=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),wM=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),TM=async(t,e)=>{const n=await wM(e);return new t(n)},SM=(t,e,n,r)=>{let s=cf.get(t);s===void 0&&(s=new WeakMap,cf.set(t,s));const i=TM(n,r);return s.set(e,i),i},CM=(t,e,n,r,s,i,o,a,l,u,c,h,d)=>(f,p,y,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw l();const g=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(g.some(V=>V<1))throw l();if(g.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw l();const m=w.channelCount*w.numberOfInputs,v=g.reduce((V,K)=>V+K,0),T=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(m+T>6||v>6)throw l();const _=new MessageChannel,S=[],C=[];for(let V=0;V<w.numberOfInputs;V+=1)S.push(o(f,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),C.push(s(f,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const E=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:V,maxValue:K,minValue:Ge,name:Ne}of y.parameterDescriptors){const ce=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[Ne]!==void 0?w.parameterData[Ne]:V===void 0?0:V});Object.defineProperties(ce.offset,{defaultValue:{get:()=>V===void 0?0:V},maxValue:{get:()=>K===void 0?Nt:K},minValue:{get:()=>Ge===void 0?Lt:Ge}}),E.push(ce)}const N=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,m+T)}),k=Q1(p,f.sampleRate),A=a(f,k,m+T,Math.max(1,v)),I=s(f,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),F=[];for(let V=0;V<w.numberOfOutputs;V+=1)F.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[V]}));for(let V=0;V<w.numberOfInputs;V+=1){S[V].connect(C[V]);for(let K=0;K<w.channelCount;K+=1)C[V].connect(N,K,V*w.channelCount+K)}const P=new W1(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:V},K)=>{const Ge=E[K];return Ge.connect(N,0,m+K),Ge.start(0),[V,Ge.offset]}));N.connect(A);let G=w.channelInterpretation,$=null;const j=w.numberOfOutputs===0?[A]:F,x={get bufferSize(){return k},get channelCount(){return w.channelCount},set channelCount(V){throw n()},get channelCountMode(){return w.channelCountMode},set channelCountMode(V){throw n()},get channelInterpretation(){return G},set channelInterpretation(V){for(const K of S)K.channelInterpretation=V;G=V},get context(){return A.context},get inputs(){return S},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return $},set onprocessorerror(V){typeof $=="function"&&x.removeEventListener("processorerror",$),$=typeof V=="function"?V:null,typeof $=="function"&&x.addEventListener("processorerror",$)},get parameters(){return P},get port(){return _.port2},addEventListener(...V){return A.addEventListener(V[0],V[1],V[2])},connect:t.bind(null,j),disconnect:u.bind(null,j),dispatchEvent(...V){return A.dispatchEvent(V[0])},removeEventListener(...V){return A.removeEventListener(V[0],V[1],V[2])}},M=new Map;_.port1.addEventListener=(V=>(...K)=>{if(K[0]==="message"){const Ge=typeof K[1]=="function"?K[1]:typeof K[1]=="object"&&K[1]!==null&&typeof K[1].handleEvent=="function"?K[1].handleEvent:null;if(Ge!==null){const Ne=M.get(K[1]);Ne!==void 0?K[1]=Ne:(K[1]=ce=>{c(f.currentTime,f.sampleRate,()=>Ge(ce))},M.set(Ge,K[1]))}}return V.call(_.port1,K[0],K[1],K[2])})(_.port1.addEventListener),_.port1.removeEventListener=(V=>(...K)=>{if(K[0]==="message"){const Ge=M.get(K[1]);Ge!==void 0&&(M.delete(K[1]),K[1]=Ge)}return V.call(_.port1,K[0],K[1],K[2])})(_.port1.removeEventListener);let b=null;Object.defineProperty(_.port1,"onmessage",{get:()=>b,set:V=>{typeof b=="function"&&_.port1.removeEventListener("message",b),b=typeof V=="function"?V:null,typeof b=="function"&&(_.port1.addEventListener("message",b),_.port1.start())}}),y.prototype.port=_.port1;let U=null;SM(f,x,y,w).then(V=>U=V);const tt=Bu(w.numberOfInputs,w.channelCount),Fe=Bu(w.numberOfOutputs,g),ee=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((V,{name:K})=>({...V,[K]:new Float32Array(128)}),{});let ue=!0;const je=()=>{w.numberOfOutputs>0&&A.disconnect(I);for(let V=0,K=0;V<w.numberOfOutputs;V+=1){const Ge=F[V];for(let Ne=0;Ne<g[V];Ne+=1)I.disconnect(Ge,K+Ne,Ne);K+=g[V]}},W=new Map;A.onaudioprocess=({inputBuffer:V,outputBuffer:K})=>{if(U!==null){const Ge=h(x);for(let Ne=0;Ne<k;Ne+=128){for(let ce=0;ce<w.numberOfInputs;ce+=1)for(let Oe=0;Oe<w.channelCount;Oe+=1)Uu(V,tt[ce],Oe,Oe,Ne);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:ce},Oe)=>{Uu(V,ee,ce,m+Oe,Ne)});for(let ce=0;ce<w.numberOfInputs;ce+=1)for(let Oe=0;Oe<g[ce];Oe+=1)Fe[ce][Oe].byteLength===0&&(Fe[ce][Oe]=new Float32Array(128));try{const ce=tt.map((Zt,hr)=>{if(Ge[hr].size>0)return W.set(hr,k/128),Zt;const Kc=W.get(hr);return Kc===void 0?[]:(Zt.every(BT=>BT.every(jT=>jT===0))&&(Kc===1?W.delete(hr):W.set(hr,Kc-1)),Zt)});ue=c(f.currentTime+Ne/f.sampleRate,f.sampleRate,()=>U.process(ce,Fe,ee));for(let Zt=0,hr=0;Zt<w.numberOfOutputs;Zt+=1){for(let Ki=0;Ki<g[Zt];Ki+=1)H1(K,Fe[Zt],Ki,hr+Ki,Ne);hr+=g[Zt]}}catch(ce){ue=!1,x.dispatchEvent(new ErrorEvent("processorerror",{colno:ce.colno,filename:ce.filename,lineno:ce.lineno,message:ce.message}))}if(!ue){for(let ce=0;ce<w.numberOfInputs;ce+=1){S[ce].disconnect(C[ce]);for(let Oe=0;Oe<w.channelCount;Oe+=1)C[Ne].disconnect(N,Oe,ce*w.channelCount+Oe)}if(y.parameterDescriptors!==void 0){const ce=y.parameterDescriptors.length;for(let Oe=0;Oe<ce;Oe+=1){const Zt=E[Oe];Zt.disconnect(N,0,m+Oe),Zt.stop()}}N.disconnect(A),A.onaudioprocess=null,Gr?je():Ls();break}}}};let Gr=!1;const Qr=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ps=()=>A.connect(Qr).connect(f.destination),Ls=()=>{A.disconnect(Qr),Qr.disconnect()},$T=()=>{if(ue){Ls(),w.numberOfOutputs>0&&A.connect(I);for(let V=0,K=0;V<w.numberOfOutputs;V+=1){const Ge=F[V];for(let Ne=0;Ne<g[V];Ne+=1)I.connect(Ge,K+Ne,Ne);K+=g[V]}}Gr=!0},UT=()=>{ue&&(Ps(),je()),Gr=!1};return Ps(),d(x,$T,UT)},K1=(t,e)=>{const n=t.createBiquadFilter();return Je(n,e),be(n,e,"Q"),be(n,e,"detune"),be(n,e,"frequency"),be(n,e,"gain"),Ee(n,e,"type"),n},EM=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),Je(s,r),s},kM=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw it()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw it()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw it()}})},Ga=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Je(n,e),kM(n),n},IM=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Je(a,o),be(a,o,"offset"),e(r,()=>r(i))||lm(a),e(s,()=>s(i))||um(a),t(i,a),a},qi=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),NM=(t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),l=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(s,{...o,gain:i}),c=a.getChannelData(0);c[0]=1,c[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(p){u.channelCount=p},get channelCountMode(){return u.channelCountMode},set channelCountMode(p){u.channelCountMode=p},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(p){u.channelInterpretation=p},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return l.onended},set onended(p){l.onended=p},addEventListener(...p){return l.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return l.dispatchEvent(p[0])},removeEventListener(...p){return l.removeEventListener(p[0],p[1],p[2])},start(p=0){l.start.call(l,p)},stop(p=0){l.stop.call(l,p)}},d=()=>l.connect(u),f=()=>l.disconnect(u);return t(s,l),r(qi(h,u),d,f)},AM=(t,e)=>(n,r)=>{const s=n.createConvolver();if(Je(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Ee(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},X1=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Je(n,e),be(n,e,"delayTime"),n},xM=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Je(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return be(r,n,"attack"),be(r,n,"knee"),be(r,n,"ratio"),be(r,n,"release"),be(r,n,"threshold"),r},zt=(t,e)=>{const n=t.createGain();return Je(n,e),be(n,e,"gain"),n},DM=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Je(s,r),s};function OM(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function MM(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Xy(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=MM(n,e),n[0]+=t[r];return n}const RM=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:c})=>{const h=Q1(i,s.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),f=c instanceof Float64Array?c:new Float64Array(c),p=d.length,y=f.length,w=Math.min(p,y);if(p===0||p>20)throw r();if(d[0]===0)throw e();if(y===0||y>20)throw r();if(f[0]===0)throw e();if(d[0]!==1){for(let E=0;E<y;E+=1)f[E]/=d[0];for(let E=1;E<p;E+=1)d[E]/=d[0]}const g=n(s,h,o,o);g.channelCount=o,g.channelCountMode=a,g.channelInterpretation=l;const m=32,v=[],T=[],_=[];for(let E=0;E<o;E+=1){v.push(0);const N=new Float32Array(m),k=new Float32Array(m);N.fill(0),k.fill(0),T.push(N),_.push(k)}g.onaudioprocess=E=>{const N=E.inputBuffer,k=E.outputBuffer,A=N.numberOfChannels;for(let I=0;I<A;I+=1){const F=N.getChannelData(I),P=k.getChannelData(I);v[I]=G1(d,p,f,y,w,T[I],_[I],v[I],m,F,P)}};const S=s.sampleRate/2;return qi({get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(E){g.channelCount=E},get channelCountMode(){return g.channelCountMode},set channelCountMode(E){g.channelCountMode=E},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(E){g.channelInterpretation=E},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(...E){return g.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return g.dispatchEvent(E[0])},getFrequencyResponse(E,N,k){if(E.length!==N.length||N.length!==k.length)throw t();const A=E.length;for(let I=0;I<A;I+=1){const F=-Math.PI*(E[I]/S),P=[Math.cos(F),Math.sin(F)],G=Xy(f,P),$=Xy(d,P),j=OM(G,$);N[I]=Math.sqrt(j[0]*j[0]+j[1]*j[1]),k[I]=Math.atan2(j[1],j[0])}},removeEventListener(...E){return g.removeEventListener(E[0],E[1],E[2])}},g)},bM=(t,e)=>t.createMediaElementSource(e.mediaElement),PM=(t,e)=>{const n=t.createMediaStreamDestination();return Je(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},LM=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},FM=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},VM=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,$M=(t,e,n,r,s,i)=>(o,a)=>{const l=o.createOscillator();return Je(l,a),be(l,a,"detune"),be(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):Ee(l,a,"type"),e(n,()=>n(o))||lm(l),e(r,()=>r(o))||i(l,o),e(s,()=>s(o))||um(l),t(o,l),l},UM=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Je(r,n),be(r,n,"orientationX"),be(r,n,"orientationY"),be(r,n,"orientationZ"),be(r,n,"positionX"),be(r,n,"positionY"),be(r,n,"positionZ"),Ee(r,n,"coneInnerAngle"),Ee(r,n,"coneOuterAngle"),Ee(r,n,"coneOuterGain"),Ee(r,n,"distanceModel"),Ee(r,n,"maxDistance"),Ee(r,n,"panningModel"),Ee(r,n,"refDistance"),Ee(r,n,"rolloffFactor"),r)},BM=(t,e,n,r,s,i,o,a,l,u)=>(c,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:y,orientationX:w,orientationY:g,orientationZ:m,panningModel:v,positionX:T,positionY:_,positionZ:S,refDistance:C,rolloffFactor:E,...N})=>{const k=c.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw o();Je(k,N);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(c,{...A,channelInterpretation:"speakers",numberOfInputs:6}),F=r(c,{...N,gain:1}),P=r(c,{...A,gain:1}),G=r(c,{...A,gain:0}),$=r(c,{...A,gain:0}),j=r(c,{...A,gain:0}),x=r(c,{...A,gain:0}),M=r(c,{...A,gain:0}),b=s(c,256,6,1),U=i(c,{...A,curve:new Float32Array([1,1]),oversample:"none"});let Q=[w,g,m],tt=[T,_,S];const Fe=new Float32Array(1);b.onaudioprocess=({inputBuffer:W})=>{const Gr=[l(W,Fe,0),l(W,Fe,1),l(W,Fe,2)];Gr.some((Ps,Ls)=>Ps!==Q[Ls])&&(k.setOrientation(...Gr),Q=Gr);const Qr=[l(W,Fe,3),l(W,Fe,4),l(W,Fe,5)];Qr.some((Ps,Ls)=>Ps!==tt[Ls])&&(k.setPosition(...Qr),tt=Qr)},Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(x.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0});const ee={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(W){if(W>2)throw o();F.channelCount=W,k.channelCount=W},get channelCountMode(){return k.channelCountMode},set channelCountMode(W){if(W==="max")throw o();F.channelCountMode=W,k.channelCountMode=W},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(W){F.channelInterpretation=W,k.channelInterpretation=W},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(W){k.coneInnerAngle=W},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(W){k.coneOuterAngle=W},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(W){if(W<0||W>1)throw e();k.coneOuterGain=W},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(W){k.distanceModel=W},get inputs(){return[F]},get maxDistance(){return k.maxDistance},set maxDistance(W){if(W<0)throw new RangeError;k.maxDistance=W},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return P.gain},get orientationY(){return G.gain},get orientationZ(){return $.gain},get panningModel(){return k.panningModel},set panningModel(W){k.panningModel=W},get positionX(){return j.gain},get positionY(){return x.gain},get positionZ(){return M.gain},get refDistance(){return k.refDistance},set refDistance(W){if(W<0)throw new RangeError;k.refDistance=W},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(W){if(W<0)throw new RangeError;k.rolloffFactor=W},addEventListener(...W){return F.addEventListener(W[0],W[1],W[2])},dispatchEvent(...W){return F.dispatchEvent(W[0])},removeEventListener(...W){return F.removeEventListener(W[0],W[1],W[2])}};h!==ee.coneInnerAngle&&(ee.coneInnerAngle=h),d!==ee.coneOuterAngle&&(ee.coneOuterAngle=d),f!==ee.coneOuterGain&&(ee.coneOuterGain=f),p!==ee.distanceModel&&(ee.distanceModel=p),y!==ee.maxDistance&&(ee.maxDistance=y),w!==ee.orientationX.value&&(ee.orientationX.value=w),g!==ee.orientationY.value&&(ee.orientationY.value=g),m!==ee.orientationZ.value&&(ee.orientationZ.value=m),v!==ee.panningModel&&(ee.panningModel=v),T!==ee.positionX.value&&(ee.positionX.value=T),_!==ee.positionY.value&&(ee.positionY.value=_),S!==ee.positionZ.value&&(ee.positionZ.value=S),C!==ee.refDistance&&(ee.refDistance=C),E!==ee.rolloffFactor&&(ee.rolloffFactor=E),(Q[0]!==1||Q[1]!==0||Q[2]!==0)&&k.setOrientation(...Q),(tt[0]!==0||tt[1]!==0||tt[2]!==0)&&k.setPosition(...tt);const ue=()=>{F.connect(k),t(F,U,0,0),U.connect(P).connect(I,0,0),U.connect(G).connect(I,0,1),U.connect($).connect(I,0,2),U.connect(j).connect(I,0,3),U.connect(x).connect(I,0,4),U.connect(M).connect(I,0,5),I.connect(b).connect(c.destination)},je=()=>{F.disconnect(k),a(F,U,0,0),U.disconnect(P),P.disconnect(I),U.disconnect(G),G.disconnect(I),U.disconnect($),$.disconnect(I),U.disconnect(j),j.disconnect(I),U.disconnect(x),x.disconnect(I),U.disconnect(M),M.disconnect(I),I.disconnect(b),b.disconnect(c.destination)};return u(qi(ee,k),ue,je)},jM=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},Qa=(t,e,n,r)=>t.createScriptProcessor(e,n,r),zM=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return Je(i,r),be(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},qM=(t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...u,oversample:"none"},h=(p,y,w,g)=>{const m=new Float32Array(16385),v=new Float32Array(16385);for(let N=0;N<16385;N+=1){const k=N/16384*l;m[N]=Math.cos(k),v[N]=Math.sin(k)}const T=n(p,{...u,gain:0}),_=r(p,{...c,curve:m}),S=r(p,{...c,curve:a}),C=n(p,{...u,gain:0}),E=r(p,{...c,curve:v});return{connectGraph(){y.connect(T),y.connect(S.inputs===void 0?S:S.inputs[0]),y.connect(C),S.connect(w),w.connect(_.inputs===void 0?_:_.inputs[0]),w.connect(E.inputs===void 0?E:E.inputs[0]),_.connect(T.gain),E.connect(C.gain),T.connect(g,0,0),C.connect(g,0,1)},disconnectGraph(){y.disconnect(T),y.disconnect(S.inputs===void 0?S:S.inputs[0]),y.disconnect(C),S.disconnect(w),w.disconnect(_.inputs===void 0?_:_.inputs[0]),w.disconnect(E.inputs===void 0?E:E.inputs[0]),_.disconnect(T.gain),E.disconnect(C.gain),T.disconnect(g,0,0),C.disconnect(g,0,1)}}},d=(p,y,w,g)=>{const m=new Float32Array(16385),v=new Float32Array(16385),T=new Float32Array(16385),_=new Float32Array(16385),S=Math.floor(16385/2);for(let j=0;j<16385;j+=1)if(j>S){const x=(j-S)/(16384-S)*l;m[j]=Math.cos(x),v[j]=Math.sin(x),T[j]=0,_[j]=1}else{const x=j/(16384-S)*l;m[j]=1,v[j]=0,T[j]=Math.cos(x),_[j]=Math.sin(x)}const C=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=n(p,{...u,gain:0}),N=r(p,{...c,curve:m}),k=n(p,{...u,gain:0}),A=r(p,{...c,curve:v}),I=r(p,{...c,curve:a}),F=n(p,{...u,gain:0}),P=r(p,{...c,curve:T}),G=n(p,{...u,gain:0}),$=r(p,{...c,curve:_});return{connectGraph(){y.connect(C),y.connect(I.inputs===void 0?I:I.inputs[0]),C.connect(E,0),C.connect(k,0),C.connect(F,1),C.connect(G,1),I.connect(w),w.connect(N.inputs===void 0?N:N.inputs[0]),w.connect(A.inputs===void 0?A:A.inputs[0]),w.connect(P.inputs===void 0?P:P.inputs[0]),w.connect($.inputs===void 0?$:$.inputs[0]),N.connect(E.gain),A.connect(k.gain),P.connect(F.gain),$.connect(G.gain),E.connect(g,0,0),F.connect(g,0,0),k.connect(g,0,1),G.connect(g,0,1)},disconnectGraph(){y.disconnect(C),y.disconnect(I.inputs===void 0?I:I.inputs[0]),C.disconnect(E,0),C.disconnect(k,0),C.disconnect(F,1),C.disconnect(G,1),I.disconnect(w),w.disconnect(N.inputs===void 0?N:N.inputs[0]),w.disconnect(A.inputs===void 0?A:A.inputs[0]),w.disconnect(P.inputs===void 0?P:P.inputs[0]),w.disconnect($.inputs===void 0?$:$.inputs[0]),N.disconnect(E.gain),A.disconnect(k.gain),P.disconnect(F.gain),$.disconnect(G.gain),E.disconnect(g,0,0),F.disconnect(g,0,0),k.disconnect(g,0,1),G.disconnect(g,0,1)}}},f=(p,y,w,g,m)=>{if(y===1)return h(p,w,g,m);if(y===2)return d(p,w,g,m);throw s()};return(p,{channelCount:y,channelCountMode:w,pan:g,...m})=>{if(w==="max")throw s();const v=t(p,{...m,channelCount:1,channelCountMode:w,numberOfInputs:2}),T=n(p,{...m,channelCount:y,channelCountMode:w,gain:1}),_=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:g});let{connectGraph:S,disconnectGraph:C}=f(p,y,T,_,v);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(I){T.channelCount!==I&&(N&&C(),{connectGraph:S,disconnectGraph:C}=f(p,I,T,_,v),N&&S()),T.channelCount=I},get channelCountMode(){return T.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw s();T.channelCountMode=I},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(I){T.channelInterpretation=I},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get pan(){return _.gain},addEventListener(...I){return T.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return T.dispatchEvent(I[0])},removeEventListener(...I){return T.removeEventListener(I[0],I[1],I[2])}};let N=!1;const k=()=>{S(),N=!0},A=()=>{C(),N=!1};return i(qi(E,v),k,A)}},WM=(t,e,n,r,s,i,o)=>(a,l)=>{const u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);Je(u,l);const c=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(c!==null&&c.length<2)throw e();Ee(u,{curve:c},"curve"),Ee(u,l,"oversample");let h=null,d=!1;return o(u,"curve",y=>()=>y.call(u),y=>w=>(y.call(u,w),d&&(r(w)&&h===null?h=t(a,u):!r(w)&&h!==null&&(h(),h=null)),w)),s(u,()=>{d=!0,r(u.curve)&&(h=t(a,u))},()=>{d=!1,h!==null&&(h(),h=null)})},HM=(t,e,n,r,s)=>(i,{curve:o,oversample:a,...l})=>{const u=i.createWaveShaper(),c=i.createWaveShaper();Je(u,l),Je(c,l);const h=n(i,{...l,gain:1}),d=n(i,{...l,gain:-1}),f=n(i,{...l,gain:1}),p=n(i,{...l,gain:-1});let y=null,w=!1,g=null;const m={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,u.channelCount=_,f.channelCount=_,c.channelCount=_,p.channelCount=_},get channelCountMode(){return u.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,u.channelCountMode=_,f.channelCountMode=_,c.channelCountMode=_,p.channelCountMode=_},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,u.channelInterpretation=_,f.channelInterpretation=_,c.channelInterpretation=_,p.channelInterpretation=_},get context(){return u.context},get curve(){return g},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)u.curve=_,c.curve=_;else{const S=_.length,C=new Float32Array(S+2-S%2),E=new Float32Array(S+2-S%2);C[0]=_[0],E[0]=-_[S-1];const N=Math.ceil((S+1)/2),k=(S+1)/2-1;for(let A=1;A<N;A+=1){const I=A/N*k,F=Math.floor(I),P=Math.ceil(I);C[A]=F===P?_[F]:(1-(I-F))*_[F]+(1-(P-I))*_[P],E[A]=F===P?-_[S-1-F]:-((1-(I-F))*_[S-1-F])-(1-(P-I))*_[S-1-P]}C[N]=S%2===1?_[N-1]:(_[N-2]+_[N-1])/2,u.curve=C,c.curve=E}g=_,w&&(r(g)&&y===null?y=t(i,h):y!==null&&(y(),y=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(_){u.oversample=_,c.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(m.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==m.oversample&&(m.oversample=a);const v=()=>{h.connect(u).connect(f),h.connect(d).connect(c).connect(p).connect(f),w=!0,r(g)&&(y=t(i,h))},T=()=>{h.disconnect(u),u.disconnect(f),h.disconnect(d),d.disconnect(c),c.disconnect(p),p.disconnect(f),w=!1,y!==null&&(y(),y=null)};return s(qi(m,f),v,T)},bt=()=>new DOMException("","NotSupportedError"),GM={numberOfChannels:1},QM=(t,e,n,r,s)=>class extends t{constructor(o,a,l){let u;if(typeof o=="number"&&a!==void 0&&l!==void 0)u={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")u=o;else throw new Error("The given parameters are not valid.");const{length:c,numberOfChannels:h,sampleRate:d}={...GM,...u},f=r(h,c,d);e(ca,()=>ca(f))||f.addEventListener("statechange",(()=>{let p=0;const y=w=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",y),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):p+=1)};return y})()),super(f,h),this._length=c,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,B1(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},KM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},XM=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...KM,...u},d=n(c,h),f=i(c),p=f?r():null,y=l.sampleRate/2;super(l,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,y,-y),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=u;const c=this._nativeOscillatorNode.onended;this._onended=c!==null&&c===u?l:c}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Ai(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),Yn(this)&&qa(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},YM=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const u=async(c,h)=>{let d=n(c);const f=Et(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,p),a!==null&&d.start(a),l!==null&&d.stop(l)}return i.set(h,d),f?(await t(h,c.detune,d.detune),await t(h,c.frequency,d.frequency)):(await r(h,c.detune,d.detune),await r(h,c.frequency,d.frequency)),await s(c,h,d),d};return{set periodicWave(c){o=c},set start(c){a=c},set stop(c){l=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):u(c,h)}}},ZM={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},JM=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...ZM,...u},d=n(c,h),f=i(c),p=f?r():null;super(l,!1,d,p),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Nt,Lt),this._orientationY=e(this,f,d.orientationY,Nt,Lt),this._orientationZ=e(this,f,d.orientationZ,Nt,Lt),this._positionX=e(this,f,d.positionX,Nt,Lt),this._positionY=e(this,f,d.positionY,Nt,Lt),this._positionZ=e(this,f,d.positionZ,Nt,Lt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},eR=(t,e,n,r,s,i,o,a,l,u)=>()=>{const c=new WeakMap;let h=null;const d=async(f,p)=>{let y=null,w=i(f);const g={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},m={...g,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},v=Et(w,p);if("bufferSize"in w)y=r(p,{...g,gain:1});else if(!v){const T={...m,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=s(p,T)}if(c.set(p,y===null?w:y),y!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=new o(6,f.context.length,p.sampleRate),I=e(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(A.destination),h=(async()=>{const F=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(P,G)=>{const $=n(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:G===0?1:0});return await a(A,P,$.offset),$}));for(let P=0;P<6;P+=1)F[P].connect(I,0,P),F[P].start(0);return u(A)})()}const T=await h,_=r(p,{...g,gain:1});await l(f,p,_);const S=[];for(let A=0;A<T.numberOfChannels;A+=1)S.push(T.getChannelData(A));let C=[S[0][0],S[1][0],S[2][0]],E=[S[3][0],S[4][0],S[5][0]],N=r(p,{...g,gain:1}),k=s(p,{...m,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:E[0],positionY:E[1],positionZ:E[2]});_.connect(N).connect(k.inputs[0]),k.connect(y);for(let A=128;A<T.length;A+=128){const I=[S[0][A],S[1][A],S[2][A]],F=[S[3][A],S[4][A],S[5][A]];if(I.some((P,G)=>P!==C[G])||F.some((P,G)=>P!==E[G])){C=I,E=F;const P=A/p.sampleRate;N.gain.setValueAtTime(0,P),N=r(p,{...g,gain:0}),k=s(p,{...m,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:E[0],positionY:E[1],positionZ:E[2]}),N.gain.setValueAtTime(1,P),_.connect(N).connect(k.inputs[0]),k.connect(y)}}return y}return v?(await t(p,f.orientationX,w.orientationX),await t(p,f.orientationY,w.orientationY),await t(p,f.orientationZ,w.orientationZ),await t(p,f.positionX,w.positionX),await t(p,f.positionY,w.positionY),await t(p,f.positionZ,w.positionZ)):(await a(p,f.orientationX,w.orientationX),await a(p,f.orientationY,w.orientationY),await a(p,f.orientationZ,w.orientationZ),await a(p,f.positionX,w.positionX),await a(p,f.positionY,w.positionY),await a(p,f.positionZ,w.positionZ)),zi(w)?await l(f,p,w.inputs[0]):await l(f,p,w),w};return{render(f,p){const y=c.get(p);return y!==void 0?Promise.resolve(y):d(f,p)}}},tR={disableNormalization:!1},nR=(t,e,n,r)=>class Y1{constructor(i,o){const a=e(i),l=r({...tR,...o}),u=t(a,l);return n.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Y1.prototype||n.has(i)}},rR=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),sR=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([u,c])=>{const d=await e(u).render(u,s),f=r.context.destination;!n(u)&&(r!==f||!n(r))&&d.connect(i,c,l)})).reduce((a,l)=>[...a,...l],[]))},iR=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const c=await t(a).render(a,s);n(a)||c.connect(i,l)}))},oR=(t,e,n,r)=>s=>t(ca,()=>ca(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),aR=t=>(e,n)=>{t.set(e,n)},lR=t=>(e,n)=>t.set(e,n),uR=(t,e,n,r,s,i,o,a)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(r(u)).map(c=>n(c).render(c,u)))).then(()=>s(u)).then(c=>(typeof c.copyFromChannel!="function"?(o(c),im(c)):e(i,()=>i(c))||a(c),t.add(c),c)),cR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},hR=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const u=s(a),c={...cR,...l},h=n(u,c),d=i(u),f=d?r():null;super(a,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},dR=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=Et(u,l);if(!c){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(l,h)}return i.set(l,u),c?await t(l,a.pan,u.pan):await r(l,a.pan,u.pan),zi(u)?await s(a,l,u.inputs[0]):await s(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},fR=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},pR=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},mR=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},gR=()=>new DOMException("","UnknownError"),yR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},vR=(t,e,n,r,s,i,o)=>class extends t{constructor(l,u){const c=s(l),h={...yR,...u},d=n(c,h),p=i(c)?r():null;super(l,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},_R=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Et(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,u)}return r.set(o,a),zi(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},wR=()=>typeof window>"u"?null:window,TR=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=r.length;for(let h=o<0?-o:0;h+o<l&&h<c;h+=1)r[h]=u[h+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=r.length;for(let h=o<0?-o:0;h+o<l&&h<c;h+=1)u[h+o]=r[h]}},SR=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},CR=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},ER=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)s.connect(r,0,l)},()=>s.disconnect(r))},Z1=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),J1=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Ka=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},kR=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),IR=t=>({...t,channelCount:t.numberOfOutputs}),NR=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},eT=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;eT(t,e,n+1e-7)}},AR=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},xR=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},DR=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},cm=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},tT=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},hm=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},OR=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},MR=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},nT=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),qi(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},Wi=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},RR=Jx(Ms),bR=iD(Ms),PR=yO(Vc),rT=new WeakMap,LR=PO(rT),Sn=GD(new Map,new WeakMap),Pn=wR(),sT=hM(Sn,Fn),dm=bO(xt),pt=sR(xt,dm,ws),FR=cD(sT,Se,pt),_e=VO(Fc),lr=VM(Pn),pe=tM(lr),iT=new WeakMap,oT=NO(Wi),Xa=mM(Pn),fm=YO(Xa),pm=ZO(Pn),aT=JO(Pn),ha=yM(Pn),Be=PD(eD(b1),sD(RR,bR,Fu,PR,Vu,xt,LR,za,Se,Ms,Yn,ws,jl),Sn,HO(lf,Vu,xt,Se,ua,Yn),Fn,$c,bt,fO(Fu,lf,xt,Se,ua,_e,Yn,pe),wO(iT,xt,Tn),oT,_e,fm,pm,aT,pe,ha),VR=uD(Be,FR,Fn,sT,_e,pe),mm=new WeakSet,Yy=dM(Pn),lT=oO(new Uint32Array(1)),gm=TR(lT,Fn),ym=SR(lT),$R=dD(mm,Sn,bt,Yy,lr,fR(Yy),gm,ym),Uc=oD(zt),uT=iR(dm,Wa,ws),Vn=eO(uT),Hi=pM(Uc,Sn,AR,xR,DR,cm,tT,hm,MR,CR(Ka),nT),$n=rR(LO(Wa),uT),UR=mD(Vn,Hi,Se,$n,pt),Cn=LD(tD(P1),iT,sm,FD,Gx,Qx,Kx,Xx,Yx,sf,M1,Xa,eT),BR=pD(Be,UR,Cn,it,Hi,_e,pe,Wi),jR=ED(Be,kD,Fn,it,gM(zt,Ka),_e,pe,pt),zR=HD(Vn,K1,Se,$n,pt),Rs=lR(rT),qR=WD(Be,Cn,zR,$c,K1,_e,pe,Rs),Wr=uM(Ms,pm),WR=ER(it,Wr),Hr=EM(Xa,WR),HR=XD(Hr,Se,pt),GR=KD(Be,HR,Hr,_e,pe),QR=JD(Ga,Se,pt),KR=ZD(Be,QR,Ga,_e,pe,IR),XR=NM(Uc,Hi,zt,Wr),Gi=IM(Uc,Sn,XR,cm,hm),YR=iO(Vn,Gi,Se,$n,pt),ZR=sO(Be,Cn,YR,Gi,_e,pe,Wi),cT=AM(bt,Ka),JR=uO(cT,Se,pt),eb=lO(Be,JR,cT,_e,pe,Rs),tb=gO(Vn,X1,Se,$n,pt),nb=mO(Be,Cn,tb,X1,_e,pe,Rs),hT=xM(bt),rb=EO(Vn,hT,Se,$n,pt),sb=CO(Be,Cn,rb,hT,bt,_e,pe,Rs),ib=MO(Vn,zt,Se,$n,pt),ob=OO(Be,Cn,ib,zt,_e,pe),ab=RM($c,it,Qa,bt),Bc=oR(Sn,zt,Qa,mR(zt,lr)),lb=WO(Hi,Se,lr,pt,Bc),ub=DM(ab),cb=zO(Be,ub,lb,_e,pe,Rs),hb=ID(Cn,Hr,Gi,Qa,bt,Z1,pe,Ka),dT=new WeakMap,db=lM(jR,hb,oT,pe,dT,Wi),fT=$M(Uc,Sn,cm,tT,hm,nT),fb=YM(Vn,fT,Se,$n,pt),pb=XM(Be,Cn,fT,fb,_e,pe,Wi),pT=nO(Hi),mb=HM(pT,it,zt,J1,Wr),jc=WM(pT,it,mb,J1,Wr,Xa,Ka),gb=BM(Fu,it,Hr,zt,Qa,jc,bt,Vu,Z1,Wr),mT=UM(gb),yb=eR(Vn,Hr,Gi,zt,mT,Se,lr,$n,pt,Bc),vb=JM(Be,Cn,mT,yb,_e,pe,Rs),_b=jM(Fn),wb=nR(_b,_e,new WeakSet,NR),Tb=qM(Hr,Ga,zt,jc,bt,Wr),gT=zM(Tb,bt),Sb=dR(Vn,gT,Se,$n,pt),Cb=hR(Be,Cn,gT,Sb,_e,pe),Eb=_R(jc,Se,pt),kb=vR(Be,it,jc,Eb,_e,pe,Rs),yT=nM(Pn),vm=AO(Pn),vT=new WeakMap,Ib=$O(vT,lr),Nb=yT?rD(Sn,bt,IO(Pn),vm,xO(Zx),_e,Ib,pe,ha,new WeakMap,new WeakMap,pR(ha,lr),Pn):void 0,Ab=eM(fm,pe),xb=dO(mm,Sn,hO,kO,new WeakSet,_e,Ab,Pu,ca,gm,ym),_T=zD(Nb,VR,$R,BR,qR,GR,KR,ZR,eb,xb,nb,sb,ob,cb,db,pb,vb,wb,Cb,kb),Db=rM(Be,bM,_e,pe),Ob=iM(Be,PM,_e,pe),Mb=oM(Be,LM,_e,pe),Rb=FM(it,pe),bb=aM(Be,Rb,_e),Pb=CD(_T,it,bt,gR,Db,Ob,Mb,bb,Xa),_m=UO(dT),Lb=aD(_m),wT=tO(Fn),Fb=vO(_m),TT=TO(Fn),ST=new WeakMap,Vb=RO(ST,Tn),$b=CM(wT,Fn,it,Hr,Ga,Gi,zt,Qa,bt,TT,vm,Vb,Wr),Ub=_M(it,$b,zt,bt,Wr),Bb=jD(Vn,wT,Hi,Hr,Ga,Gi,zt,Fb,TT,vm,Se,ha,lr,$n,pt,Bc),jb=FO(vT),zb=aR(ST),Zy=yT?$D(Lb,Be,Cn,Bb,Ub,xt,jb,_e,pe,ha,kR,zb,OR,Wi):void 0,qb=cO(bt,lr),Wb=uR(mm,Sn,dm,_m,Bc,Pu,gm,ym),Hb=QM(_T,Sn,it,qb,Wb),Gb=GO(Fc,fm),Qb=QO(rm,pm),Kb=KO(sm,aT),Xb=XO(Fc,pe);function te(t,e){if(!t)throw new Error(e)}function Vr(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function CT(t){!t.isOffline&&t.state!=="running"&&kT('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ET=console;function Yb(...t){ET.log(...t)}function kT(...t){ET.warn(...t)}function an(t){return typeof t>"u"}function se(t){return!an(t)}function Zb(t){return typeof t=="function"}function Ts(t){return typeof t=="number"}function cs(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function Jb(t){return typeof t=="boolean"}function _n(t){return Array.isArray(t)}function Ln(t){return typeof t=="string"}function El(t){return Ln(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function eP(t){return new Pb(t)}function tP(t,e,n){return new Hb(t,e,n)}const hs=typeof self=="object"?self:null,nP=hs&&(hs.hasOwnProperty("AudioContext")||hs.hasOwnProperty("webkitAudioContext"));function rP(t,e,n){return te(se(Zy),"This node only works in a secure context (https or localhost)"),new Zy(t,e,n)}function En(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function He(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}class sP{constructor(e,n,r){this._callback=e,this._type=n,this._updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ss(t){return Kb(t)}function Mr(t){return Qb(t)}function zl(t){return Xb(t)}function $s(t){return Gb(t)}function IT(t){return t instanceof AudioBuffer}function iP(t,e){return t==="value"||Ss(e)||Mr(e)||IT(e)}function hi(t,...e){if(!e.length)return t;const n=e.shift();if(cs(t)&&cs(n))for(const r in n)iP(r,n[r])?t[r]=n[r]:cs(n[r])?(t[r]||Object.assign(t,{[r]:{}}),hi(t[r],n[r])):Object.assign(t,{[r]:n[r]});return hi(t,...e)}function oP(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function L(t,e,n=[],r){const s={},i=Array.from(e);if(cs(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(hi(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&cs(i[0]))hi(s,i[0]);else for(let o=0;o<n.length;o++)se(i[o])&&(s[n[o]]=i[o]);return hi(t,s)}function aP(t){return t.constructor.getDefaults()}function di(t,e){return an(t)?e:t}function Jy(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class ur{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||hs&&this.toString()===hs.TONE_DEBUG_CLASS)&&Yb(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ur.version=O1;const wm=1e-6;function ju(t,e){return t>e+wm}function ff(t,e){return ju(t,e)||pn(t,e)}function NT(t,e){return t+wm<e}function pn(t,e){return Math.abs(t-e)<wm}function lP(t,e,n){return Math.max(Math.min(t,n),e)}class Un extends ur{constructor(){super(),this.name="Timeline",this._timeline=[];const e=L(Un.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(te(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];te(ff(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(pn(this._timeline[n].time,e)){for(let r=n;r>=0&&pn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&ff(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],l=this._timeline[o+1];if(pn(a[n],e)){for(let u=o;u<this._timeline.length;u++){const c=this._timeline[u];if(pn(c[n],e))o=u;else break}return o}else{if(NT(a[n],e)&&ju(l[n],e))return o;ju(a[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&pn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&pn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const AT=[];function zc(t){AT.push(t)}function uP(t){AT.forEach(e=>e(t))}const xT=[];function qc(t){xT.push(t)}function cP(t){xT.forEach(e=>e(t))}class Ya extends ur{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{an(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(an(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(an(n))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(Ya.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class DT extends Ya{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Za extends DT{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Un,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=L(Za.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=eP({latencyHint:e.latencyHint}),this._ticker=new sP(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(uP(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return te($s(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return te($s(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return te($s(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){te(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){te(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){te(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){te(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return rP(this.rawContext,e,n)}addAudioWorkletModule(e,n){return He(this,void 0,void 0,function*(){te(se(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(n)})}workletsAreReady(){return He(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(n=>e.push(n)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let n=0;if(this._latencyHint=e,Ln(e))switch(e){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return $s(this._context)?this._context.resume():Promise.resolve()}close(){return He(this,void 0,void 0,function*(){$s(this._context)&&(yield this._context.close()),this._initialized&&cP(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class hP extends DT{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e,n){return He(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Le(t,e){_n(e)?e.forEach(n=>Le(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function OT(t,e){_n(e)?e.forEach(n=>OT(t,n)):Object.defineProperty(t,e,{writable:!0})}const me=()=>{};class ge extends ur{constructor(){super(),this.name="ToneAudioBuffer",this.onload=me;const e=L(ge.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&IT(e.url)||e.url instanceof ge?this.set(e.url):Ln(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:me,onload:me,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:mn().sampleRate}set(e){return e instanceof ge?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return He(this,void 0,void 0,function*(){const n=ge.load(e).then(r=>{this.set(r),this.onload(this)});ge.downloads.push(n);try{yield n}finally{const r=ge.downloads.indexOf(n);ge.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=_n(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=mn(),o=i.createBuffer(r,s,i.sampleRate),a=!n&&r===1?[e]:e;for(let l=0;l<r;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Ts(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Ts(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);te(r<s,"The start time must be less than the end time");const i=s-r,o=mn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new ge(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ge().fromArray(e)}static fromUrl(e){return He(this,void 0,void 0,function*(){return yield new ge().load(e)})}static load(e){return He(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const a=n[1].split("|");let l=a[0];for(const u of a)if(ge.supportsType(u)){l=u;break}e=e.replace(n[0],l)}const r=ge.baseUrl===""||ge.baseUrl.endsWith("/")?ge.baseUrl:ge.baseUrl+"/",s=yield fetch(r+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield mn().decodeAudioData(i)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return He(this,void 0,void 0,function*(){for(yield Promise.resolve();ge.downloads.length;)yield ge.downloads[0]})}}ge.baseUrl="";ge.downloads=[];class Tm extends Za{constructor(){super({clockSource:"offline",context:zl(arguments[0])?arguments[0]:tP(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:zl(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=zl(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return He(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return He(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new ge(n)})}close(){return Promise.resolve()}}const MT=new hP;let Ao=MT;function mn(){return Ao===MT&&nP&&dP(new Za),Ao}function dP(t){$s(t)?Ao=new Za(t):zl(t)?Ao=new Tm(t):Ao=t}if(hs&&!hs.TONE_SILENCE_LOGGING){const e=` * Tone.js v${O1} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function fP(t){return Math.pow(10,t/20)}function pP(t){return 20*(Math.log(t)/Math.LN10)}function RT(t){return Math.pow(2,t/12)}let Wc=440;function mP(){return Wc}function gP(t){Wc=t}function pf(t){return Math.round(bT(t))}function bT(t){return 69+12*Math.log2(t/Wc)}function yP(t){return Wc*Math.pow(2,(t-69)/12)}class Sm extends ur{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Sm&&this.fromType(this._val),an(this._val))return this._noArg();if(Ln(this._val)&&an(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(cs(this._val)){let e=0;for(const n in this._val)if(se(this._val[n])){const r=this._val[n];e+=new this.constructor(this.context,n).valueOf()*r}return e}if(se(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Ln(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class gn extends Sm{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new gn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new gn(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new gn(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return pf(this.toFrequency())}_now(){return this.context.now()}}class rn extends gn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return mP()}static set A4(e){gP(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:rn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,n){const s=vP[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:rn.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new rn(this.context,this.valueOf()*RT(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return pf(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/rn.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),_P[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return yP(e)}static ftom(e){return pf(e)}}const vP={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},_P=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class xo extends gn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class jt extends ur{constructor(){super();const e=L(jt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:mn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new gn(this.context,e).toSeconds()}toFrequency(e){return new rn(this.context,e).toFrequency()}toTicks(e){return new xo(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{an(e[r])&&delete n[r]}),n}get(){const e=aP(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];se(r)&&se(r.value)&&se(r.setValueAtTime)?e[n]=r.value:r instanceof jt?e[n]=r._getPartialProperties(e[n]):_n(r)||Ts(r)||Ln(r)||Jb(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&se(this[n])&&(this[n]&&se(this[n].value)&&se(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof jt?this[n].set(e[n]):this[n]=e[n])}),this}}class Cm extends Un{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return Vr(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Ce extends jt{constructor(){super(L(Ce.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=L(Ce.getDefaults(),arguments,["param","units","convert"]);for(te(se(e.param)&&(Ss(e.param)||e.param instanceof Ce),"param must be an AudioParam");!Ss(e.param);)e.param=e.param._param;this._swappable=se(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Un(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,se(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(jt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return se(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return se(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return se(this.maxValue)&&se(this.minValue)&&Vr(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?fP(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?pP(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return te(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return te(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=pn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return te(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);te(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),te(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return te(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));te(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&pn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){te(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class re extends jt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return se(this.input)?Ss(this.input)||this.input instanceof Ce?1:this.input.numberOfInputs:0}get numberOfOutputs(){return se(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return se(e)&&(e instanceof re||Mr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();te(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Qi(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return kT("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return wP(this,e,n,r),this}chain(...e){return mf(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),se(this.input)&&(this.input instanceof re?this.input.dispose():Mr(this.input)&&this.input.disconnect()),se(this.output)&&(this.output instanceof re?this.output.dispose():Mr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function mf(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof re?n.connect(r):Mr(n)&&Qi(n,r),r),e)}function Qi(t,e,n=0,r=0){for(te(se(t),"Cannot connect from undefined node"),te(se(e),"Cannot connect to undefined node"),(e instanceof re||Mr(e))&&te(e.numberOfInputs>0,"Cannot connect to node with no inputs"),te(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof re||e instanceof Ce;)se(e.input)&&(e=e.input);for(;t instanceof re;)se(t.output)&&(t=t.output);Ss(e)?t.connect(e,n):t.connect(e,n,r)}function wP(t,e,n=0,r=0){if(se(e))for(;e instanceof re;)e=e.input;for(;!Mr(t);)se(t.output)&&(t=t.output);Ss(e)?t.disconnect(e,n):Mr(e)?t.disconnect(e,n,r):t.disconnect()}class Ot extends re{constructor(){super(L(Ot.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=L(Ot.getDefaults(),arguments,["gain","units"]);this.gain=new Ce({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Le(this,"gain")}static getDefaults(){return Object.assign(re.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class xi extends re{constructor(e){super(e),this.onended=me,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ot({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(re.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:me})}_startGain(e,n=1){te(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){te(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==me&&(this.onended(this),this.onended=me,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),te(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class zu extends xi{constructor(){super(L(zu.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=L(zu.getDefaults(),arguments,["offset"]);Qi(this._source,this._gainNode),this.offset=new Ce({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(xi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class et extends re{constructor(){super(L(et.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=L(et.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new zu({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(re.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return Em(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Em(t,e,n,r){(e instanceof Ce||Ss(e)||e instanceof et&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof et&&(e.overridden=!0)),Qi(t,e,n,r)}class qu extends Ce{constructor(){super(L(qu.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Un(1/0),this._multiplier=1;const e=L(qu.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ce.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const l=r*a+n,u=this._exponentialApproach(i.time,i.value,s,r,l);this.linearRampToValueAtTime(this._toType(u),l)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const l=o*a+s.time,u=this._exponentialInterpolate(s.time,s.value,n,r,l);this.linearRampToValueAtTime(this._toType(u),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(an(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),l=(-s+a)/o,u=(-s-a)/o;return(l>0?l:u)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Wu extends et{constructor(){super(L(Wu.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=L(Wu.getDefaults(),arguments,["value"]);this.input=this._param=new qu({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(et.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Hu extends jt{constructor(){super(L(Hu.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Cm,this._tickOffset=new Un;const e=L(Hu.getDefaults(),arguments,["frequency"]);this.frequency=new Wu({context:this.context,units:e.units,value:e.frequency}),Le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},jt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),se(n)&&this.setTicksAtTime(n,r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s={state:"paused",time:n};this._state.add(s);let i=r,o=0;return this._state.forEachBetween(r.time,n+this.sampleTime,a=>{let l=i.time;const u=this._tickOffset.get(a.time);u&&u.time>=i.time&&(o=u.ticks,l=u.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(l)),i=a}),this._state.remove(s),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let s=n,i=0;return this._state.forEachBetween(n.time,e+this.sampleTime,o=>{let a=s.time;const l=this._tickOffset.get(o.time);l&&l.time>=s.time&&(i=l.seconds,a=l.time),s.state==="started"&&o.state!=="started"&&(i+=o.time-a),s=o}),this._state.remove(r),i}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(s.time),u=a-l;let c=Math.ceil(u)-u;c=pn(c,1)?0:c;let h=this.frequency.getTimeOfTick(a+c);for(;h<n;){try{r(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class da extends jt{constructor(){super(L(da.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=me,this._lastUpdate=0,this._state=new Cm("stopped"),this._boundLoop=this._loop.bind(this);const e=L(da.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Hu({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(jt.getDefaults(),{callback:me,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){CT(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ya.mixin(da);class km extends ur{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=L(km.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:me,onload:me,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return te(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=me,s=me){return Ln(n)?this._buffers.set(e.toString(),new ge(this.baseUrl+n,r,s)):this._buffers.set(e.toString(),new ge(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class qn extends xo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class TP extends jt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Un,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}zc(t=>{t.draw=new TP({context:t})});qc(t=>{t.draw.dispose()});class SP extends ur{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){te(se(e.time),"Events must have a time property"),te(se(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new CP(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class CP{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Cs extends re{constructor(){super(L(Cs.getDefaults(),arguments,["volume"])),this.name="Volume";const e=L(Cs.getDefaults(),arguments,["volume"]);this.input=this.output=new Ot({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Le(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Gu extends re{constructor(){super(L(Gu.getDefaults(),arguments)),this.name="Destination",this.input=new Cs({context:this.context}),this.output=new Ot({context:this.context}),this.volume=this.input.volume;const e=L(Gu.getDefaults(),arguments);mf(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),mf(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}zc(t=>{t.destination=new Gu({context:t})});qc(t=>{t.destination.dispose()});class EP extends ur{constructor(e){super(),this.name="TimelineValue",this._timeline=new Un({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class $r{constructor(e,n){this.id=$r._eventId++;const r=Object.assign($r.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=r.time}static getDefaults(){return{callback:me,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}$r._eventId=0;class Im extends $r{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Im.getDefaults(),n);this.duration=new qn(e.context,r.duration).valueOf(),this._interval=new qn(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},$r.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const n=this.transport.getTicksAtTime(e);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new qn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(e);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new qn(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new qn(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class fa extends jt{constructor(){super(L(fa.getDefaults(),arguments)),this.name="Transport",this._loop=new EP(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Un,this._repeatedEvents=new SP,this._syncedSignals=[],this._swingAmount=0;const e=L(fa.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new da({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Le(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(jt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new qn(this.context,this._swingTicks*2/3).toSeconds()*s}this._timeline.forEachAtTime(n,r=>r.invoke(e))}schedule(e,n){const r=new $r(this,{callback:e,time:new xo(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new Im(this,{callback:e,duration:new gn(this.context,s).toTicks(),interval:new gn(this.context,n).toTicks(),time:new xo(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new $r(this,{callback:e,once:!0,time:new xo(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new qn(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let r;return se(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){_n(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new gn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new gn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new qn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new qn(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){if(!n){const s=this.now();if(e.getValueAtTime(s)!==0){const i=this.bpm.getValueAtTime(s),o=1/(60/i/this.PPQ);n=e.getValueAtTime(s)/o}else n=0}const r=new Ot(n);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),OT(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ya.mixin(fa);zc(t=>{t.transport=new fa({context:t})});qc(t=>{t.transport.dispose()});class Kt extends re{constructor(e){super(e),this.input=void 0,this._state=new Cm("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=me,this._syncedStop=me,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Cs({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Le(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,onstop:me,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=an(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")te(ju(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(di(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else CT(this.context),this._start(s,n,r);return this}stop(e){let n=an(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||se(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(n>0){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=me,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class pa extends xi{constructor(){super(L(pa.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=L(pa.getDefaults(),arguments,["url","onload"]);Qi(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ce({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ge(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(xi.getDefaults(),{url:new ge,loop:!1,loopEnd:0,loopStart:0,onload:me,onerror:me,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){te(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=di(n,this.loopStart):n=di(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),u=a-l;ff(o,a)&&(o=(o-l)%u+l),pn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,NT(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),se(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function bs(t,e){return He(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new Tm(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Qu extends xi{constructor(){super(L(Qu.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=L(Qu.getDefaults(),arguments,["frequency","type"]);Qi(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ce({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ce({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Le(this,["frequency","detune"])}static getDefaults(){return Object.assign(xi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class $e extends Kt{constructor(){super(L($e.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=L($e.getDefaults(),arguments,["frequency","type"]);this.frequency=new et({context:this.context,units:"frequency",value:e.frequency}),Le(this,"frequency"),this.detune=new et({context:this.context,units:"cents",value:e.detune}),Le(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Kt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new Qu({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return $e._periodicWaveCache.find(n=>n.phase===this._phase&&oP(n.partials,this._partials));{const e=$e._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(se(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),$e._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),$e._periodicWaveCache.length>100&&$e._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Vr(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let l=1;l<s;++l){const u=2/(l*Math.PI);let c;switch(e){case"sine":c=l<=a?1:0,this._partials[l-1]=c;break;case"square":c=l&1?2*u:0,this._partials[l-1]=c;break;case"sawtooth":c=u*(l&1?1:-1),this._partials[l-1]=c;break;case"triangle":l&1?c=2*(u*u)*(l-1>>1&1?-1:1):c=0,this._partials[l-1]=c;break;case"custom":c=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}c!==0?(i[l]=-c*Math.sin(n*l),o[l]=c*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return lP(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}$e._periodicWaveCache=[];class Hc extends re{constructor(){super(Object.assign(L(Hc.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return Em(this,e,n,r),this}}class ma extends Hc{constructor(){super(Object.assign(L(ma.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=L(ma.getDefaults(),arguments,["mapping","length"]);_n(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Zb(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(et.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));te(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kP extends Hc{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ma({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Es extends et{constructor(){super(Object.assign(L(Es.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=L(Es.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ot({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(et.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ga extends Kt{constructor(){super(L(ga.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new kP({context:this.context}),this._modulationNode=new Ot({context:this.context});const e=L(ga.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new $e({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new $e({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Es({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Le(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign($e.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ya extends Kt{constructor(){super(L(ya.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ot({context:this.context,gain:0});const e=L(ya.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new $e({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new et({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new $e({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Es({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Es({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Le(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign($e.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Di extends Kt{constructor(){super(L(Di.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ot({context:this.context,gain:0}),this._thresh=new ma({context:this.context,mapping:n=>n<=0?-1:1});const e=L(Di.getDefaults(),arguments,["frequency","width"]);this.width=new et({context:this.context,units:"audioRange",value:e.width}),this._triangle=new $e({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Le(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class va extends Kt{constructor(){super(L(va.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=L(va.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new et({context:this.context,units:"frequency",value:e.frequency}),this.detune=new et({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Le(this,["frequency","detune"])}static getDefaults(){return Object.assign($e.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(Vr(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new $e({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):me});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class _a extends Kt{constructor(){super(L(_a.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Es({context:this.context,value:2});const e=L(_a.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Di({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new $e({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Le(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ev={am:ga,fat:va,fm:ya,oscillator:$e,pulse:Di,pwm:_a};class wa extends Kt{constructor(){super(L(wa.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=L(wa.getDefaults(),arguments,["frequency","type"]);this.frequency=new et({context:this.context,units:"frequency",value:e.frequency}),this.detune=new et({context:this.context,units:"cents",value:e.detune}),Le(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign($e.getDefaults(),ya.getDefaults(),ga.getDefaults(),va.getDefaults(),Di.getDefaults(),_a.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=ev[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof ev[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ts(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ts(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ln(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return He(this,void 0,void 0,function*(){return bs(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function PT(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Vr(i,t,e),n.set(this,i)}})}}function cr(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Vr(this.toSeconds(i),t,e),n.set(this,i)}})}}class Oi extends Kt{constructor(){super(L(Oi.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=L(Oi.getDefaults(),arguments,["url","onload"]);this._buffer=new ge({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Kt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:me,onerror:me,playbackRate:1,reverse:!1})}load(e){return He(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=me){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=di(n,this._loopStart):n=di(n,0);const s=this.toSeconds(n),i=r;r=di(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new pa({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&an(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){this._stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Vr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Vr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}En([cr(0)],Oi.prototype,"fadeIn",void 0);En([cr(0)],Oi.prototype,"fadeOut",void 0);class or extends re{constructor(){super(L(or.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new et({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=L(or.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(re.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Ln(e))return e;{let r;for(r in kl)if(kl[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Ln(r)&&Reflect.has(kl,r)){const s=kl[r];cs(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(_n(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){te(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+s;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(te(_n(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return Em(this,e,n,r),this}asArray(e=1024){return He(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,r=new Tm(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}En([cr(0)],or.prototype,"attack",void 0);En([cr(0)],or.prototype,"decay",void 0);En([PT(0,1)],or.prototype,"sustain",void 0);En([cr(0)],or.prototype,"release",void 0);const kl=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));const s=[],i=6.4;for(e=0;e<128-1;e++){n=e/(128-1);const d=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=d/10+n*.83}s[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const l=[];for(e=0;e<128;e++)n=e/(128-1),l[e]=.5*(1-Math.cos(Math.PI*n));const u=[];for(e=0;e<128;e++){n=e/(128-1);const d=Math.pow(n,3)*4+.2,f=Math.cos(d*Math.PI*2*n);u[e]=Math.abs(f*(1-n))}function c(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:c(u),Out:u},cosine:{In:r,Out:h(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:c(s)},sine:{In:l,Out:c(l)},step:{In:o,Out:c(o)}}})();class ks extends re{constructor(){super(L(ks.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=L(ks.getDefaults(),arguments);this._volume=this.output=new Cs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Le(this,"volume")}static getDefaults(){return Object.assign(re.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Is extends ks{constructor(){super(L(Is.getDefaults(),arguments));const e=L(Is.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ks.getDefaults(),{detune:0,onsilence:me,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof rn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}En([cr(0)],Is.prototype,"portamento",void 0);class Nm extends or{constructor(){super(L(Nm.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ot({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Mi extends Is{constructor(){super(L(Mi.getDefaults(),arguments)),this.name="Synth";const e=L(Mi.getDefaults(),arguments);this.oscillator=new wa(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Nm(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Le(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Is.getDefaults(),{envelope:Object.assign(Jy(or.getDefaults(),Object.keys(re.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Jy(wa.getDefaults(),[...Object.keys(Kt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ta extends Mi{constructor(){super(L(Ta.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=L(Ta.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Le(this,["oscillator","envelope"])}static getDefaults(){return hi(Is.getDefaults(),Mi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof rn?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}En([PT(0)],Ta.prototype,"octaves",void 0);En([cr(0)],Ta.prototype,"pitchDecay",void 0);const LT=new Set;function Am(t){LT.add(t)}function FT(t,e){const n=`registerProcessor("${t}", ${e})`;LT.add(n)}const IP=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Am(IP);const NP=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Am(NP);const AP=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Am(AP);const xP="feedback-comb-filter",DP=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;FT(xP,DP);class Sa extends ks{constructor(){super(L(Sa.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=L(Sa.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(te(El(r)||Ts(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),El(r)){const i=new rn(this.context,r).toMidi();n[i]=e.urls[r]}else Ts(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new km({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ks.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:me,onerror:me,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=bT(new rn(this.context,s).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),u=o-l,c=this._buffers.get(u),h=RT(l+a),d=new pa({url:c,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(n,0,c.duration/h,r),_n(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new rn(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),_n(n)?(te(_n(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(te(El(e)||isFinite(e),`note must be a pitch or midi: ${e}`),El(e)){const s=new rn(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}En([cr(0)],Sa.prototype,"attack",void 0);En([cr(0)],Sa.prototype,"release",void 0);class Ku extends re{constructor(){super(Object.assign(L(Ku.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=L(Ku.getDefaults(),arguments,["pan"]);this.pan=new Ce({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Le(this,"pan")}static getDefaults(){return Object.assign(re.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const OP="bit-crusher",MP=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;FT(OP,MP);class Ve extends re{constructor(){super(L(Ve.getDefaults(),arguments,["solo"])),this.name="Solo";const e=L(Ve.getDefaults(),arguments,["solo"]);this.input=this.output=new Ot({context:this.context}),Ve._allSolos.has(this.context)||Ve._allSolos.set(this.context,new Set),Ve._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(re.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Ve._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ve._soloed.has(this.context)||Ve._soloed.set(this.context,new Set),Ve._soloed.get(this.context).add(this)}_removeSolo(){Ve._soloed.has(this.context)&&Ve._soloed.get(this.context).delete(this)}_isSoloed(){return Ve._soloed.has(this.context)&&Ve._soloed.get(this.context).has(this)}_noSolos(){return!Ve._soloed.has(this.context)||Ve._soloed.has(this.context)&&Ve._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ve._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ve._allSolos=new Map;Ve._soloed=new Map;class Xu extends re{constructor(){super(L(Xu.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=L(Xu.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ku({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Cs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Le(this,["pan","volume"])}static getDefaults(){return Object.assign(re.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Zr extends re{constructor(){super(L(Zr.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=L(Zr.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ve({solo:e.solo,context:this.context}),this._panVol=this.output=new Xu({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Le(this,["pan","volume"])}static getDefaults(){return Object.assign(re.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Zr.buses.has(e)||Zr.buses.set(e,new Ot({context:this.context})),Zr.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new Ot({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Zr.buses=new Map;class RP extends re{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ce({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ce({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ce({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ce({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ce({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ce({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ce({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ce({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ce({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(re.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}zc(t=>{t.listener=new RP({context:t})});qc(t=>{t.listener.dispose()});mn().transport;mn().destination;mn().destination;mn().listener;mn().draw;mn();const bP="/daw-compmusic-2022/assets/kick.ab0b5ea2.mp3",PP="/daw-compmusic-2022/assets/snare.914cef91.mp3",LP="/daw-compmusic-2022/assets/hihat.3d5db956.mp3";var Gc={exports:{}},Qc={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP=It.exports,VP=Symbol.for("react.element"),$P=Symbol.for("react.fragment"),UP=Object.prototype.hasOwnProperty,BP=FP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jP={key:!0,ref:!0,__self:!0,__source:!0};function VT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UP.call(e,r)&&!jP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:VP,type:t,key:i,ref:o,props:s,_owner:BP.current}}Qc.Fragment=$P;Qc.jsx=VT;Qc.jsxs=VT;(function(t){t.exports=Qc})(Gc);const zP=Gc.exports.Fragment,Dn=Gc.exports.jsx,qP=Gc.exports.jsxs,WP={kick:bP,snare:PP,hihat:LP},HP=t=>{const[e,n]=It.exports.useState(!1),r=It.exports.useRef(null),s=It.exports.useRef(null);It.exports.useEffect(()=>{if(t.drum){s.current=new Oi({url:WP[t.drum]}).toDestination();return}r.current=new Mi({}).toDestination()},[]),It.exports.useEffect(()=>{!t.playNow||t.drum&&!s.current||!t.drum&&!r.current||i()},[t.playNow]);function i(){n(!0),t.drum?s.current.start():r.current.triggerAttackRelease(t.note,"8n"),setTimeout(()=>{n(!1)},100)}return Dn("div",{style:{filter:t.darken?"brightness(0.5)":"brightness(1)",transition:"all 0.2s ease-in-out",backgroundColor:t.active?t.color||"#000":"#fff",opacity:t.active?.7:1},className:`tile ${t.active&&"active"} ${e&&"playing"}`,onClick:t.onClick})},In=16,pr=13,GP=["A4","G4","E4","D4","C4","A3","G3","E3","D3","C3"],QP=["#4f86c6","#ed254e","#f9dc5c","#C9F8F0","#011936","#4f86c6","#ed254e","#f9dc5c","#C9F8F0","#011936"],KP=t=>{const[e,n]=It.exports.useState(Array.from({length:pr},(m,v)=>Array.from({length:In},(T,_)=>!1))),[r,s]=It.exports.useState(Array.from({length:pr},(m,v)=>Array.from({length:In},(T,_)=>0))),[i,o]=It.exports.useState(Array.from({length:In},(m,v)=>!1)),[a,l]=It.exports.useState(),[u,c]=It.exports.useState(!1);let h=0;It.exports.useEffect(()=>{const m=Vx(m1(D1,"active","active"),v=>{var S;const T=(S=v.data())==null?void 0:S.active;console.log("\u{1F449} fetched data");const _=[];for(let C=0;C<pr;C++){_.push([]);for(let E=0;E<In;E++)_[C].push(T[C*In+E])}n(_)});return()=>m()},[]);function d(m,v){s(T=>{const _=[...T];return _[m][v]=_[m][v]+1,_})}async function f(m,v){const T=[...e];T[m][v]=!T[m][v],T[m][v]&&d(m,v),n(T),console.log("\u2601\uFE0F upload data..."),await zx(T),console.log("\u2601\uFE0F data uploaded")}function p(m){e.forEach((v,T)=>{v[m]&&d(T,m)})}function y(){c(!0),l(setInterval(()=>{p(h),o(Array.from({length:In},(m,v)=>v===h)),h=(h+1)%In},300))}function w(){c(!1),clearInterval(a),o(Array.from({length:In},(m,v)=>!1)),h=0}function g(){n(Array.from({length:pr},(m,v)=>Array.from({length:In},(T,_)=>!1))),w()}return qP("div",{className:"grid",children:[Array.from({length:pr},(m,v)=>Dn(zP,{children:Array.from({length:In},(T,_)=>Dn(HP,{active:e[v][_],onClick:()=>f(v,_),playNow:r[v][_],color:QP[v],note:GP[v]||"C4",darken:i[_],drum:v===pr-1&&"kick"||v===pr-2&&"snare"||v===pr-3&&"hihat"||void 0},`${v}-${_}`))})),u?Dn("button",{onClick:w,children:"Stop"}):Dn("button",{onClick:y,children:"Start"}),Dn("button",{onClick:g,children:"Clear"})]})};function XP(){return Dn("div",{className:"main",children:Dn(KP,{})})}Fh.createRoot(document.getElementById("root")).render(Dn(iS.StrictMode,{children:Dn(XP,{})}));
